(this.webpackJsonpmiral=this.webpackJsonpmiral||[]).push([[0],[,,,,,,,function(e,t,a){},,,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,,,,function(e,t,a){e.exports=a(75)},,,,,function(e,t,a){},function(e,t,a){},,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(21),o=a.n(r),s=(a(28),a(2)),i=a(3),c=a(5),d=a(4),h=(a(29),a(1)),u=a(8),m=a(22),p={tool:null,currentOpenSubMenu:null,autoActivate:null,previousSelectedTools:{},selectAreaVisible:!1,selectAreaPosition:{x:0,y:0,width:0,height:0}},v=Object(n.createContext)(p),f=v.Provider,g=(v.Consumer,function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){var a=Object(h.a)({},e);switch(t.type){case"activateTool":return a.tool=t.data.tool,e.currentOpenSubMenu&&(a.previousSelectedTools[e.currentOpenSubMenu]=t.data.tool),a;case"activateSubMenu":return a.currentOpenSubMenu=t.data.subMenu,a.previousSelectedTools[a.currentOpenSubMenu]&&null!==t.data.subMenu?a.autoActivate=a.previousSelectedTools[a.currentOpenSubMenu]:t.data.defaultTool&&(a.autoActivate=t.data.defaultTool),a;case"resetToolbar":return a.tool=null,a.currentOpenSubMenu=null,a.autoActivate=null,a;case"resetAutoActivate":return a.autoActivate=null,a;case"activateSelectArea":return a.selectAreaVisible=!0,a.selectAreaPosition=t.data.selectAreaPosition,a;case"updateSelectArea":return a.selectAreaPosition=t.data.selectAreaPosition,a;case"resetSelectArea":return a.selectAreaVisible=!1,a.selectAreaPosition=p.selectAreaPosition,a;default:throw new Error}}),Object(h.a)({},p)),r=Object(m.a)(a,2),o=r[0],s=r[1];return l.a.createElement(f,{value:{state:o,dispatch:s}},t)}),y=(a(7),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleToolSelect=function(e){l.context.dispatch({type:"activateTool",data:{tool:l.props.type}}),l.props.handleDeselectAllElements(),l.props.registerDragHandler("drawCanvas",{dragStartHandler:l.props.handleDragStart,dragMoveHandler:l.props.handleDragMove,dragEndHandler:l.props.handleDragEnd,clickHandler:l.props.handleClick})},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentSelectedTool,a="";return e.type===t&&(a="toolbar_tool_selected"),l.a.createElement("div",{className:"toolbar_tool toolbar_".concat(this.props.type," ").concat(a),onClick:this.handleToolSelect},this.props.content||null)}},{key:"componentDidUpdate",value:function(){this.context.state.autoActivate===this.props.type&&(this.handleToolSelect(),this.context.dispatch({type:"resetAutoActivate"}))}}]),a}(n.Component));y.contextType=v;var S=y,b=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleSelectStart=function(e,t,a){l.context.dispatch({type:"activateSelectArea",data:{selectAreaPosition:{x:t,y:a,width:e.movementX,height:e.movementY}}}),l.setState({x:t,y:a,x1:t,y1:a})},l.handleSelectMove=function(e){var t={x:l.state.x,y:l.state.y,x1:l.state.x1+e.movementX,y1:l.state.y1+e.movementY},a={width:t.x1-t.x,height:t.y1-t.y};t.x>t.x1&&(a.x=t.x1,a.width=t.x-t.x1),t.y>t.y1&&(a.y=t.y1,a.height=t.y-t.y1),l.context.dispatch({type:"updateSelectArea",data:{selectAreaPosition:Object.assign({},l.context.state.selectAreaPosition,a)}}),l.setState(t)},l.handleSelectEnd=function(e){var t=l.state,a=t.x,n=t.y,r=t.x1,o=t.y1,s={x:a,y:n,x1:r,y1:o};a>r&&(s.x=r,s.x1=a),n>o&&(s.y=o,s.y1=n),l.props.handleSelectElementsWithinArea(s.x,s.y,s.x1,s.y1),l.context.dispatch({type:"resetSelectArea"})},l.state={x:0,y:0,x1:0,y1:0},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.currentSelectedTool;return l.a.createElement(S,{type:"select",handleDeselectAllElements:t,handleDrawCanvasShow:a,registerDragHandler:n,handleDragStart:this.handleSelectStart,handleDragMove:this.handleSelectMove,handleDragEnd:this.handleSelectEnd,currentSelectedTool:r})}}]),a}(n.Component);b.contextType=v;var E=b,w=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleToggleSubMenu=function(e){e.stopPropagation(),l.state.toolSubMenuOpen?(l.setState({toolSubMenuOpen:!1}),l.context.dispatch({type:"activateSubMenu",data:{subMenu:null}})):(l.setState({toolSubMenuOpen:!0}),l.context.dispatch({type:"activateSubMenu",data:{subMenu:l.props.type,defaultTool:l.props.defaultTool}}))},l.state={toolSubMenuOpen:!1},l}return Object(i.a)(a,[{key:"render",value:function(){var e="toolbar_submenu toolbar_subMenu_".concat(this.props.type);this.state.toolSubMenuOpen&&this.props.subMenuItems&&(e+=" toolbar_isVisible");var t=[[]],a=0,n=0;this.props.subMenuItems.forEach((function(e){a<5?(t[n].push(e),a++):(a=0,n++,t[n]=[],t[n].push(e),a++)}));var r="toolbar_".concat(this.props.type);return this.context.state.previousSelectedTools[this.props.type]&&!this.props.noIconChange&&(r="toolbar_".concat(this.context.state.previousSelectedTools[this.props.type])),l.a.createElement("div",{className:"toolbar_tool ".concat(r),onClick:this.handleToggleSubMenu},l.a.createElement("div",{className:e},l.a.createElement("div",{className:"leftArrow"}),l.a.createElement("div",{className:"toolbar_submenu_scrollContainer"},t.map((function(e,t){return l.a.createElement("div",{className:"toolbar_subMenu_column",key:"subMenu_column_".concat(t)},e.map((function(e){return e})))})))))}},{key:"componentDidUpdate",value:function(){this.context.state.currentOpenSubMenu!==this.props.type&&this.state.toolSubMenuOpen&&this.setState({toolSubMenuOpen:!1})}}]),a}(n.Component);w.contextType=v;var O=w,D=a(6),C=a.n(D);function k(e,t,a){return{id:e,type:t,styles:{x:0,y:0,width:1,height:1,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*a,strokeDasharray:"0"},fontStyle:{fontSize:24*a,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center",alignItems:"center"},text:"",initialZoomLevel:a,link:"",hidden:!1,groups:[],locked:!1}}var j=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"shape",n.zoomLevel);var o=l.elements[r];o.shapeType=1,o.fixedRatio="true",o.styles.x=t*n.zoomLevel+n.offsetX-60*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-60*n.zoomLevel,o.styles.width=120*n.zoomLevel,o.styles.height=120*n.zoomLevel,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleShapeDragStart",value:function(e,t,a,n){var l=this.state,r={};r.elements=Object(h.a)({},l.elements);var o=C.a.generate();r.elements[o]=k(o,"shape",l.zoomLevel);var s=r.elements[o];s.shapeType=1,s.fixedRatio="true",s.styles.x=t*l.zoomLevel+l.offsetX,s.styles.y=a*l.zoomLevel+l.offsetY,s.styles.width=n*l.zoomLevel,s.styles.height=n*l.zoomLevel,r.elementState=Object(h.a)({},l.elementState),r.elementState[o]={selected:l.userID},r.elementBeingDrawn=o,r.storeUndo=!0,this.setState(r)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"shapeCircle",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),x=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"shape",n.zoomLevel);var o=l.elements[r];o.shapeType=0,o.styles.x=t*n.zoomLevel+n.offsetX-120*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-60*n.zoomLevel,o.styles.width=240*n.zoomLevel,o.styles.height=120*n.zoomLevel,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"shape",r.zoomLevel);var i=o.elements[s];i.shapeType=0,i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY,i.styles.width=n*r.zoomLevel,i.styles.height=l*r.zoomLevel,o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"shapeRect",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),z=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"shape",n.zoomLevel);var o=l.elements[r];o.shapeType=2,o.styles.x=t*n.zoomLevel+n.offsetX-60*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-60*n.zoomLevel,o.styles.width=120*n.zoomLevel,o.styles.height=120*n.zoomLevel,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]={id:s,type:"shape",shapeType:2,styles:{x:t*r.zoomLevel+r.offsetX,y:a*r.zoomLevel+r.offsetY,width:n*r.zoomLevel,height:l*r.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*r.zoomLevel,strokeDasharray:"0"},fontStyle:{fontSize:24*r.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:r.zoomLevel},o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"shapeTriangle",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),M=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l.subMenuType="shape",l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleDrawCanvasShow,a=e.registerDragHandler,n=e.handleDragMove,r=e.handleDragEnd,o=e.currentSelectedTool,s=e.handleDeselectAllElements,i=[l.a.createElement(x,{key:"tool_shapeRect",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(j,{key:"tool_shapeCircle",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(z,{key:"tool_shapeTriangle",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o})];return l.a.createElement(O,{type:this.subMenuType,subMenuItems:i,handleSetCurrentOpenSubMenu:this.props.handleSetCurrentOpenSubMenu,defaultTool:"shapeRect"})}}]),a}(n.Component);M.contextType=v;var L=M,N=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handlePostitClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"postit",n.zoomLevel);var o=l.elements[r];o.subType="square",o.fixedRatio="true",o.predefinedColor=3,o.fontSizeAuto=!0,o.styles.x=t*n.zoomLevel+n.offsetX-64*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-64*n.zoomLevel,o.styles.width=128*n.zoomLevel,o.styles.height=128*n.zoomLevel,o.styles.strokeOpacity=0,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID};l.elementState[r].shapeType=Math.floor(4*Math.random())+0,l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handlePostitDragStart",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"postit",n.zoomLevel);var o=l.elements[r];o.subType="square",o.fixedRatio="true",o.predefinedColor=3,o.fontSizeAuto=!0,o.styles.x=t*n.zoomLevel+n.offsetX-128*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-128*n.zoomLevel,o.styles.width=128*n.zoomLevel,o.styles.height=128*n.zoomLevel,o.styles.strokeOpacity=0,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID};l.elementState[r].shapeType=Math.floor(4*Math.random())+0,l.storeUndo=!0,l.elementBeingDrawn=r,this.setState(l)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.currentSelectedTool,i=e.autoActivate;return l.a.createElement(S,{type:"postitSquare",handleDeselectAllElements:t,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handlePostitClick,handleDragStart:this.handlePostitDragStart,handleDragMove:r,handleDragEnd:o,currentSelectedTool:s,autoActivate:i})}}]),a}(n.Component),_=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handlePostitClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"postit",n.zoomLevel);var o=l.elements[r];o.subType="rect",o.predefinedColor=3,o.fixedRatio="true",o.fontSizeAuto=!0,o.styles.x=t*n.zoomLevel+n.offsetX-103*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-64*n.zoomLevel,o.styles.width=206*n.zoomLevel,o.styles.height=128*n.zoomLevel,o.styles.strokeOpacity=0,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID};l.elementState[r].shapeType=Math.floor(4*Math.random())+0,l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handlePostitDragStart",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"postit",n.zoomLevel);var o=l.elements[r];o.subType="rect",o.predefinedColor=3,o.fixedRatio="true",o.fontSizeAuto=!0,o.styles.x=t*n.zoomLevel+n.offsetX-256*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-168*n.zoomLevel,o.styles.width=256*n.zoomLevel,o.styles.height=168*n.zoomLevel,o.styles.strokeOpacity=0,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID};l.elementState[r].shapeType=Math.floor(4*Math.random())+0,l.storeUndo=!0,l.elementBeingDrawn=r,this.setState(l)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.currentSelectedTool,i=e.autoActivate;return l.a.createElement(S,{type:"postitRect",handleDeselectAllElements:t,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handlePostitClick,handleDragStart:this.handlePostitDragStart,handleDragMove:r,handleDragEnd:o,currentSelectedTool:s,autoActivate:i})}}]),a}(n.Component),T=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handlePostitClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"postit",n.zoomLevel);var o=l.elements[r];o.subType="rectv",o.predefinedColor=3,o.fixedRatio="true",o.fontSizeAuto=!0,o.styles.x=t*n.zoomLevel+n.offsetX-60*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-100*n.zoomLevel,o.styles.width=120*n.zoomLevel,o.styles.height=200*n.zoomLevel,o.styles.strokeOpacity=0,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID};l.elementState[r].shapeType=Math.floor(4*Math.random())+0,l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handlePostitDragStart",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"postit",n.zoomLevel);var o=l.elements[r];o.subType="rectv",o.predefinedColor=3,o.fixedRatio="true",o.fontSizeAuto=!0,o.styles.x=t*n.zoomLevel+n.offsetX-120*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-200*n.zoomLevel,o.styles.width=120*n.zoomLevel,o.styles.height=200*n.zoomLevel,o.styles.strokeOpacity=0,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID};l.elementState[r].shapeType=Math.floor(4*Math.random())+0,l.storeUndo=!0,l.elementBeingDrawn=r,this.setState(l)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.currentSelectedTool,i=e.autoActivate;return l.a.createElement(S,{type:"postitRectV",handleDeselectAllElements:t,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handlePostitClick,handleDragStart:this.handlePostitDragStart,handleDragMove:r,handleDragEnd:o,currentSelectedTool:s,autoActivate:i})}}]),a}(n.Component),A=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l.subMenuType="postit",l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleDrawCanvasShow,a=e.registerDragHandler,n=e.handleDragMove,r=e.handleDragEnd,o=e.currentSelectedTool,s=e.handleDeselectAllElements,i=[l.a.createElement(N,{key:"tool_postitSquare",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(_,{key:"tool_postitRect",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(T,{key:"tool_postitRectV",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o})];return l.a.createElement(O,{type:this.subMenuType,subMenuItems:i,defaultTool:"postitSquare"})}}]),a}(n.Component);A.contextType=v;var H=A,B=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleTextClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"text",n.zoomLevel);var o=l.elements[r];o.styles.x=t*n.zoomLevel+n.offsetX-120*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-24*1.4/2*n.zoomLevel,o.styles.width=240*n.zoomLevel,o.styles.height=24*1.4*n.zoomLevel,o.styles.strokeOpacity=0,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.tool="pan",this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleTextDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"text",r.zoomLevel);var i=o.elements[s];i.styles.x=t*r.zoomLevel+r.offsetX-n/2*r.zoomLevel,i.styles.y=a*r.zoomLevel+r.offsetY-l/2*r.zoomLevel,i.styles.width=n*r.zoomLevel,i.styles.height=l*r.zoomLevel,i.styles.strokeOpacity=0,o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.currentSelectedTool;return l.a.createElement(S,{type:"text",handleDeselectAllElements:t,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleTextClick,handleDragStart:this.handleTextDragStart,handleDragMove:r,handleDragEnd:o,currentSelectedTool:s})}}]),a}(n.Component),P=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"line",n.zoomLevel);var o=l.elements[r];o.shapeType=0,o.styles.x=t*n.zoomLevel+n.offsetX,o.styles.y=a*n.zoomLevel+n.offsetY-120*n.zoomLevel,o.styles.width=120*n.zoomLevel,o.styles.height=120*n.zoomLevel,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"line",r.zoomLevel);var i=o.elements[s];i.shapeType=0,i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY-120*r.zoomLevel,i.styles.width=120*r.zoomLevel,i.styles.height=120*r.zoomLevel,o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"lineStraight",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),U=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"line",n.zoomLevel);var o=l.elements[r];o.shapeType=1,o.styles.x=t*n.zoomLevel+n.offsetX,o.styles.y=a*n.zoomLevel+n.offsetY-120*n.zoomLevel,o.styles.width=120*n.zoomLevel,o.styles.height=120*n.zoomLevel,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"line",r.zoomLevel);var i=o.elements[s];i.shapeType=1,i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY-120*r.zoomLevel,i.styles.width=120*r.zoomLevel,i.styles.height=120*r.zoomLevel,o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"lineSmooth",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),I=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"line",n.zoomLevel);var o=l.elements[r];o.shapeType=0,o.styles.x=t*n.zoomLevel+n.offsetX,o.styles.y=a*n.zoomLevel+n.offsetY-120*n.zoomLevel,o.styles.width=120*n.zoomLevel,o.styles.height=120*n.zoomLevel,o.styles.markerEnd="url(#arrow)",l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"line",r.zoomLevel);var i=o.elements[s];i.shapeType=0,i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY-120*r.zoomLevel,i.styles.width=120*r.zoomLevel,i.styles.height=120*r.zoomLevel,i.styles.markerEnd="url(#arrow)",o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"lineStraightArrow",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),F=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"line",n.zoomLevel);var o=l.elements[r];o.shapeType=1,o.styles.x=t*n.zoomLevel+n.offsetX,o.styles.y=a*n.zoomLevel+n.offsetY-120*n.zoomLevel,o.styles.width=120*n.zoomLevel,o.styles.height=120*n.zoomLevel,o.styles.markerEnd="url(#arrow)",l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"line",r.zoomLevel);var i=o.elements[s];i.shapeType=1,i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY-120*r.zoomLevel,i.styles.width=120*r.zoomLevel,i.styles.height=120*r.zoomLevel,i.styles.markerEnd="url(#arrow)",o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"lineSmoothArrow",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),V=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate(),i=t*r.zoomLevel+r.offsetX,c=a*r.zoomLevel+r.offsetY;o.elements[s]=k(s,"line",r.zoomLevel);var d=o.elements[s];d.shapeType=2,d.styles.x=i,d.styles.y=c,d.styles.width=n*r.zoomLevel,d.styles.height=l*r.zoomLevel,d.styles.strokeWidth=r.zoomLevel,d.styles.d="",o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID,pathBuffer:[],smoothingLevel:8,currentPath:"M ".concat(i," ").concat(c)},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"handleDragMove",value:function(e){var t=function(e,t,a){var n=t.length;if(n%2===1||n>=a){var l,r,o=0,s=0,i=0;for(r=e;r<n;r++)i++,o+=(l=t[r]).x,s+=l.y;return{x:o/i,y:s/i}}return null},a=this.state,n={};if(null!==a.elementBeingDrawn){var l=Object(h.a)({},a.elements),r=Object(h.a)({},a.elementState);l[a.elementBeingDrawn].styles=Object(h.a)({},l[a.elementBeingDrawn].styles);var o=function(e,a,n){var l=t(0,a,n),r="";if(l){e+=" L"+l.x+" "+l.y;for(var o=2;o<a.length;o+=2)r+=" L"+(l=t(o,a,n)).x+" "+l.y}return{currentPath:e,tmpPath:r}}((r=function(e,t,a){var n=t.zoomLevel,l=t.offsetX,r=t.offsetY,o=a[t.elementBeingDrawn],s=e.clientX*n+l,i=e.clientY*n+r;for(o.pathBuffer.push({x:s,y:i});o.pathBuffer.length>o.smoothingLevel;)o.pathBuffer.shift();return a}(e,a,r))[a.elementBeingDrawn].currentPath,r[a.elementBeingDrawn].pathBuffer,r[a.elementBeingDrawn].smoothingLevel);l[a.elementBeingDrawn].styles.d=o.currentPath+o.tmpPath,r[a.elementBeingDrawn].currentPath=o.currentPath,n.elements=l,n.elementState=r}this.setState(n)}},{key:"handleDragEnd",value:function(){var e={tool:"pan"};this.setState(e)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.autoActivate,o=e.currentSelectedTool;return l.a.createElement(S,{type:"lineFreehand",handleDeselectAllElements:t,currentSelectedTool:o,handleDrawCanvasShow:a,registerDragHandler:n,handleDragStart:this.handleShapeDragStart,handleDragMove:this.handleDragMove,handleDragEnd:this.handleDragEnd,autoActivate:r})}}]),a}(n.Component),X=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l.subMenuType="line",l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleDrawCanvasShow,a=e.registerDragHandler,n=e.handleDragMove,r=e.handleDragEnd,o=e.currentSelectedTool,s=e.handleDeselectAllElements,i=[l.a.createElement(P,{key:"tool_lineStraight",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(U,{key:"tool_lineSmooth",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(I,{key:"tool_lineStraightArrow",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(F,{key:"tool_lineSmoothArrow",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(V,{key:"tool_lineFreehand",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o})];return l.a.createElement(O,{type:this.subMenuType,subMenuItems:i,defaultTool:"lineStraight"})}}]),a}(n.Component);X.contextType=v;var Y=X,R=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"emoji",n.zoomLevel);var o=l.elements[r];o.styles.x=t*n.zoomLevel+n.offsetX-12*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-12*n.zoomLevel,o.styles.width=24*n.zoomLevel,o.styles.height=24*n.zoomLevel,o.styles.strokeOpacity=0,o.emojiCharacterCode=window.workshoppr.emojiCharacter,o.fixedRatio="true",l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.dragStartHandler=null,l.dragMoveHandler=null,l.dragEndHandler=null,l.clickHandler=null,l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"emoji",r.zoomLevel);var i=o.elements[s];i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY,i.styles.width=n*r.zoomLevel,i.styles.height=l*r.zoomLevel,i.styles.strokeOpacity=0,i.emojiCharacterCode=window.workshoppr.emojiCharacter,i.fixedRatio="true",o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.emojiCharacter,a=e.emojiCharacterCode,n=e.handleDeselectAllElements,r=e.handleDrawCanvasShow,o=e.registerDragHandler,s=e.handleDragMove,i=e.handleDragEnd,c=e.autoActivate,d=e.currentSelectedTool;return l.a.createElement(S,{type:"emoji_"+a,content:t,handleDeselectAllElements:n,currentSelectedTool:d,handleDrawCanvasShow:r,registerDragHandler:o,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:s,handleDragEnd:i,autoActivate:c})}}]),a}(n.Component),W=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l.subMenuType="emoji",window.workshoppr||(window.workshoppr={}),window.workshoppr.emojiCharacter=String.fromCodePoint(String("128512").toString(16)),l}return Object(i.a)(a,[{key:"uglyHack",value:function(e){window.workshoppr.emojiCharacter=String.fromCodePoint(String(e.target.id).toString(16))}},{key:"render",value:function(){var e=this,t=this.props,a=t.handleDrawCanvasShow,n=t.registerDragHandler,r=t.handleDragMove,o=t.handleDragEnd,s=t.currentSelectedTool,i=t.handleDeselectAllElements,c=[];return[128512,128515,128516,128513,128518,128517,129315,128514,128578,128579,128521,128522,128519,129392,128525,129321,128536,128535,9786,128538,128537,128523,128539,128540,129322,128541,129297,129303,129325,129323,129300,129296,129320,128528,128529,128527,128530,128580,128556,128558,129317,128524,128532,128554,129316,128564,128567,129298,129301,129314,129326,129319,129397,129398,129396,128565,129327,129312,129395,128526,129299,129488,128533,128577,128562,128563,129402,128552,128560,128549,128546,128557,128561,128534,128531,128553,128548,128545,129324,128520,128127,128128,9760,128169,129313,128121,128122,128123,128125,128126,129302,128570,128569,128571,128576,128575,128584,128585,128586,128139,128140,128157,128148,10084,129505,128155,128154,128153,128156,128175,128165,128166,128168,128371,128163,128172,128495,128173,128164,128075,129306,128400,9995,128406,128076,9996,129310,129311,129304,129305,128072,128073,128070,128405,128071,9757,128077,128078,128074,129307,129308,128079,128588,128080,129309,128591,9997,128133,128170,129462,128066,128067,129504,129463,129460,128064,128065,128069,128068,128118,129490,128104,129492,128105,128117,128116,128581,128129,128587,129318,129335,127877,129464,129465,129497,129498,129499,129500,129501,129502,129503,127939,128131,128378,129496,128704,128716,128053,128018,129421,128054,128021,128041,128058,129418,129437,128049,128008,129409,128047,128005,128006,128052,128014,129412,129427,129420,128046,128002,128003,128055,128022,128023,128015,128016,128042,128043,129426,129433,128024,129423,129435,128045,128001,128057,128048,128063,128007,129428,129415,128059,128040,128060,129432,129441,128062,129411,128020,128019,128035,128036,128038,128039,129413,129414,129442,129417,129434,128056,129436,128010,128034,129422,128013,129430,129429,128051,128044,128032,128033,128025,128012,129419,128027,128028,128029,128030,128375,129410,129439,129440,128144,127801,127794,127795,127796,127797,9752,127809,127815,127816,127817,127818,127819,127820,127821,129389,127822,127823,127825,127827,129373,127813,129381,127814,129364,129365,127798,127812,127838,129384,129360,129374,129472,129385,127828,127839,127829,127789,129386,127790,127859,127857,127846,127849,127856,129473,127851,127852,127853,127868,127870,127863,127864,127866,127867,129346,127757,127758,127759,128506,129517,127956,127755,127957,127958,128642,128643,128644,128652,128656,128658,128657,128659,128661,127949,128690,128756,128761,128758,128755,128674,9992,128641,127771,9728,127776,9729,9925,9928,127780,127782,127784,127786,127785,127752,9748,9889,10052,9731,127754,127875,127876,129512,127880,127881,127882,127873,127942,9917,127936,127955,127918,127922,9824,9829,9830,9827,128083].forEach((function(t){var d=String.fromCodePoint(String(t).toString(16));c.push(l.a.createElement(R,{emojiCharacter:l.a.createElement("span",{className:"emojiCharacter",id:t,onClick:e.uglyHack},d),emojiCharacterCode:d,key:"tool_emoji-"+t,handleDeselectAllElements:i,handleDrawCanvasShow:a,registerDragHandler:n,handleDragMove:r,handleDragEnd:o,currentSelectedTool:s}))})),l.a.createElement(O,{type:this.subMenuType,subMenuItems:c,defaultTool:"emoji_\ud83d\ude00",noIconChange:!0})}}]),a}(n.Component);W.contextType=v;var Z=W,G=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"image",n.zoomLevel);var o=l.elements[r];o.styles.x=t*n.zoomLevel+n.offsetX-60*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-60*n.zoomLevel,o.styles.width=120*n.zoomLevel,o.styles.height=120*n.zoomLevel,o.styles.strokeOpacity=0,o.URL="/icons/insert_photo-noBorder-24px.svg",l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.dragStartHandler=null,l.dragMoveHandler=null,l.dragEndHandler=null,l.clickHandler=null,l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"image",r.zoomLevel);var i=o.elements[s];i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY,i.styles.width=n*r.zoomLevel,i.styles.height=l*r.zoomLevel,i.styles.strokeOpacity=0,i.URL="/icons/insert_photo-noBorder-24px.svg",o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"image",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),J=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleSlideClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"slide",n.zoomLevel);var o=l.elements[r];o.styles.x=t*n.zoomLevel+n.offsetX-180*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-240*n.zoomLevel,o.styles.width=480*n.zoomLevel,o.styles.height=360*n.zoomLevel,o.styles.strokeOpacity=0,o.styles.fill="#fdfcfa",o.slideName="Unnamed",l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.dragStartHandler=null,l.dragMoveHandler=null,l.dragEndHandler=null,l.clickHandler=null,l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleSlideDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"slide",r.zoomLevel);var i=o.elements[s];i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY,i.styles.width=n*r.zoomLevel,i.styles.height=l*r.zoomLevel,i.styles.strokeOpacity=0,i.styles.fill="#fdfcfa",i.slideName="Unnamed",o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"slide",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleSlideClick,handleDragStart:this.handleSlideDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),K=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleLinkClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"link",n.zoomLevel);var o=l.elements[r];o.shapeType=0,o.styles.x=t*n.zoomLevel+n.offsetX-120*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-60*n.zoomLevel,o.styles.width=240*n.zoomLevel,o.styles.height=120*n.zoomLevel,o.styles.strokeOpacity=0,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleLinkDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"link",r.zoomLevel);var i=o.elements[s];i.shapeType=0,i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY,i.styles.width=n*r.zoomLevel,i.styles.height=l*r.zoomLevel,i.styles.strokeOpacity=0,o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"link",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleLinkClick,handleDragStart:this.handleLinkDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),q=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){alert("Thanks for your click! We are still working on this feature - but now that we know you want it, we will get it done faster!")}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"pdf",handleToolSelect:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),Q=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){alert("Thanks for your click! We are still working on this feature - but now that we know you want it, we will get it done faster!")}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"iframe",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),$=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"youtube",n.zoomLevel);var o=l.elements[r];o.styles.x=t*n.zoomLevel+n.offsetX-120*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-60*n.zoomLevel,o.styles.width=240*n.zoomLevel,o.styles.height=120*n.zoomLevel,o.URL="https://www.youtube.com/embed/lxf05bSC17E",l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"youtube",r.zoomLevel);var i=o.elements[s];i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY,i.styles.width=n*r.zoomLevel,i.styles.height=l*r.zoomLevel,i.URL="https://www.youtube.com/embed/lxf05bSC17E",o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"youtube",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),ee=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){alert("Thanks for your click! We are still working on this feature - but now that we know you want it, we will get it done faster!")}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"timer",handleToolSelect:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),te=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleShapeClick",value:function(e,t,a){alert("Thanks for your click! We are still working on this feature - but now that we know you want it, we will get it done faster!")}},{key:"handleShapeDragStart",value:function(e,t,a,n,l){}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"poll",handleToolSelect:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),ae=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleSlideClick",value:function(e,t,a){var n=this.state,l={};l.elements=Object(h.a)({},n.elements);var r=C.a.generate();l.elements[r]=k(r,"dice",n.zoomLevel);var o=l.elements[r];o.styles.x=t*n.zoomLevel+n.offsetX-20*n.zoomLevel,o.styles.y=a*n.zoomLevel+n.offsetY-20*n.zoomLevel,o.styles.width=40*n.zoomLevel,o.styles.height=40*n.zoomLevel,o.styles.strokeOpacity=0,o.styles.fill="#666",o.fixedRatio="true";var s=Math.random(),i=Math.floor(6*s)+0;o.diceNumber=i,l.elementState=Object(h.a)({},n.elementState),l.elementState[r]={selected:n.userID},l.dragStartHandler=null,l.dragMoveHandler=null,l.dragEndHandler=null,l.clickHandler=null,l.tool="pan",l.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(l)}},{key:"handleSlideDragStart",value:function(e,t,a,n,l){var r=this.state,o={};o.elements=Object(h.a)({},r.elements);var s=C.a.generate();o.elements[s]=k(s,"dice",r.zoomLevel);var i=o.elements[s];i.styles.x=t*r.zoomLevel+r.offsetX,i.styles.y=a*r.zoomLevel+r.offsetY,i.styles.width=n*r.zoomLevel,i.styles.height=l*r.zoomLevel,i.styles.strokeOpacity=0,i.styles.fill="#666",i.fixedRatio="true";var c=Math.random(),d=Math.floor(6*c)+0;i.diceNumber=d,o.elementState=Object(h.a)({},r.elementState),o.elementState[s]={selected:r.userID},o.elementBeingDrawn=s,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.handleDrawCanvasShow,n=e.registerDragHandler,r=e.handleDragMove,o=e.handleDragEnd,s=e.autoActivate,i=e.currentSelectedTool;return l.a.createElement(S,{type:"dice",handleDeselectAllElements:t,currentSelectedTool:i,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleSlideClick,handleDragStart:this.handleSlideDragStart,handleDragMove:r,handleDragEnd:o,autoActivate:s})}}]),a}(n.Component),ne=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l.subMenuType="more",l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleDrawCanvasShow,a=e.registerDragHandler,n=e.handleDragMove,r=e.handleDragEnd,o=e.currentSelectedTool,s=e.handleDeselectAllElements,i=[l.a.createElement(J,{key:"tool_slide",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(K,{key:"tool_link",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(q,{key:"tool_pdf",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(Q,{key:"tool_iframe",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement($,{key:"tool_youtube",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(ee,{key:"tool_timer",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(te,{key:"tool_poll",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o}),l.a.createElement(ae,{key:"tool_dice",handleDeselectAllElements:s,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:r,currentSelectedTool:o})];return l.a.createElement(O,{type:this.subMenuType,subMenuItems:i,defaultTool:"slide",noIconChange:!0})}}]),a}(n.Component);ne.contextType=v;var le=ne,re=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleSetCurrentOpenSubMenu=function(e){l.props.handleDeselectAllElements(),l.setState({openSubMenu:e})},l.state={openSubMenu:null},l}return Object(i.a)(a,[{key:"handleElementDragMove",value:function(e){var t=this.state,a={};if(null!==t.elementBeingDrawn){var n=Object(h.a)({},t.elements),l=Object(h.a)({},n[t.elementBeingDrawn].styles);if(n[t.elementBeingDrawn].styles=l,n[t.elementBeingDrawn].fixedRatio){var r=e.movementX;e.movementY>r&&(r=e.movementY),n[t.elementBeingDrawn].styles.width+=r*t.zoomLevel,n[t.elementBeingDrawn].styles.height+=r*t.zoomLevel}else n[t.elementBeingDrawn].styles.width+=e.movementX*t.zoomLevel,n[t.elementBeingDrawn].styles.height+=e.movementY*t.zoomLevel;a.elements=n}this.setState(a)}},{key:"handleDragEnd",value:function(){var e={tool:"pan"};this.setState(e)}},{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.registerDragHandler,n=e.handleShowSelectionArea,r=e.handleUpdateSelectionArea,o=e.handleDrawCanvasShow,s=e.handleSelectElementsWithinArea,i=e.currentSelectedTool;return l.a.createElement("div",{className:"toolbar_container"},l.a.createElement("div",{className:"toolbar"},l.a.createElement(E,{handleDeselectAllElements:t,handleDrawCanvasShow:o,registerDragHandler:a,handleShowSelectionArea:n,handleUpdateSelectionArea:r,handleSelectElementsWithinArea:s,currentSelectedTool:i,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),l.a.createElement(L,{handleDeselectAllElements:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:i,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),l.a.createElement(H,{handleDeselectAllElements:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:i,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),l.a.createElement(B,{handleDeselectAllElements:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:i,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),l.a.createElement(Y,{handleDeselectAllElements:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:i,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),l.a.createElement(Z,{handleDeselectAllElements:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:i,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),l.a.createElement(G,{handleDeselectAllElements:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:i}),l.a.createElement(le,{handleDeselectAllElements:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:i,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu})))}},{key:"componentDidUpdate",value:function(e,t){"pan"===this.props.currentSelectedTool&&null!==this.state.openSubMenu&&t.openSubMenu===this.state.openSubMenu&&this.setState({openSubMenu:null})}}]),a}(n.Component),oe=(a(17),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={selectAreaPosition:{x:0,y:0,width:0,height:0}},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleDeselectAllElements,a=e.registerDragHandler,n=e.handleSelectElementsWithinArea,r=e.currentSelectedTool;return l.a.createElement("div",{className:"tools"},l.a.createElement(re,{handleDeselectAllElements:t,registerDragHandler:a,handleDrawCanvasShow:this.handleDrawCanvasShow,handleShowSelectionArea:this.handleShowSelectionArea,handleUpdateSelectionArea:this.handleUpdateSelectionArea,handleSelectElementsWithinArea:n,currentSelectedTool:r}))}}]),a}(n.PureComponent)),se=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleDrawCanvasHide=function(e){l.props.removeDragHandler("drawCanvas"),l.context.dispatch({type:"resetToolbar"}),l.setState(Object.assign({},{selectAreaVisible:!1,selectAreaPosition:{x:0,y:0,width:0,height:0}},{drawCanvasVisible:!1}))},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.context.state,t=e.selectAreaVisible,a=e.selectAreaPosition,n={display:"none"};t&&(n.display="block",n.transform="translate3d(".concat(a.x,"px,").concat(a.y,"px, 0)"),n.width="".concat(a.width,"px"),n.height="".concat(a.height,"px"));var r={display:"none"};return this.context.state.tool&&"pan"!==this.context.state.tool&&(r.display="block"),l.a.createElement("div",{id:"drawCanvas",style:r,onPointerUp:this.handleDrawCanvasHide},l.a.createElement("div",{className:"selectionArea",style:n}))}}]),a}(n.PureComponent);se.contextType=v;var ie=se,ce=(a(38),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"zoomLevel"},"Scale : ",this.props.zoomLevel,"%")}}]),a}(n.Component)),de=(a(39),{text:{isExpandToFit:!0,isAutoResize:!1},shape:{isExpandToFit:!1,isAutoResize:!1},postit:{isExpandToFit:!1,isAutoResize:!0}}),he=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleLostFocus=function(e){l.props.handleUpdatedText({id:l.props.data.id,newText:(l.textInput.innerText||l.textInput.textContent).trim(),fontSize:l.state.fontSize*l.props.gridSpace.zoomLevel})},l.sizeChecker=function(){var e=de[l.props.data.type],t=e.isAutoResize,a=e.isExpandToFit,n=l.textContainer.scrollHeight>l.textContainer.clientHeight,r=l.textInput.clientHeight<l.textContainer.clientHeight;if(t&&n){var o=l.state.fontSize/3*2;l.setState({fontSize:o})}else if(t&&r&&l.state.fontSize<24){if(l.textInput.clientHeight/(1/3*2*100)*100<l.textContainer.clientHeight){var s=l.state.fontSize/(1/3*2*100)*100;l.setState({fontSize:s})}}else a&&l.textContainer.scrollHeight>l.textContainer.clientHeight&&l.state.elementHeight!==l.textContainer.scrollHeight&&(l.props.handleSetElementHeight(l.props.data.id,l.textContainer.scrollHeight),l.setState({elementHeight:l.textContainer.scrollHeight}))},l.handlePaste=function(e){e.preventDefault(),document.execCommand("inserttext",!1,e.clipboardData.getData("text/plain"))},l.handleGotFocus=function(e){l.setState({fontSize:l.props.data.fontStyle.fontSize/l.props.gridSpace.zoomLevel})},l.state={fontSize:24,elementHeight:0},l.sizeCheckerInterval=null,l}return Object(i.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){var a=e.data,n=t.fontSize,l=t.elementHeight,r=a!==this.props.data,o=n!==this.state.fontSize,s=l!==this.state.elementHeight;return!!(r||o||s)}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.gridSpace,r={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",visibility:"hidden",borderTop:"1px solid blue"},o={fontSize:this.state.fontSize},s="",i="blank";if(a&&a.id&&a.styles){var c=a.styles,d=(c.x||c.cx)/n.zoomLevel-n.offsetX/n.zoomLevel,h=(c.y||c.cy)/n.zoomLevel-n.offsetY/n.zoomLevel,u=c.width/n.zoomLevel,m=this.state.elementHeight;r.top="".concat(h,"px"),r.left="".concat(d,"px"),r.height="".concat(m,"px"),r.width="".concat(u,"px"),r.visibility="visible",r.overflow="scroll",a.text.length>0&&(s=a.text.split(/\n|\r/).map((function(e,t){return l.a.createElement("div",{key:"editor_".concat(a.id,"_").concat(e,"_").concat(t)},e)}))),a.fontStyle.textAlign&&(o.textAlign=a.fontStyle.textAlign,"left"===a.fontStyle.textAlign?r.justifyContent="flex-start":"right"===a.fontStyle.textAlign&&(r.justifyContent="flex-end")),a.fontStyle.alignItems&&(o.alignItems="center","top"===a.fontStyle.alignItems?r.alignItems="flex-start":"bottom"===a.fontStyle.alignItems&&(r.alignItems="flex-end")),a.fontStyle.color&&(o.color=a.fontStyle.color),i=this.props.data.id}return l.a.createElement("div",{style:r,ref:function(t){e.textContainer=t}},l.a.createElement("div",{key:"textEditor_".concat(i),contentEditable:!0,ref:function(t){e.textInput=t},className:"textContainer",onBlur:this.handleLostFocus,onFocus:this.handleGotFocus,onPaste:this.handlePaste,suppressContentEditableWarning:!0,style:o},s))}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.props.data&&this.props.data.id?(setTimeout((function(){if(a.textInput.focus(),!!a.props.data&&a.props.data.text.length>0&&document.createRange){var e=document.createRange();e.selectNodeContents(a.textInput),e.collapse(!1);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}}),100),e.data&&this.props.data.id===e.data.id||(this.setState({fontSize:this.props.data.fontStyle.fontSize/this.props.gridSpace.zoomLevel,elementHeight:this.props.data.styles.height/this.props.gridSpace.zoomLevel}),this.sizeCheckerInterval=setInterval(this.sizeChecker,100))):clearInterval(this.sizeCheckerInterval)}}]),a}(n.Component),ue={light:{preDefinedColors:["#ffffff","#000000","#999","#F28D95","#7EBFD9","#BBF244","#F2C744","#F29C50"],primaryColors:["#ffffff","#000000","#999"],fontColors:["#ffffff","#999","#080808"]},dark:{}},me=l.a.createContext(ue.light),pe=(a(40),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).handleSelectColor=function(){e.props.handleUpdateElementProperty({update:{predefinedColor:e.props.colorID}})},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"availableColor",style:{backgroundColor:this.props.color},onClick:this.handleSelectColor})}}]),a}(n.Component)),ve=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleOpenSubMenu=function(){l.setState({subMenuOpen:!l.state.subMenuOpen}),l.props.handleSetCurrentOpenSubMenu("PredefinedColorPicker")},l.state={subMenuOpen:!1},l}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"PredefinedColorPicker"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.context,a={backgroundColor:t.preDefinedColors[this.props.fillColor]},n="predefinedColorPicker_submenu";return this.state.subMenuOpen&&(n+=" isVisible"),l.a.createElement("div",{className:"predefinedColorPicker"},l.a.createElement("div",{className:"selectedColor",style:a,onClick:this.handleOpenSubMenu,title:"Change color"}),l.a.createElement("div",{className:n,onClick:this.handleOpenSubMenu},l.a.createElement("div",{className:"arrow"}),t.preDefinedColors.map((function(t,a){return l.a.createElement(pe,{key:"preDefinedColorOption_"+t,color:t,colorID:a,handleUpdateElementProperty:e.props.handleUpdateElementProperty})}))))}}]),a}(n.Component);ve.contextType=me;var fe=ve,ge=(a(41),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).handleSelectColor=function(){e.props.handleUpdateColor(e.props.color)},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"availableColor",style:{backgroundColor:this.props.color},onClick:this.handleSelectColor})}}]),a}(n.Component)),ye=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).handleSelectColor=function(){e.props.handleOpacityChange({target:{value:0}})},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"availableColor",style:{backgroundColor:"#fff",border:"1px solid #999"},onClick:this.handleSelectColor},l.a.createElement("div",{className:"transparentLine"}))}}]),a}(n.Component),Se=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleOpenSubMenu=function(){l.setState({subMenuOpen:!l.state.subMenuOpen}),l.props.handleSetCurrentOpenSubMenu("CustomColorPicker")},l.handleUpdateColor=function(e){var t=l.props.currentStyles[0].styles.fillOpacity;0===t&&(t=1),l.props.handleUpdateElementProperty({update:{styles:{fill:e,fillOpacity:t}}})},l.handleOpacityChange=function(e){l.props.handleUpdateElementProperty({update:{styles:{fillOpacity:e.target.value}}})},l.state={subMenuOpen:!1},l}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"CustomColorPicker"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.context,a="predefinedColorPicker_submenu";this.state.subMenuOpen&&(a+=" isVisible");var n=this.props.currentStyles[0].styles.fillOpacity,r={backgroundColor:this.props.currentStyles[0].styles.fill};return l.a.createElement("div",{className:"predefinedColorPicker"},l.a.createElement("div",{className:"selectedColor",style:r,onClick:this.handleOpenSubMenu,title:"Change color"}),l.a.createElement("div",{className:a},l.a.createElement("div",{className:"arrow"}),l.a.createElement(ye,{key:"customColorOption_transparent",handleOpacityChange:this.handleOpacityChange}),t.preDefinedColors.map((function(t,a){return l.a.createElement(ge,{key:"preDefinedColorOption_"+t,color:t,colorID:a,handleUpdateColor:e.handleUpdateColor})})),l.a.createElement("div",{className:"opacityPicker"},l.a.createElement("div",{className:"opacityLabel"},"Opacity:"),l.a.createElement("input",{type:"number",id:"opacity",name:"opacity",min:"0",max:"1",step:"0.1",onChange:this.handleOpacityChange,value:n||0}))))}}]),a}(n.Component);Se.contextType=me;var be=Se,Ee=(a(42),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).handleSelectColor=function(){e.props.handleUpdateColor(e.props.color)},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"availableColor",style:{backgroundColor:this.props.color},onClick:this.handleSelectColor})}}]),a}(n.Component)),we=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).handleSelectColor=function(){e.props.handleOpacityChange({target:{value:0}})},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"availableColor",style:{backgroundColor:"#fff",border:"1px solid #999"},onClick:this.handleSelectColor},l.a.createElement("div",{className:"transparentLine"}))}}]),a}(n.Component),Oe=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleOpenSubMenu=function(){l.setState({subMenuOpen:!l.state.subMenuOpen}),l.props.handleSetCurrentOpenSubMenu("CustomBorderColorPicker")},l.handleUpdateColor=function(e){var t=l.props.currentStyles.strokeOpacity;0===t&&(t=1),l.props.handleUpdateElementProperty({update:{styles:{stroke:e,strokeOpacity:t}}})},l.handleOpacityChange=function(e){l.props.handleUpdateElementProperty({update:{styles:{strokeOpacity:e.target.value}}})},l.state={subMenuOpen:!1},l}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"CustomBorderColorPicker"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.context,a={borderColor:this.props.currentStyles.stroke},n="predefinedColorPicker_submenu";return this.state.subMenuOpen&&(n+=" isVisible"),l.a.createElement("div",{className:"predefinedColorPicker"},l.a.createElement("div",{className:"selectedBorderColor",style:a,onClick:this.handleOpenSubMenu,title:"Change border color"}),l.a.createElement("div",{className:n},l.a.createElement("div",{className:"arrow"}),l.a.createElement(we,{key:"customColorOption_transparent",handleOpacityChange:this.handleOpacityChange}),t.primaryColors.map((function(t,a){return l.a.createElement(Ee,{key:"preDefinedColorOption_"+t,color:t,colorID:a,handleUpdateColor:e.handleUpdateColor})})),l.a.createElement("div",{className:"opacityPicker"},l.a.createElement("div",{className:"opacityLabel"},"Opacity:"),l.a.createElement("input",{type:"number",id:"opacity",name:"opacity",min:"0",max:"1",step:"0.1",onChange:this.handleOpacityChange,value:this.props.currentStyles.strokeOpacity||0}))))}}]),a}(n.Component);Oe.contextType=me;var De=Oe,Ce=(a(43),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleOpenSubMenu=function(){l.setState({subMenuOpen:!l.state.subMenuOpen}),l.props.handleSetCurrentOpenSubMenu("BorderStyle")},l.handleSolidChange=function(){l.props.handleUpdateElementProperty({update:{styles:{strokeDasharray:"0"}}})},l.handleDashedChange=function(){var e=4*l.props.initialZoomLevel+" "+2*l.props.initialZoomLevel;l.props.handleUpdateElementProperty({update:{styles:{strokeDasharray:e}}})},l.handleDottedChange=function(){var e=String(2*l.props.initialZoomLevel);l.props.handleUpdateElementProperty({update:{styles:{strokeDasharray:e}}})},l.handleWidthChange=function(e){l.props.handleUpdateElementProperty({update:{styles:{strokeWidth:e.target.value*l.props.initialZoomLevel}}})},l.state={subMenuOpen:!1},l}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"BorderStyle"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e="predefinedColorPicker_submenu";this.state.subMenuOpen&&(e+=" isVisible");var t="0"===this.props.currentStyles.strokeDasharray?"selected":null,a=this.props.currentStyles.strokeDasharray===4*this.props.initialZoomLevel+" "+2*this.props.initialZoomLevel?"selected":null,n=this.props.currentStyles.strokeDasharray===String(2*this.props.initialZoomLevel)?"selected":null,r=Math.ceil(this.props.currentStyles.strokeWidth/this.props.initialZoomLevel);return l.a.createElement("div",{className:"fontStyle"},l.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Change border styles"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),l.a.createElement("path",{fill:"#333",d:"M3 16h5v-2H3v2zm6.5 0h5v-2h-5v2zm6.5 0h5v-2h-5v2zM3 20h2v-2H3v2zm4 0h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM3 12h8v-2H3v2zm10 0h8v-2h-8v2zM3 4v4h18V4H3z"}))),l.a.createElement("div",{className:e},l.a.createElement("div",{className:"arrow"}),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(t),onClick:this.handleSolidChange},l.a.createElement("svg",{viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{fill:"#333",d:"m3,10l0,4l18,0l0,-4l-18,0z"}))),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(a),onClick:this.handleDashedChange},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"m3,13l5,0l0,-2l-5,0l0,2zm6.5,0l5,0l0,-2l-5,0l0,2zm6.5,0l5,0l0,-2l-5,0l0,2z"}))),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(n),onClick:this.handleDottedChange},l.a.createElement("svg",{viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{fill:"#333",d:"m3,13l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2z"}))),l.a.createElement("div",{className:"opacityPicker"},l.a.createElement("div",{className:"opacityLabel"},"Width:"),l.a.createElement("input",{type:"number",id:"opacity",name:"opacity",min:"1",max:"10",step:"1",onChange:this.handleWidthChange,value:r}))))}}]),a}(n.Component)),ke=(a(44),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleOpenSubMenu=function(){l.setState({subMenuOpen:!l.state.subMenuOpen}),l.props.handleSetCurrentOpenSubMenu("TextFormat")},l.handleBoldChange=function(){var e="normal";"normal"===l.props.fontStyle.fontWeight&&(e="bold"),l.props.handleUpdateElementProperty({update:{fontStyle:{fontWeight:e}}})},l.handleItalicChange=function(){var e="normal";"normal"===l.props.fontStyle.fontStyle&&(e="italic"),l.props.handleUpdateElementProperty({update:{fontStyle:{fontStyle:e}}})},l.handleUnderlineChange=function(){var e=l.props.fontStyle.textDecorationLine;e=-1===l.props.fontStyle.textDecorationLine.indexOf("underline")?"underline "+e:e.replace("underline",""),l.props.handleUpdateElementProperty({update:{fontStyle:{textDecorationLine:e}}})},l.handleStrikeThroughChange=function(){var e=l.props.fontStyle.textDecorationLine;-1===l.props.fontStyle.textDecorationLine.indexOf("line-through")?e+=" line-through":e=e.replace("line-through",""),l.props.handleUpdateElementProperty({update:{fontStyle:{textDecorationLine:e}}})},l.state={subMenuOpen:!1},l}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"TextFormat"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e="predefinedColorPicker_submenu";this.state.subMenuOpen&&(e+=" isVisible");var t="bold"===this.props.fontStyle.fontWeight?"selected":null,a="italic"===this.props.fontStyle.fontStyle?"selected":null,n=-1!==this.props.fontStyle.textDecorationLine.indexOf("underline")?"selected":null,r=-1!==this.props.fontStyle.textDecorationLine.indexOf("line-through")?"selected":null;return l.a.createElement("div",{className:"fontStyle"},l.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Change text format"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z"}))),l.a.createElement("div",{className:e},l.a.createElement("div",{className:"arrow"}),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(t),onClick:this.handleBoldChange},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}))),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(a),onClick:this.handleItalicChange},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"}))),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(n),onClick:this.handleUnderlineChange},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}))),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(r),onClick:this.handleStrikeThroughChange},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"})))))}}]),a}(n.Component)),je=(a(45),["Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Baskerville","Courier New","Georgia","Lucida Bright","Lucida Sans Typewriter","Palatino","Tahoma","Times New Roman","Trebuchet MS","Verdana"]),xe=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).handleSelectColor=function(){e.props.handleUpdateColor(e.props.color)},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"availableColor",style:{backgroundColor:this.props.color},onClick:this.handleSelectColor})}}]),a}(n.Component),ze=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleOpenSubMenu=function(){l.setState({subMenuOpen:!l.state.subMenuOpen}),l.props.handleSetCurrentOpenSubMenu("FontStyle")},l.handleUpdateColor=function(e){l.props.handleUpdateElementProperty({update:{fontStyle:{color:e}}})},l.handleFontChange=function(e){l.props.fontStyle.fontFamily!==e.target.value&&l.props.handleUpdateElementProperty({update:{fontStyle:{fontFamily:e.target.value}}})},l.handleSizeChange=function(e){l.props.handleUpdateElementProperty({update:{fontStyle:{fontSize:e.target.value*l.props.initialZoomLevel}}})},l.state={subMenuOpen:!1},l}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"FontStyle"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.context,a="predefinedColorPicker_submenu";return this.state.subMenuOpen&&(a+=" isVisible"),l.a.createElement("div",{className:"fontStyle"},l.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Change font styles"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"M9 4v3h5v12h3V7h5V4H9zm-6 8h3v7h3v-7h3V9H3v3z"}))),l.a.createElement("div",{className:a},l.a.createElement("div",{className:"arrow"}),t.fontColors.map((function(t,a){return l.a.createElement(xe,{key:"fontColorOption_"+t,color:t,colorID:a,handleUpdateColor:e.handleUpdateColor})})),l.a.createElement("div",{className:"fontFamily"},l.a.createElement("select",{value:this.props.fontStyle.fontFamily,onChange:this.handleFontChange},je.map((function(e){return l.a.createElement("option",{key:"fontSelector_".concat(e)},e)})))),l.a.createElement("div",{className:"picker"},l.a.createElement("div",{className:"picker_label"},"size:"),l.a.createElement("input",{type:"number",id:"fontSize",name:"fontSize",step:"2",max:"104",min:"0",onChange:this.handleSizeChange,value:Math.round(this.props.fontStyle.fontSize/this.props.initialZoomLevel)}))))}}]),a}(n.Component);ze.contextType=me;var Me=ze;a(46);function Le(e){return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:e.iconColor,d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}))}function Ne(e){return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:e.iconColor,d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}))}function _e(e){return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:e.iconColor,d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}))}function Te(e){return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:e.iconColor,d:"M8 11h3v10h2V11h3l-4-4-4 4zM4 3v2h16V3H4z"}))}function Ae(e){return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:e.iconColor,d:"M8 19h3v4h2v-4h3l-4-4-4 4zm8-14h-3V1h-2v4H8l4 4 4-4zM4 11v2h16v-2H4z"}))}function He(e){return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:e.iconColor,d:"M16 13h-3V3h-2v10H8l4 4 4-4zM4 19v2h16v-2H4z"}))}var Be=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleOpenSubMenu=function(){l.setState({subMenuOpen:!l.state.subMenuOpen}),l.props.handleSetCurrentOpenSubMenu("TextAlignment")},l.handleLeftChange=function(){l.props.handleUpdateElementProperty({update:{fontStyle:{textAlign:"left"}}})},l.handleRightChange=function(){l.props.handleUpdateElementProperty({update:{fontStyle:{textAlign:"right"}}})},l.handleCenterChange=function(){l.props.handleUpdateElementProperty({update:{fontStyle:{textAlign:"center"}}})},l.handleAlignTop=function(){l.props.handleUpdateElementProperty({update:{fontStyle:{alignItems:"top"}}})},l.handleAlignCenter=function(){l.props.handleUpdateElementProperty({update:{fontStyle:{alignItems:"center"}}})},l.handleAlignBottom=function(){l.props.handleUpdateElementProperty({update:{fontStyle:{alignItems:"bottom"}}})},l.state={subMenuOpen:!1},l}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"TextAlignment"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e="predefinedColorPicker_submenu";this.state.subMenuOpen&&(e+=" isVisible");var t="left"===this.props.fontStyle.textAlign?"selected":null,a="center"===this.props.fontStyle.textAlign?"selected":null,n="right"===this.props.fontStyle.textAlign?"selected":null,r="top"===this.props.fontStyle.alignItems?"selected":null,o="center"===this.props.fontStyle.alignItems?"selected":null,s="bottom"===this.props.fontStyle.alignItems?"selected":null,i=l.a.createElement(Le,{iconColor:"#333"});return t?i=l.a.createElement(Ne,{iconColor:"#333"}):n&&(i=l.a.createElement(_e,{iconColor:"#333"})),l.a.createElement("div",{className:"editor_option"},l.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Change text alignment"},i),l.a.createElement("div",{className:e,onClick:this.handleOpenSubMenu},l.a.createElement("div",{className:"arrow"}),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(t),onClick:this.handleLeftChange},l.a.createElement(Ne,{iconColor:"#333"})),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(a),onClick:this.handleCenterChange},l.a.createElement(Le,{iconColor:"#333"})),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(n),onClick:this.handleRightChange},l.a.createElement(_e,{iconColor:"#333"})),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(r),onClick:this.handleAlignTop},l.a.createElement(Te,{iconColor:"#333"})),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(o),onClick:this.handleAlignCenter},l.a.createElement(Ae,{iconColor:"#333"})),l.a.createElement("div",{className:"editor_subMenu_icon ".concat(s),onClick:this.handleAlignBottom},l.a.createElement(He,{iconColor:"#333"}))))}}]),a}(n.Component),Pe=(a(47),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleOpenSubMenu=function(){l.setState({subMenuOpen:!l.state.subMenuOpen}),l.props.handleSetCurrentOpenSubMenu("LINK")},l.handleLinkChange=function(e){l.props.handleUpdateElementProperty({update:{link:e.target.value}})},l.state={subMenuOpen:!1},l}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"LINK"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e="predefinedColorPicker_submenu";return this.state.subMenuOpen&&(e+=" isVisible"),l.a.createElement("div",{className:"editor_option"},l.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Add link to this element"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}))),l.a.createElement("div",{className:e},l.a.createElement("div",{className:"arrow"}),l.a.createElement("div",{className:"urlLocation"},l.a.createElement("div",{className:"urlLocation_label"},"link:"),l.a.createElement("input",{name:"link",onChange:this.handleLinkChange,value:this.props.link,list:"frameNames"}),l.a.createElement("datalist",{id:"frameNames"},this.props.getSlides().map((function(e,t){return l.a.createElement("option",{value:"element://".concat(e.id),key:"linkOption_".concat(e.id)},"Slide ",t+1)}))))))}}]),a}(n.Component)),Ue=(a(48),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleBringForward=function(){l.props.handleShiftElementPosition("forward",l.props.ids)},l.handleSendBackward=function(){l.props.handleShiftElementPosition("backward",l.props.ids)},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e="forward"===this.props.type;return l.a.createElement("div",{className:"editor_option"},e?l.a.createElement("div",{className:"editor_icon",title:"Bring to front",onClick:this.handleBringForward},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.a.createElement("path",{fill:"#333",d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm12 12h2v-2h-2v2zm6-18H7v14h14V3zm-2 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2zm-4 0h2v-2H3v2z"}))):l.a.createElement("div",{className:"editor_icon",title:"Send to back",onClick:this.handleSendBackward},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.a.createElement("path",{d:"M9 7H7v2h2V7zm0 4H7v2h2v-2zm4 4h-2v2h2v-2zm0-12h-2v2h2V3zM9 3H7v2h2V3zm12 0h-2v2h2V3zm0 12h-2v2h2v-2zM9 15H7v2h2v-2zm10-2h2v-2h-2v2zm0-4h2V7h-2v2zM5 7H3v14h14v-2H5V7zm10-2h2V3h-2v2zm0 12h2v-2h-2v2z"}))))}}]),a}(n.Component)),Ie=(a(49),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleToggleLock=function(){l.props.handleUpdateElementProperty({update:{locked:!l.props.isLocked}})},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.isLocked;return l.a.createElement("div",{className:"editor_option"},l.a.createElement("div",{className:"editor_icon",onClick:this.handleToggleLock,title:"Lock this element from changes"},e?l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("g",{fill:"none"},l.a.createElement("path",{d:"M0 0h24v24H0V0z"}),l.a.createElement("path",{d:"M0 0h24v24H0V0z",opacity:".87"})),l.a.createElement("path",{fill:"#333",d:"M20 8h-3V6.21c0-2.61-1.91-4.94-4.51-5.19C9.51.74 7 3.08 7 6v2H4v14h16V8zm-8 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"})):l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.a.createElement("path",{fill:"#333",d:"M20 8h-3V6.21c0-2.61-1.91-4.94-4.51-5.19C9.51.74 7 3.08 7 6h2c0-1.13.6-2.24 1.64-2.7C12.85 2.31 15 3.9 15 6v2H4v14h16V8zm-2 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}))))}}]),a}(n.Component)),Fe=(a(50),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"editor_option"},l.a.createElement("div",{className:"editor_icon",title:"Delete this element",onClick:this.props.handleDeleteElements},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.a.createElement("path",{fill:"#333",d:"M6 21h12V7H6v14zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}))))}}]),a}(n.Component)),Ve=(a(51),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"editor_option"},l.a.createElement("div",{className:"editor_icon",title:"More options"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.a.createElement("path",{fill:"#333",d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))))}}]),a}(n.Component)),Xe=(a(52),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleOpenSubMenu=function(){l.setState({subMenuOpen:!l.state.subMenuOpen}),l.props.handleSetCurrentOpenSubMenu("URL")},l.handleURLChange=function(e){l.props.handleUpdateElementProperty({update:{URL:e.target.value}})},l.state={subMenuOpen:!1},l}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"URL"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e="predefinedColorPicker_submenu";return this.state.subMenuOpen&&(e+=" isVisible"),l.a.createElement("div",{className:"fontStyle"},l.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Change image URL"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5v2zm2.5-.5h1.5V15H10v-4.5h1.5V9H7v1.5zm5.5 0H14V15h1.5v-4.5H17V9h-4.5v1.5zM23 9h-5v6h1.5v-2H23V9zm-1.5 2.5h-2v-1h2v1z"}))),l.a.createElement("div",{className:e},l.a.createElement("div",{className:"arrow"}),l.a.createElement("div",{className:"urlLocation"},l.a.createElement("div",{className:"urlLocation_label"},"URL:"),l.a.createElement("input",{name:"imgURL",onChange:this.handleURLChange,value:this.props.URL}))))}}]),a}(n.Component)),Ye=(a(53),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).handleToggleLock=function(){e.props.handleUpdateElementProperty({update:{hidden:!e.props.isHidden}})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.isHidden;return l.a.createElement("div",{className:"editor_option"},l.a.createElement("div",{className:"editor_icon",onClick:this.handleToggleLock,title:"Make this element not visible"},e?l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"M12 6.5c2.76 0 5 2.24 5 5 0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24zM3.42 2.45L2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l3.43 3.43 1.41-1.41L3.42 2.45zM12 16.5c-2.76 0-5-2.24-5-5 0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57 0 1.66 1.34 3 3 3 .2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5zm2.97-5.33c-.15-1.4-1.25-2.49-2.64-2.64l2.64 2.64z"})):l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:"#333",d:"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}))))}}]),a}(n.Component)),Re=(a(54),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).areElementsAlreadyGrouped=function(){var t=e.props.elements,a=!0;if(t[0].groups.length){var n=t[0].groups[t[0].groups.length-1];t.forEach((function(e){e.groups.length?e.groups[e.groups.length-1]!==n&&(a=!1):a=!1}))}else a=!1;return a},e.handleToggleGroup=function(){if(e.areElementsAlreadyGrouped()){var t=e.props.elements,a=t[0].groups[t[0].groups.length-1];e.props.handleUpdateElementProperty({remove:{groups:[a]}})}else e.props.handleUpdateElementProperty({update:{groups:[C.a.generate()]}})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.areElementsAlreadyGrouped();return l.a.createElement("div",{className:"editor_option"},l.a.createElement("div",{className:"editor_icon",onClick:this.handleToggleGroup,title:e?"Ungroup these elements":"Group these elements"},e?l.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("rect",{fill:"none",height:"9.25",stroke:"#333",width:"9",x:"5.25",y:"9.47656"}),l.a.createElement("rect",{fill:"none",height:"9.25",stroke:"#333",width:"9",x:"11",y:"3.72656"})):l.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"m23,7l0,-6l-6,0l0,2l-10,0l0,-2l-6,0l0,6l2,0l0,10l-2,0l0,6l6,0l0,-2l10,0l0,2l6,0l0,-6l-2,0l0,-10l2,0zm-20,-4l2,0l0,2l-2,0l0,-2zm2,18l-2,0l0,-2l2,0l0,2zm12,-2l-10,0l0,-2l-2,0l0,-10l2,0l0,-2l10,0l0,2l2,0l0,10l-2,0l0,2zm4,2l-2,0l0,-2l2,0l0,2zm-2,-16l0,-2l2,0l0,2l-2,0z",fill:"#333"}),l.a.createElement("rect",{fill:"none",height:"5.5",id:"svg_2",stroke:"#333",width:"5.5",x:"8",y:"10.22656"}),l.a.createElement("rect",{fill:"none",height:"5.5",id:"svg_3",stroke:"#333",width:"5.5",x:"11.25",y:"7.72656"}))))}}]),a}(n.Component)),We=(a(55),{postit:["predefinedColor","textFormat","bringForward","sendBackward","visibility","lock","delete","menu"],shape:["customColor","customBorderColor","borderStyle","fontStyle","textFormat","textAlignment","bringForward","sendBackward","visibility","lock","delete","menu"],text:["fontStyle","textFormat","textAlignment","bringForward","sendBackward","visibility","lock","delete","menu"],line:["customBorderColor","borderStyle","bringForward","sendBackward","lock","delete","menu"],image:["url","customBorderColor","borderStyle","bringForward","sendBackward","visibility","lock","delete","menu"],slide:["customColor","bringForward","sendBackward","lock","delete","menu"],link:["link","visibility","lock","delete","menu"],youtube:["url","lock","delete","menu"],emoji:["visibility","lock","delete","menu"]}),Ze=["bringForward","sendBackward","lock","group","delete","menu"],Ge=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleUpdateElementProperty=function(e){e.id=l.props.selectedElements.map((function(e){return e.id})),l.props.handleUpdateElementProperty(e)},l.handleSetCurrentOpenSubMenu=function(e){l.setState({currentOpenSubMenu:e})},l.handleKeyPress=function(e){var t=null!==l.props.textEditor||"INPUT"===e.target.tagName||"true"===e.target.getAttribute("contentEditable");"Backspace"!==e.key||t?(!0===e.ctrlKey&&"d"===e.key||!0===e.metaKey&&"d"===e.key)&&(e.preventDefault(),l.handleDuplicateElements()):(e.preventDefault(),l.handleDeleteElements())},l.state={currentOpenSubMenu:null},l}return Object(i.a)(a,[{key:"shouldComponentUpdate",value:function(e){return!!(this.props.selectedElements.length!==e.selectedElements.length||e.selectedElements.length>0)}},{key:"render",value:function(){var e=this,t={},a=this.props,n=a.selectedElements,r=a.boundingBox,o=a.getSlides,s="elementEditor",i=null,c=null,d=n.map((function(e){return e.id}));if(1===n.length)i=We[n[0].type];else if(n.length>1){i=[].concat(Ze);var h=!0;n.forEach((function(e){"shape"!==e.type&&(h=!1)})),h&&i.unshift("customColor")}if(i){s+=" isVisible";var u=40*(c=i.map((function(t){switch(t){case"predefinedColor":return l.a.createElement(fe,{key:"".concat(n[0].id,"_").concat(t),fillColor:n[0].predefinedColor,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"customColor":return l.a.createElement(be,{key:"".concat(n[0].id,"_").concat(t),currentStyles:n,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"customBorderColor":return l.a.createElement(De,{key:"".concat(n[0].id,"_").concat(t),currentStyles:n[0].styles,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"borderStyle":return l.a.createElement(Ce,{key:"".concat(n[0].id,"_").concat(t),currentStyles:n[0].styles,initialZoomLevel:n[0].initialZoomLevel,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"textFormat":return l.a.createElement(ke,{key:"".concat(n[0].id,"_").concat(t),fontStyle:n[0].fontStyle,initialZoomLevel:n[0].initialZoomLevel,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"fontStyle":return l.a.createElement(Me,{key:"".concat(n[0].id,"_").concat(t),fontStyle:n[0].fontStyle,initialZoomLevel:n[0].initialZoomLevel,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"textAlignment":return l.a.createElement(Be,{key:"".concat(n[0].id,"_").concat(t),fontStyle:n[0].fontStyle,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"link":return l.a.createElement(Pe,{key:"".concat(n[0].id,"_").concat(t),link:n[0].link,getSlides:o,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"bringForward":return l.a.createElement(Ue,{type:"forward",key:"".concat(n[0].id,"_").concat(t),handleShiftElementPosition:e.props.handleShiftElementPosition,ids:d});case"sendBackward":return l.a.createElement(Ue,{type:"backward",key:"".concat(n[0].id,"_").concat(t),handleShiftElementPosition:e.props.handleShiftElementPosition,ids:d});case"group":return l.a.createElement(Re,{key:"".concat(n[0].id,"_").concat(t),elements:n,handleUpdateElementProperty:e.handleUpdateElementProperty});case"visibility":return l.a.createElement(Ye,{key:"".concat(n[0].id,"_").concat(t),isHidden:n[0].hidden,handleUpdateElementProperty:e.handleUpdateElementProperty});case"lock":return l.a.createElement(Ie,{key:"".concat(n[0].id,"_").concat(t),isLocked:n[0].locked,handleUpdateElementProperty:e.handleUpdateElementProperty});case"delete":return l.a.createElement(Fe,{key:"".concat(n[0].id,"_").concat(t),handleDeleteElements:e.props.handleDeleteElements});case"url":return l.a.createElement(Xe,{key:"".concat(n[0].id,"_").concat(t),URL:n[0].URL,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"menu":return l.a.createElement(Ve,{options:We[n[0].type],key:"".concat(n[0].id,"_").concat(t)});default:return null}}))).length/2,m=r.width/2,p=r.x+m-u,v=r.y-96;t.left="".concat(p,"px"),t.top="".concat(v,"px")}return l.a.createElement("div",{className:s,style:t},c)}}]),a}(n.Component),Je=(a(56),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).hideGuides=function(){l.setState({leftGuideVisible:!1,rightGuideVisible:!1,topGuideVisible:!1,bottomGuideVisible:!1})},l.state={leftGuideVisible:!1,rightGuideVisible:!1,topGuideVisible:!1,bottomGuideVisible:!1},l.hideGuidesTimeout=null,l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.boundingBox,t=this.state,a=t.leftGuideVisible,n=t.rightGuideVisible,r=t.topGuideVisible,o=t.bottomGuideVisible,s={height:"100vh",width:"1px",transform:"translate3d(".concat(e.x,"px, 0px, 0)")},i={height:"100vh",width:"1px",transform:"translate3d(".concat(e.x+e.width,"px, 0px, 0)")},c={height:"1px",width:"100vw",transform:"translate3d(0px, ".concat(e.y,"px, 0)")},d={height:"1px",width:"100vw",transform:"translate3d(0px, ".concat(e.y+e.height,"px, 0)")};return a&&(s.opacity=.3),n&&(i.opacity=.3),r&&(c.opacity=.3),o&&(d.opacity=.3),l.a.createElement("div",{className:"guides"},l.a.createElement("div",{className:"guide",style:s}),l.a.createElement("div",{className:"guide",style:i}),l.a.createElement("div",{className:"guide",style:c}),l.a.createElement("div",{className:"guide",style:d}))}},{key:"componentDidUpdate",value:function(e){var t=this.props.boundingBox.x>e.boundingBox.x,a=this.props.boundingBox.x<e.boundingBox.x,n=this.props.boundingBox.width!==e.boundingBox.width,l=this.props.boundingBox.y<e.boundingBox.y,r=this.props.boundingBox.y>e.boundingBox.y,o=this.props.boundingBox.height!==e.boundingBox.height,s={};(t||a||n)&&(s.rightGuideVisible=!0,s.leftGuideVisible=!0,clearTimeout(this.hideGuidesTimeout),this.hideGuidesTimeout=window.setTimeout(this.hideGuides,3500)),(l||r||o)&&(s.topGuideVisible=!0,s.bottomGuideVisible=!0,clearTimeout(this.hideGuidesTimeout),this.hideGuidesTimeout=window.setTimeout(this.hideGuides,3500)),Object.keys(s).length>0&&this.setState(s)}}]),a}(n.Component)),Ke=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleMouseMove",value:function(e){var t=this,a=this.state,n=[];Object.keys(this.state.elementState).forEach((function(e){t.state.elementState[e].selected===t.state.userID&&n.push(t.state.elements[e])}));var l={};if(n){var r=Object(h.a)({},a.elements);if(n.length>1){var o=this.calculateSelectedElementsBoundingBox(n,a.zoomLevel,a.offsetX,a.offsetY),s=(o.rawWidth+e.movementX*a.zoomLevel)/o.rawWidth,i=(o.rawHeight+e.movementY*a.zoomLevel)/o.rawHeight;n.forEach((function(t){var n=Object(h.a)({},r[t.id]);r[t.id]=n;var l=Object(h.a)({},n.styles);n.styles=l,n.styles.width*=s,n.styles.height*=i;var c=n.styles.x-o.rawX,d=n.styles.y-o.rawY;if(n.styles.x=n.styles.x-c+c*s,n.styles.y=n.styles.y-d+d*i,n.fontSizeAuto){n.fontStyle=Object(h.a)({},n.fontStyle);var u=(r[t.id].styles.width+e.movementX*a.zoomLevel)/r[t.id].styles.width;r[t.id].fontStyle.fontSize=u*r[t.id].fontStyle.fontSize}}))}else if(1===n.length&&n[0].fixedRatio){var c=r[n[0].id],d=Object(h.a)({},c);r[n[0].id]=d;var u=Object(h.a)({},d.styles);if(d.styles=u,u.width+=e.movementX*a.zoomLevel,u.height+=e.movementX*a.zoomLevel,c.fontSizeAuto){d.fontStyle=Object(h.a)({},d.fontStyle);var m=(d.styles.width+e.movementX*a.zoomLevel)/d.styles.width;d.fontStyle.fontSize=m*d.fontStyle.fontSize}}else if(1===n.length){var p=r[n[0].id],v=Object(h.a)({},p);r[n[0].id]=v;var f=Object(h.a)({},v.styles);if(v.styles=f,v.styles.width+=e.movementX*a.zoomLevel,v.styles.height+=e.movementY*a.zoomLevel,v.fontSizeAuto){var g=(v.styles.width+e.movementX*a.zoomLevel)/v.styles.width;v.fontStyle.fontSize=g*v.fontStyle.fontSize}}l.elements=r,this.setState(l)}}},{key:"handleResizeEnd",value:function(){this.setState({storeUndo:!0})}},{key:"shouldComponentUpdate",value:function(e){return e.boundingBox.height!==this.props.boundingBox.height||e.boundingBox.width!==this.props.boundingBox.width||e.boundingBox.x!==this.props.boundingBox.x||e.boundingBox.y!==this.props.boundingBox.y||e.boundingBox.cx!==this.props.boundingBox.cx||e.boundingBox.cy!==this.props.boundingBox.cy||e.isVisible!==this.props.isVisible||e.isLocked!==this.props.isLocked}},{key:"render",value:function(){var e=this.props,t=e.boundingBox,a=e.isVisible,n=e.isLocked,r={display:"none"};a&&!n&&(r.display="block");var o={position:"absolute",height:"16px",width:"16px",top:"0",left:"0",transform:"translate3d(".concat(t.cx-8,"px,").concat(t.cy-8,"px, 0)")},s={x:t.x,y:t.y,height:t.height,width:t.width};s.width<0&&(s.x+=s.width,s.width=-1*s.width),s.height<0&&(s.y+=s.height,s.height=-1*s.height);var i={position:"absolute",height:"".concat(s.height,"px"),width:"".concat(s.width,"px"),top:"0",left:"0",transform:"translate3d(".concat(s.x,"px,").concat(s.y,"px, 0)")};return l.a.createElement(l.a.Fragment,null,l.a.createElement(Je,{boundingBox:t}),l.a.createElement("div",{className:"resizerWrapper",style:r},l.a.createElement("div",{className:"elementsHightlight",style:i}),l.a.createElement("svg",{style:o,height:"16",width:"16",viewBox:"-8 -8 16 16"},l.a.createElement("circle",{id:"resizerHandle",cx:0,cy:0,r:6,fill:"white",stroke:"grey",strokeWidth:2,strokeOpacity:.5,cursor:"nwse-resize"}))))}},{key:"componentDidMount",value:function(){this.props.registerDragHandler("resizerHandle",{dragMoveHandler:this.handleMouseMove,dragEndHandler:this.handleResizeEnd})}}]),a}(n.Component),qe=(a(57),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"handleSelect",value:function(e){var t=e.target.id,a=e.metaKey;this.handleSetCurrentElement(t,a)}},{key:"handleElementDragStart",value:function(){console.log("drag started");var e=this.getSelectedElements(this.state.elementState).map((function(e){return e.id}));this.handleShiftElementPosition("forward",e)}},{key:"updateElementDragPosition",value:function(e){var t=this,a=this.state.zoomLevel,n=Object(h.a)({},this.state.elements),l=Object.keys(this.state.elementState).filter((function(e){return!!t.isSelected(e)}));l.length&&(l.forEach((function(t){var l=Object(h.a)({},n[t]),r=Object(h.a)({},n[t].styles);r.x+=e.movementX*a,r.y+=e.movementY*a,l.styles=r,n[t]=l})),this.setState({elements:n}))}},{key:"handleElementDragEnd",value:function(){this.setState({storeUndo:!0})}},{key:"shouldComponentUpdate",value:function(e){return e.boundingBox.rawHeight!==this.props.boundingBox.rawHeight||e.boundingBox.rawWidth!==this.props.boundingBox.rawWidth||e.boundingBox.rawX!==this.props.boundingBox.rawX||e.boundingBox.rawY!==this.props.boundingBox.rawY||e.elementKeys.length!==this.props.elementKeys.length}},{key:"render",value:function(){var e=this.props.boundingBox;return l.a.createElement("rect",{id:"elementSelectionArea",height:e.rawHeight,width:e.rawWidth,x:e.rawX,y:e.rawY,fillOpacity:0})}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.elementKeys,n=e.elementKeys,l=n.filter((function(e){return-1===a.indexOf(e)})),r=a.filter((function(e){return-1===n.indexOf(e)}));l.length>0&&l.forEach((function(e){t.props.removeDragHandler(e)})),r.length>0&&r.forEach((function(e){t.props.registerDragHandler(e,{dragStartHandler:t.handleElementDragStart,dragMoveHandler:t.updateElementDragPosition,dragEndHandler:t.handleElementDragEnd,clickHandler:t.handleSelect})}))}},{key:"componentDidMount",value:function(){this.props.registerDragHandler("elementSelectionArea",{dragMoveHandler:this.updateElementDragPosition,dragEndHandler:this.handleElementDragEnd})}}]),a}(n.Component)),Qe=(a(58),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).handleClick=function(t){e.props.loadFile("miralFile_".concat(e.props.fileName))},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"navBar_menu_item",onClick:this.handleClick,onDoubleClick:this.handleDblClick},this.props.fileName)}}]),a}(n.Component)),$e=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(s.a)(this,a),(r=t.call(this,e,n)).handleOpenMenu=function(e){e.stopPropagation(),r.setState({menuVisible:!r.state.menuVisible,subMenu:[]})},r.autoSave=function(){var e=r.props.getState();if(e.elementState=r.deselectElements(e.elementState),Object.keys(e.elements).length>0){var t={elements:e.elements,elementState:e.elementState,boardName:e.boardName,zoomLevel:e.zoomLevel,offsetX:e.offsetX,offsetY:e.offsetY};window.localStorage.setItem("miral_autoSave",JSON.stringify(t))}else window.localStorage.removeItem("miral_autoSave")},r.saveToBrowser=function(e){var t=r.props.getState();t.elementState=r.deselectElements(t.elementState);var a={elements:t.elements,elementState:t.elementState,boardName:t.boardName,zoomLevel:t.zoomLevel,offsetX:t.offsetX,offsetY:t.offsetY},n="miralFile_".concat(t.boardName);window.localStorage.setItem(n,JSON.stringify(a)),r.setState({menuVisible:!1,subMenu:[]})},r.saveToFile=function(e){var t=r.props.getState();t.elementState=r.deselectElements(t.elementState);var a={elements:t.elements,elementState:t.elementState,boardName:t.boardName,zoomLevel:t.zoomLevel,offsetX:t.offsetX,offsetY:t.offsetY},n="whiteboardFile_".concat(t.boardName,".wswb"),l=document.createElement("a"),o=new Blob([JSON.stringify(a)],{type:"text/plain"});l.href=URL.createObjectURL(o),l.download=n,l.click(),r.setState({menuVisible:!1,subMenu:[]})},r.loadFileFromBrowser=function(e){var t=window.localStorage.getItem(e),a=JSON.parse(t),n=Object.assign({},r.props.applicationState,a);r.props.handleUpdateElementsAndState(n),r.setState({menuVisible:!1,subMenu:[]})},r.loadFile=function(){var e=document.createElement("input");e.type="file",e.accept=".wswb",e.onchange=function(e){var t=e.target.files[0];if(t){var a=new FileReader;a.onload=function(e){var t=e.target.result,a=Object.assign({},r.props.applicationState,JSON.parse(t));r.props.handleUpdateElementsAndState(a)},a.readAsText(t)}},e.click(),r.setState({menuVisible:!1,subMenu:[]})},r.getSavedFromBrowser=function(e){var t=[];Object.keys(window.localStorage).forEach((function(e){if(-1!==e.indexOf("miralFile_")){var a=e.replace("miralFile_","");t.push(l.a.createElement(Qe,{key:"fileOption_".concat(a),fileName:a,loadFile:r.loadFileFromBrowser,deleteFile:r.deleteFileFromLocalStorage}))}})),0===t.length&&t.push(l.a.createElement("div",{className:"navMenu_error"},"No saved files found on this browser.")),r.setState({subMenu:t})},r.saveToMonday=function(e){var t=window.mondaySdk(),a=r.props.getState();a.elementState=r.deselectElements(a.elementState);var n={elements:a.elements,elementState:a.elementState,boardName:a.boardName,zoomLevel:a.zoomLevel,offsetX:a.offsetX,offsetY:a.offsetY},l="miralFile_".concat(a.boardName);t.storage.instance.getItem(l)&&(l=l+"_"+(new Date).getHours()+(new Date).getMinutes()),t.storage.instance.setItem(l,JSON.stringify(n)),t.storage.instance.getItem("miralFileList").then((function(e){var a=[];null===e.data.value?a=[l]:(a=JSON.parse(e.data.value)).push(l),t.storage.instance.setItem("miralFileList",JSON.stringify(a))})),r.setState({menuVisible:!1,subMenu:[]})},r.getSavedFromMonday=function(e){window.mondaySdk().storage.instance.getItem("miralFileList").then((function(e){var t=[];e.data.value?t=JSON.parse(e.data.value).map((function(e){return l.a.createElement(Qe,{key:"fileOption_".concat(e),fileName:e,loadFile:r.loadFileFromMonday})})):t.push(l.a.createElement("div",{className:"navMenu_error"},"No saved files found on this browser."));r.setState({subMenu:t})}))},r.loadFileFromMonday=function(e){window.mondaySdk().storage.instance.getItem(e).then((function(e){if(e.data.value){var t=Object.assign({},r.props.applicationState,JSON.parse(e.data.value));r.props.handleUpdateElementsAndState(t),r.setState({menuVisible:!1,subMenu:[]})}}))},r.deleteFileFromLocalStorage=function(){var e=r.props.getState().boardName;window.localStorage.removeItem("miralFile_".concat(e)),r.newFile()},r.newFile=function(){var e=!0;if(window.localStorage.getItem("miral_autoSave")&&(e=window.confirm("All changes in current board will be lost, are you sure?")),e){var t=r.props.getState(),a={elements:{},elementState:{},boardName:"new-board-"+(new Date).toLocaleDateString().replace(/\//g,""),zoomLevel:100,offsetX:0,offsetY:0},n=Object.assign({},t,a);r.props.handleUpdateElementsAndState(n),r.setState({menuVisible:!1,subMenu:[]})}},r.loadTemplatesAndTutorials=function(){r.props.loadTemplatesAndTutorials(),r.setState({menuVisible:!1,subMenu:[]})},r.state={menuVisible:!1,subMenu:[],mondaySaveAvailable:!1},r}return Object(i.a)(a,[{key:"deselectElements",value:function(e){var t=Object(h.a)({},e);return Object.keys(t).forEach((function(e){if(!1!==e.selected){var a=Object(h.a)({},t[e]);a.selected=!1,t[e]=a}})),t}},{key:"render",value:function(){var e=this.state,t=e.menuVisible,a=e.subMenu,n=e.mondaySaveAvailable,r="navBar_menu",o="";return t&&(r+=" navBar_menu_open"),a.length>0&&(o="slideLeft"),l.a.createElement("div",{className:"navBar"},l.a.createElement("span",{className:"companyName"},"Workshoppr.com"),l.a.createElement("span",{className:"burgerMenu",onClick:this.handleOpenMenu}),l.a.createElement("div",{className:r},l.a.createElement("div",{className:"navBar_menu_arrow"}),l.a.createElement("div",{className:"navBar_menu_sliderWrapper"},l.a.createElement("div",{className:"navBar_menu_slider ".concat(o)},l.a.createElement("div",{className:"navBar_menu_items"},l.a.createElement("div",{className:"navBar_menu_item",onClick:this.newFile},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.a.createElement("path",{d:"M4.01 2L4 22h16V8l-6-6H4.01zM13 9V3.5L18.5 9H13z"})),l.a.createElement("span",null,"New board")),n&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"navBar_menu_item",onClick:this.saveToMonday},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 64 64"},l.a.createElement("g",{transform:"matrix(3.208255 0 0 3.208255 -35.559129 -63.587202)"},l.a.createElement("path",{d:"M13.513 35.76a2.433 2.433 0 0 1-2.059-3.723l4.377-6.99a2.432 2.432 0 1 1 4.123 2.582l-4.378 6.99a2.43 2.43 0 0 1-2.063 1.141z",fill:"#ff3d57"}),l.a.createElement("path",{d:"M21.056 35.76a2.433 2.433 0 0 1-2.063-3.723l4.38-6.99a2.432 2.432 0 1 1 4.117 2.582l-4.372 6.99a2.43 2.43 0 0 1-2.063 1.141z",fill:"#ffcb00"}),l.a.createElement("ellipse",{ry:"2.375",rx:"2.436",cy:"33.384",cx:"28.597",fill:"#00d647"}))),l.a.createElement("span",null,"Save to Monday.com")),l.a.createElement("div",{className:"navBar_menu_item",onClick:this.getSavedFromMonday},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 64 64"},l.a.createElement("g",{transform:"matrix(3.208255 0 0 3.208255 -35.559129 -63.587202)"},l.a.createElement("path",{d:"M13.513 35.76a2.433 2.433 0 0 1-2.059-3.723l4.377-6.99a2.432 2.432 0 1 1 4.123 2.582l-4.378 6.99a2.43 2.43 0 0 1-2.063 1.141z",fill:"#ff3d57"}),l.a.createElement("path",{d:"M21.056 35.76a2.433 2.433 0 0 1-2.063-3.723l4.38-6.99a2.432 2.432 0 1 1 4.117 2.582l-4.372 6.99a2.43 2.43 0 0 1-2.063 1.141z",fill:"#ffcb00"}),l.a.createElement("ellipse",{ry:"2.375",rx:"2.436",cy:"33.384",cx:"28.597",fill:"#00d647"}))),l.a.createElement("span",null,"Load from Monday.com"))),!n&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"navBar_menu_item",onClick:this.saveToBrowser},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.a.createElement("path",{d:"M19 12v7H5v-7H3v9h18v-9h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"})),l.a.createElement("span",null,"Save to Browser")),l.a.createElement("div",{className:"navBar_menu_item",onClick:this.getSavedFromBrowser},l.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"m19,12l0,7l-14,0l0,-7l-2,0l0,9l18,0l0,-9l-2,0z",fill:"black",id:"svg_2"}),l.a.createElement("path",{d:"m12.75,11.67l2.59,-2.58l1.41,1.41l-5,5l-5,-5l1.41,-1.41l2.59,2.58l0,-9.67l2,0c0,3.223333 0,6.446667 0,9.67z",fill:"black",id:"svg_3",transform:"rotate(180 11.75 8.75)"})),l.a.createElement("span",null,"Load from Browser"))),l.a.createElement("div",{className:"navBar_menu_item",onClick:this.saveToFile},l.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},l.a.createElement("path",{d:"m19.4,5.7l-9.8,0l0,12.6l12.6,0l0,-9.8l-2.8,-2.8zm-3.5,11.2c-1.162,0 -2.1,-0.938 -2.1,-2.1s0.938,-2.1 2.1,-2.1s2.1,0.938 2.1,2.1s-0.938,2.1 -2.1,2.1zm2.1,-7l-7,0l0,-2.8l7,0l0,2.8z"}),l.a.createElement("path",{d:"m2.59,15.12475l2.97298,-3.17475l-2.97298,-3.17475l0.91526,-0.97525l3.89474,4.15l-3.89474,4.15l-0.91526,-0.97525z"})),l.a.createElement("span",null,"Save to file")),l.a.createElement("div",{className:"navBar_menu_item",onClick:this.loadFile},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"m19.4,5.7l-9.8,0l0,12.6l12.6,0l0,-9.8l-2.8,-2.8zm-3.5,11.2c-1.162,0 -2.1,-0.938 -2.1,-2.1s0.938,-2.1 2.1,-2.1s2.1,0.938 2.1,2.1s-0.938,2.1 -2.1,2.1zm2.1,-7l-7,0l0,-2.8l7,0l0,2.8z"}),l.a.createElement("path",{d:"m7.4,8.77525l-2.97298,3.17475l2.97298,3.17475l-0.91526,0.97525l-3.89474,-4.15l3.89474,-4.15l0.91526,0.97525z"})),l.a.createElement("span",null,"Load from file")),l.a.createElement("div",{className:"navBar_menu_item",onClick:this.deleteFileFromLocalStorage},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.a.createElement("path",{d:"M6 21h12V7H6v14zm2.46-9.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4h-3.5z"})),l.a.createElement("span",null,"Delete board")),l.a.createElement("div",{className:"navBar_menu_item",onClick:this.loadTemplatesAndTutorials},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.a.createElement("path",{d:"M20 8H4V6h16v2zm-2-6H6v2h12V2zm4 8v12H2V10h20zm-6 6l-6-3.27v6.53L16 16z"})),l.a.createElement("span",null,"Templates & Guides"))),l.a.createElement("div",{className:"navBar_menu_items"},a.map((function(e){return e})))))))}},{key:"componentDidMount",value:function(){var e=document.location.ancestorOrigins[0];e&&(-1!==e.indexOf("monday.com")&&this.setState({mondaySaveAvailable:!0}));window.localStorage.getItem("miral_autoSave")}}]),a}(n.PureComponent),et=(a(14),"https://workshoppr.com"),tt=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleOpenShareMenu=function(){l.setState({menuVisible:!l.state.menuVisible,subMenu:[]})},l.handleShareBoard=function(){var e=l.state,t=e.name,a=e.initials,n=e.securityCode,r=l.state.boardID;r||(r=l.removeDifficultCharactersToReadForPeople(C.a.generate())),window.location.hash="h=".concat(r,"&o=unfoldbio"),l.setState({sessionActive:!0,boardID:r}),l.props.toggleBoardShare({boardID:r,name:t,initials:a,securityCode:n})},l.handleCopyToClipBoard=function(){var e=l.state,t=e.boardID,a=e.securityCode,n="Join : ".concat(et,"/#j=").concat(t,"&o=unfoldbio \nPasscode : ").concat(a);navigator.clipboard.writeText(n)},l.handleNameUpdate=function(e){l.setState({name:e.target.value})},l.handleNameBoardID=function(e){l.setState({boardID:e.target.value})},l.handleInitalsUpdate=function(e){l.setState({initials:e.target.value})},l.handleSecurityCodeUpdate=function(e){l.setState({securityCode:e.target.value})},l.handleJoinBoard=function(e){window.workshoppr.joinBoard(l.state.organisation,l.state.boardID)},l.state={menuVisible:!1,sessionActive:!1,boardID:null,name:"",initials:"",securityCode:Math.floor(1e3+9e4*Math.random())},l}return Object(i.a)(a,[{key:"removeDifficultCharactersToReadForPeople",value:function(e){return e.replace(/l/g,"L").replace(/I/g,"i")}},{key:"render",value:function(){var e=this.state,t=e.menuVisible,a=e.sessionActive,n=e.boardID,r=e.name,o=e.initials,s=e.securityCode,i="share_menu",c="",d="",h="#333";t&&(i+=" share_menu_open"),a&&(c="slideLeft",h="#33CC7F",d="pulse");var u="".concat(et,"/#j=").concat(n,"&o=unfoldbio");return l.a.createElement("div",{className:"share_menu_wrapper"},l.a.createElement("div",{className:"iconButton share ".concat(d),onClick:this.handleOpenShareMenu},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},l.a.createElement("path",{fill:h,d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"}))),l.a.createElement("div",{className:i},l.a.createElement("div",{className:"share_menu_arrow"}),l.a.createElement("div",{className:"share_menu_sliderWrapper"},l.a.createElement("div",{className:"share_menu_slider ".concat(c)},l.a.createElement("h3",null,"Collaboration session setup:"),n&&l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("label",null,"Board ID : "),l.a.createElement("input",{id:"share_menu_input_boardID",className:"share_menu_input",placeholder:"xxxxxxxx",value:n,onChange:this.handleNameBoardID})),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("label",null,"name : "),l.a.createElement("input",{id:"share_menu_input_userName",className:"share_menu_input",placeholder:"e.g. john",value:r,onChange:this.handleNameUpdate})),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("label",null,"Initials : "),l.a.createElement("input",{id:"share_menu_input_initials",className:"share_menu_input",placeholder:"js",value:o,onChange:this.handleInitalsUpdate})),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("label",null,"Security code : "),l.a.createElement("input",{id:"share_menu_input_securityCode",className:"share_menu_input",defaultValue:s,onChange:this.handleSecurityCodeUpdate})),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("button",{id:"share_menu_input_shareNow",className:"share_menu_button",onClick:this.handleShareBoard},"Share board now")),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("button",{id:"share_menu_input_joinExisting",className:"share_menu_button",onClick:this.handleJoinBoard},"Join existing session"))),l.a.createElement("div",{className:"share_menu_slider ".concat(c)},l.a.createElement("h3",null,"Sharing session active!"),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("label",null,"Join here : "),l.a.createElement("a",{className:"share_menu_link",href:u},u)),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("label",null,"Security code : "),l.a.createElement("div",null,s)),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("button",{className:"share_menu_button",onClick:this.handleCopyToClipBoard},"Copy invite to clipboard")),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("button",{className:"share_menu_button"},"End session for all"))))))}},{key:"componentDidMount",value:function(){if(-1!==window.location.hash.indexOf("h=")){var e=window.location.hash.match(/o=([^&$]*)/m)[1],t=window.location.hash.match(/h=([^&$]*)/m)[1];this.setState({companyName:e,boardID:t})}else if(-1!==window.location.href.indexOf("boardId=")){var a=window.location.href.match(/boardViewId=([^&$]*)/m)[1],n=window.location.href.match(/boardId=([^&$]*)/m)[1];this.setState({companyName:a,boardID:n})}}}]),a}(n.Component),at=a(9);function nt(e){var t=Object.assign({},e);return Object.keys(t).forEach((function(e){Array.isArray(t[e])?t[e]=[].concat(t[e]):"object"===typeof t[e]&&(t[e]=nt(t[e]))})),t}function lt(e,t){return t.length>0&&t.forEach((function(t){var a=t.path.split("/");e[a[1]][a[2]]=Object(h.a)({},e[a[1]][a[2]])})),e}function rt(e){return"object"===typeof e&&null!==e}var ot=a(18),st=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleUndo=function(){var e=Object(at.a)(l.state.undo),t=Object(at.a)(l.state.updates),a=e.pop(),n=t.pop(),r=[].concat(Object(at.a)(l.state.redo),[n]),o=lt({elements:Object(h.a)({},l.props.elements),elementState:Object(h.a)({},l.props.elementState)},a);ot.applyPatch(o,a),l.setState({undo:e,redo:r,updates:t}),l.props.handleUpdateElementsAndState({elementState:o.elementState,elements:o.elements})},l.handleRedo=function(){var e=Object(at.a)(l.state.redo),t=e.pop(),a=lt({elements:Object(h.a)({},l.props.elements),elementState:Object(h.a)({},l.props.elementState)},t);ot.applyPatch(a,t),l.setState({redo:e}),l.props.handleUpdateElementsAndState({elementState:a.elementState,elements:a.elements,storeUndo:!0})},l.handleKeyPress=function(e){if(!0===e.ctrlKey&&"z"===e.key||!0===e.metaKey&&"z"===e.key)e.preventDefault(),l.state.undo.length>0&&l.handleUndo();else if(!0===e.ctrlKey&&"y"===e.key||!0===e.metaKey&&"y"===e.key){e.preventDefault(),l.state.redo.length>0&&l.handleRedo()}},l.state={undo:[],redo:[],updates:[],prevCombinedData:{elements:Object(h.a)({},l.props.elements),elementState:Object(h.a)({},l.props.elementState)}},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.undo.length>0,t=this.state.redo.length>0,a={visibility:"hidden"};(e||t)&&(a.visibility="visible");var n={pointerEvents:"none",opacity:.5};t&&(n.opacity=1,n.pointerEvents="all");var r={opacity:.5,pointerEvents:"none"};return e&&(r.opacity=1,r.pointerEvents="all"),l.a.createElement("div",{className:"undoControls",style:a},l.a.createElement("span",{className:"iconButton undo",onClick:this.handleUndo,style:r}),l.a.createElement("span",{className:"iconButton redo",onClick:this.handleRedo,style:n}))}},{key:"componentDidUpdate",value:function(){var e=this.props.storeUndo,t=this.state.prevCombinedData;if(e){var a={elements:this.props.elements,elementState:this.props.elementState},n=ot.createPatch(t,a),l=ot.createPatch(a,t);l.length>0&&n.length>0&&(this.setState({prevCombinedData:{elements:Object(h.a)({},this.props.elements),elementState:Object(h.a)({},this.props.elementState)},undo:[].concat(Object(at.a)(this.state.undo),[l]),updates:[].concat(Object(at.a)(this.state.updates),[n])}),this.props.handleUpdateElementsAndState({storeUndo:!1}))}}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress)}}]),a}(n.PureComponent),it=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleEditBoardName=function(){l.setState({editBoardName:!0})},l.handleBlur=function(e){l.props.updateBoardName(e.target.innerText),l.setState({editBoardName:!1})},l.state={editBoardName:!1},l}return Object(i.a)(a,[{key:"render",value:function(){var e=!1;return this.state.editBoardName&&(e=!0),l.a.createElement("div",{className:"boardControls"},l.a.createElement("div",{className:"primaryControls"},l.a.createElement("span",{className:"boardName",contentEditable:e,onClick:this.handleEditBoardName,onBlur:this.handleBlur,suppressContentEditableWarning:!0},this.props.boardName),l.a.createElement(tt,{toggleBoardShare:this.props.toggleBoardShare})),l.a.createElement(st,{handleUpdateElementsAndState:this.props.handleUpdateElementsAndState,elements:this.props.elements,elementState:this.props.elementState,storeUndo:this.props.storeUndo}))}}]),a}(n.PureComponent),ct=(a(61),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleMouseWheel=function(e){if(e.ctrlKey)e.preventDefault(),l.handleZoom(e);else{var t={movementX:-1*e.deltaX,movementY:-1*e.deltaY};l.props.handlePanMove(t)}},l.handleZoom=function(e){var t=l.props,a=t.offsetX,n=t.offsetY,r=t.zoomLevel,o=Math.sign(e.deltaY),s=r+o>0?r+2*o:1,i=e.clientX*r,c=e.clientY*r,d=a-(e.clientX*s-i),h=n-(e.clientY*s-c);l.props.updateBoardPosition({offsetX:d,offsetY:h,zoomLevel:s})},l.handlePointerDown=function(e){if(e.stopPropagation(),"normal"===l.state.drag)l.setState({dragStartX:e.clientX,dragStartY:e.clientY,dragStartTime:Date.now(),drag:"mouseDown",isSelected:l.props.isSelected(e.target.id),isLocked:l.props.isLocked(e.target.id),elementID:e.target.id}),l.pointers=[Object(h.a)({},e)],l.SAFARIHACK_SCREENX=e.screenX,l.SAFARIHACK_SCREENY=e.screenY;else if("mouseDown"===l.state.drag||"dragging"===l.state.drag){e.pointerId!==l.pointers[0].pointerId&&(l.pointers=[].concat(Object(at.a)(l.pointers),[Object(h.a)({},e)]))}},l.handlePointerMove=function(e){1===l.pointers.length?l.handleSinglePointerMove(e):l.pointers.length>1&&l.handleMultiPointerMove(e)},l.handleSinglePointerMove=function(e){var t=l.state,a=t.drag,n=t.elementID,r=t.isSelected,o=t.isLocked,s=t.dragStartX,i=t.dragStartY;if(l.props.updatePointerPosition({x:e.clientX*l.props.zoomLevel+l.props.offsetX,y:e.clientY*l.props.zoomLevel+l.props.offsetY}),"mouseDown"===a||"dragging"===a){var c=l.props.dragHandlers[n],d=l.wasAccidentalMovement(s,i,e.clientX,e.clientY);e.stopPropagation();var h="mouseDown"===a&&!d,u=c&&c.handleDragMove&&!d;if((!d&&!r&&"drawCanvas"!==n&&"resizerHandle"!==n&&"elementSelectionArea"!==n||o)&&(c=l.props.dragHandlers.board,l.setState({elementID:"board"})),h)l.setState({drag:"dragging"}),c&&c.handleDragStart&&c.handleDragStart(e,s,i,e.movementX,e.movementY);else if(u){var m=e.screenX-l.SAFARIHACK_SCREENX,p=e.screenY-l.SAFARIHACK_SCREENY;l.SAFARIHACK_SCREENX=e.screenX,l.SAFARIHACK_SCREENY=e.screenY,e.movementX=m,e.movementY=p,c.handleDragMove(e,s,i)}}},l.handleMultiPointerMove=function(e){for(var t,a=l.pointers,n=0;n<a.length;n++)if(e.pointerId===a[n].pointerId){t=Object(h.a)({},a[n]),a[n]=Object(h.a)({},e);break}var r=Math.hypot(a[0].clientX-a[1].clientX,a[0].clientY-a[1].clientY),o=Math.max(a[0].clientX,a[1].clientX),s=Math.min(a[0].clientX,a[1].clientX),i=Math.max(a[0].clientY,a[1].clientY),c=Math.max(a[0].clientY,a[1].clientY),d=l.previousPinchZoomDistance-r;d>.1||d<-.1?l.handleZoom({deltaY:d,clientX:s+(o-s)/2,clientY:c+(i-c)/2}):console.log(t),l.previousPinchZoomDistance=r},l.handlePointerUp=function(e){1===l.pointers.length?l.handleSinglePointerUp(e):l.pointers.length>1&&l.handleMultiPointerUp(e)},l.handleSinglePointerUp=function(e){var t=l.props.dragHandlers[l.state.elementID],a=Date.now()-l.state.dragStartTime,n=l.wasAccidentalMovement(l.state.dragStartX,l.state.dragStartY,e.clientX,e.clientY)&&a<200;"dragging"!==l.state.drag||n?("normal"===l.state.drag||"mouseDown"===l.state.drag||"dragging"===l.state.drag&&n)&&(t&&t.handleClick&&t.handleClick(e,l.state.dragStartX,l.state.dragStartY),l.setState({drag:"normal",dragStartX:0,dragStartY:0})):(e.stopPropagation(),t&&t.handleDragEnd&&t.handleDragEnd(e),l.setState({drag:"normal",dragStartX:0,dragStartY:0}))},l.handleMultiPointerUp=function(e){l.pointers.pop()},l.state={drag:"normal",dragStartX:0,dragStartY:0},l.SAFARIHACK_SCREENX=0,l.SAFARIHACK_SCREENY=0,l.containerElement=null,l.pointers=[],l.previousPinchZoomDistance=0,l}return Object(i.a)(a,[{key:"wasAccidentalMovement",value:function(e,t,a,n){var l=e+t-(a+n);return l>-3&&l<3}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{cursor:"pointer",position:"absolute",top:0,left:0,height:"100vh",width:"100vw",touchAction:"none"},onPointerDown:this.handlePointerDown,onPointerMove:this.handlePointerMove,onPointerUp:this.handlePointerUp,id:"interActionManager",ref:function(t){e.containerElement=t}},this.props.children)}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("mouseleave",(function(t){e.state.drag})),this.containerElement.addEventListener("wheel",this.handleMouseWheel,{passive:!1})}}]),a}(n.PureComponent)),dt=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleKeyPress=function(e){var t=null!==l.props.textEditor||"INPUT"===e.target.tagName||"true"===e.target.getAttribute("contentEditable");"Backspace"!==e.key||t?!0===e.ctrlKey&&"d"===e.key||!0===e.metaKey&&"d"===e.key?(e.preventDefault(),l.props.handleDuplicateElements()):"ArrowDown"!==e.key||t?"ArrowUp"!==e.key||t?"ArrowLeft"!==e.key||t?"ArrowRight"!==e.key||t?(!0===e.ctrlKey&&"c"===e.key||!0===e.metaKey&&"c"===e.key)&&!t?(e.preventDefault(),l.props.copy()):(!0===e.ctrlKey&&"x"===e.key||!0===e.metaKey&&"x"===e.key)&&!t?(e.preventDefault(),l.props.cut()):(!0===e.ctrlKey&&"v"===e.key||!0===e.metaKey&&"v"===e.key)&&!t&&(e.preventDefault(),l.props.paste()):l.props.shuntSelectedElements("right"):l.props.shuntSelectedElements("left"):l.props.shuntSelectedElements("up"):l.props.shuntSelectedElements("down"):(e.preventDefault(),l.props.handleDeleteElements())},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{id:"keyboardManager",styles:{display:"none"}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress)}}]),a}(n.PureComponent),ht=(a(12),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e={backgroundColor:this.props.data.color};return l.a.createElement("div",{className:"multiUser_UserDockAvatar",style:e},this.props.data.name)}}]),a}(n.Component)),ut=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(s.a)(this,a),(r=t.call(this,e,n)).animateMouse=function(e,t,a,n){r.cursorRef.current.animate([{transform:"translate3d(".concat(e,"px, ").concat(t,"px, 0px)")},{transform:"translate3d(".concat(a,"px, ").concat(n,"px, 0px)")}],{fill:"forwards",easing:"ease-out",duration:500})},r.state={},r.cursorRef=l.a.createRef(),r.cursorAnimation=null,r.lastUpdate=null,r}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.data.color,t={color:e};return l.a.createElement("div",{className:"multiUser_UserCursorWrapper",ref:this.cursorRef,style:t},l.a.createElement("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",className:"multiUser_UserCursor"},l.a.createElement("path",{fill:e,d:"m0.2125,0.101564l5.116674,15.552611c1.603039,-5.720502 1.863999,-7.627336 10.401108,-9.534169l-15.517782,-6.018442z"})),this.props.data.initials)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.offsetX,n=t.offsetY,l=t.zoomLevel,r=t.data,o=r.pointerPosition.x/l-a/l,s=r.pointerPosition.y/l-n/l,i=e.data.pointerPosition.x/e.zoomLevel-e.offsetX/e.zoomLevel,c=e.data.pointerPosition.y/e.zoomLevel-e.offsetY/e.zoomLevel;(i!==o||c!==s)&&this.animateMouse(i,c,o,s)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.offsetX,a=e.offsetY,n=e.zoomLevel,l=e.data,r=l.pointerPosition.x/n-t/n,o=l.pointerPosition.y/n-a/n;this.animateMouse(0,0,r,o)}}]),a}(n.Component),mt=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleNicknameUpdate=function(e){l.setState({name:e.target.value})},l.handleBoardIDUpdate=function(e){l.setState({boardID:e.target.value})},l.handleInitalsUpdate=function(e){l.setState({initials:e.target.value})},l.handleSecurityCodeUpdate=function(e){l.setState({securityCode:e.target.value})},l.handleSubmitCredentials=function(){var e=l.state,t={securityCode:e.securityCode,name:e.name,initials:e.initials,boardID:e.boardID};l.props.setJoinCreds(t)},l.state={boardID:l.props.boardID,securityCode:"",name:"",initials:""},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.securityCode,a=e.name,n=e.initials,r=e.boardID;return l.a.createElement("div",{className:"multiUser_requestCreds"},l.a.createElement("h3",null,"Enter session credentials"),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("label",null,"Board ID : "),l.a.createElement("input",{className:"share_menu_input",placeholder:"xxxxxx",value:r,onChange:this.handleBoardIDUpdate})),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("label",null,"your nickname : "),l.a.createElement("input",{className:"share_menu_input",placeholder:"e.g. john",value:a,onChange:this.handleNicknameUpdate})),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("label",null,"your initials : "),l.a.createElement("input",{className:"share_menu_input",placeholder:"js",value:n,onChange:this.handleInitalsUpdate})),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("label",null,"Security code : "),l.a.createElement("input",{className:"share_menu_input",defaultValue:t,onChange:this.handleSecurityCodeUpdate})),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("button",{className:"share_menu_button",onClick:this.handleSubmitCredentials},"Join board")),l.a.createElement("div",{className:"share_menu_fieldrow"},l.a.createElement("button",{className:"share_menu_button",onClick:this.props.cancelJoinCreds},"Cancel")))}}]),a}(n.Component),pt=a(18),vt=["#F2275A","#1B73B8","#58BF3B","#FFE800","#F26130"],ft="https://miral-server.herokuapp.com/",gt=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;Object(s.a)(this,a),(l=t.call(this,e,n)).getJoinCreds=function(e,t){var a={requestCreds:!0};e&&(a.organisation=e),t&&(a.boardID=t),l.setState(a)},l.setJoinCreds=function(e){var t=Object.assign({},e,{requestCreds:!1});l.setState(t),l.setupJoinBoardSocketConnection(e)},l.cancelJoinCreds=function(){l.setState({requestCreds:!1})},l.setupShareBoardSocketConnection=function(e){var t=l.state.companyName,a=e.boardID,n=e.securityCode,r=e.name,o=e.initials,s=(0,window.io)("".concat(ft).concat(t),{reconnectionAttempts:10});window.workshoppr.socket=s,l.setState({socket:s,boardID:a,securityCode:n,name:r,initials:o}),s.on("connect",l.shareBoard),s.on("connect_error",l.connectionFailed),s.on("userJoin",l.userJoin),s.on("userLeft",l.userLeft),s.on("updatePointer",l.updatePointer),s.on("updateBoard",l.updateBoard)},l.setupJoinBoardSocketConnection=function(e){var t=e.securityCode,a=e.name,n=e.initials,r=l.state.companyName,o=(0,window.io)("".concat(ft).concat(r),{reconnectionAttempts:10});window.workshoppr.socket=o,l.setState({securityCode:t,name:a,initials:n,socket:o,isParticipant:!0}),o.on("connect",l.joinBoard),o.on("connect_error",l.connectionFailed),o.on("initializeBoard",l.initializeBoard),o.on("userJoin",l.userJoin),o.on("userLeft",l.userLeft),o.on("updatePointer",l.updatePointer),o.on("updateBoard",l.updateBoard),o.on("shareEnded",l.shareEnded)},l.shareBoard=function(){var e=l.state,t=e.id,a=e.color,n=e.boardID,r=e.securityCode,o=e.name,s=e.initials,i=e.socket,c={id:t,color:a,name:o,initials:s,pointerPosition:l.props.pointerPosition},d={elements:l.props.elements,elementState:l.props.elementState};i.emit("shareBoard",{boardID:n,boardContents:d,owner:c,securityCode:r,duration:40}),setInterval(l.purgeEmitQueue,500),setInterval(l.checkBoardForUpdates,1e3)},l.connectionFailed=function(e){console.log(e),l.state.socket.disconnect(),l.setState({boardError:"connection to sharing server failed"})},l.joinBoard=function(){var e=l.state,t=e.id,a=e.color,n=e.boardID,r=e.securityCode,o=e.name,s=e.initials,i=e.socket,c={id:t,color:a,name:o,initials:s,pointerPosition:l.props.pointerPosition};i.emit("joinBoard",{boardID:n,user:c,securityCode:r}),setInterval(l.purgeEmitQueue,500),setInterval(l.checkBoardForUpdates,1e3)},l.hideErrorScreen=function(){l.setState({boardError:null})},l.initializeBoard=function(e){l.props.handleUpdateElementsAndState(e.boardContents),l.setState({boardUsers:e.users})},l.updatePointer=function(e){if(l.state.boardUsers[e.id]){var t=Object(h.a)({},l.state.boardUsers),a=Object(h.a)({},t[e.id]);a.pointerPosition=e.pointerPosition,t[e.id]=a,l.setState({boardUsers:t})}},l.userJoin=function(e){var t=Object(h.a)({},l.state.boardUsers);t[e.id]=e,l.setState({boardUsers:t})},l.userLeft=function(e){var t=Object(h.a)({},l.state.boardUsers);delete t[e],l.setState({boardUsers:t})},l.updateBoard=function(e){var t=lt({elements:Object(h.a)({},l.props.elements),elementState:Object(h.a)({},l.props.elementState)},e.elementsDiffUpdates);pt.applyPatch(t,e.elementsDiffUpdates),l.setState({prevCombinedBoardData:t}),l.props.handleUpdateElementsAndState(t)},l.shareEnded=function(e){l.setState({boardError:e.reason})},l.addToEmitQueue=function(e,t){var a=Object(u.a)(l).emitQueue;a[e]||(a[e]=[]),a[e].push(t)},l.purgeEmitQueue=function(){var e=l.state.socket;Object.keys(l.emitQueue).forEach((function(t){var a=l.emitQueue[t].pop();e.emit(t,a),delete l.emitQueue[t]}))},l.checkBoardForUpdates=function(){var e=l.state,t=e.boardID,a=e.socket,n=e.isParticipant,r=e.boardError,o=e.prevCombinedBoardData;if((l.props.shareBoard||n)&&a&&null===r){var s={elements:l.props.elements,elementState:l.props.elementState},i=pt.createPatch(o,s);i.length>0&&(a.emit("updateBoard",{boardID:t,elementsDiffUpdates:i}),l.setState({prevCombinedBoardData:s}))}};return l.state={isParticipant:!1,requestCreds:!1,boardError:null,socket:null,boardUsers:{},companyName:"unfoldbio",boardID:"",securityCode:"",name:"",initials:"",id:l.props.userID,color:vt[Math.floor(5*Math.random(Date.now()))+0],prevCombinedBoardData:{elements:Object(h.a)({},l.props.elements),elementState:Object(h.a)({},l.elementState)}},l.emitQueue={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.boardID,n=t.boardUsers,r=t.isParticipant,o=t.requestCreds,s=t.socket,i=t.boardError,c=this.props.shareBoard,d=[],h=[],u={pointerEvents:"none",position:"fixed",left:0,top:0,height:"100vh",width:"100vw"};return(c||r)&&s&&null===i&&(Object.keys(n).length>0&&Object.keys(n).forEach((function(t){d.push(l.a.createElement(ht,{key:t,data:n[t]})),t!==e.state.id&&h.push(l.a.createElement(ut,{key:n[t].id+"_key",data:n[t],offsetX:e.props.offsetX,offsetY:e.props.offsetY,zoomLevel:e.props.zoomLevel}))})),i&&(u.pointerEvents="auto")),(i||o)&&(u.pointerEvents="auto"),l.a.createElement("div",{id:"mutliUserManager",style:u},Object.keys(n).length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"multiUser_UserDock"},d),l.a.createElement("div",{className:"multiUser_UserCursors"},h)),i&&l.a.createElement("div",{className:"multiUser_boardOverlay"},l.a.createElement("span",{className:"multiUser_boardErrorText"},"Board unavailable : ",i),l.a.createElement("div",{className:"multiUser_boardErrorReturn",onClick:this.hideErrorScreen},"Back")),o&&l.a.createElement("div",{className:"multiUser_boardOverlay"},l.a.createElement(mt,{boardID:a,setJoinCreds:this.setJoinCreds,cancelJoinCreds:this.cancelJoinCreds})))}},{key:"componentDidUpdate",value:function(e){var t=this.state,a=t.boardID,n=t.socket,l=t.id,r=t.isParticipant,o=t.boardError;e.shareBoard!==this.props.shareBoard&&this.props.shareBoard&&!n&&this.setupShareBoardSocketConnection(this.props.shareBoard);var s=(this.props.shareBoard||r)&&n&&null===o,i=this.props.pointerPosition,c=i.x!==e.pointerPosition.x||i.y!==e.pointerPosition.y;s&&c&&this.addToEmitQueue("updatePointer",{boardID:a,id:l,pointerPosition:i})}},{key:"componentDidMount",value:function(){if(-1!==window.location.hash.indexOf("j=")){var e=window.location.hash.match(/o=([^&$]*)/m)[1],t=window.location.hash.match(/j=([^&$]*)/m)[1];this.setState({companyName:e,boardID:t,requestCreds:!0})}window.workshoppr||(window.workshoppr={}),window.workshoppr.joinBoard=this.getJoinCreds}},{key:"componentWillUnmount",value:function(){}}]),a}(n.Component),yt=(a(62),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleToggleEditMode=function(e){e.stopPropagation(),l.setState({editMode:!l.state.editMode})},l.handleJumpToSlide=function(){l.props.handleJumpToSlide(l.props.slideID,l.props.slideNumber)},l.handleSlideNameChange=function(e){l.props.changeSlideName(l.props.slideID,e.target.value)},l.state={editMode:!1},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.editMode;return l.a.createElement("div",{className:"slideList_item",key:"slideList_name_".concat(this.props.slideNumber)},e?l.a.createElement("div",{className:"slideList_name"},l.a.createElement("span",{className:"slideList_identifier"},l.a.createElement("input",{value:this.props.slideName,onChange:this.handleSlideNameChange})),l.a.createElement("div",{className:"slideList_tools"},l.a.createElement("span",{className:"slideList_close",onClick:this.handleToggleEditMode}))):l.a.createElement("div",{className:"slideList_name",onClick:this.handleJumpToSlide},l.a.createElement("span",{className:"slideList_identifier"},this.props.slideNumber+1," - ",this.props.slideName),l.a.createElement("div",{className:"slideList_tools"},l.a.createElement("span",{className:"slideList_editName",onClick:this.handleToggleEditMode}))))}}]),a}(n.Component)),St=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleSlideForward=function(){var e=l.state.currentSlide,t=e+1,a=l.props.getSlides(),n=a[t].id;n?(l.props.animateToElement(n,1),l.setState({currentSlide:t})):l.props.animateToElement(a[e].id,1)},l.handleSlideBackwards=function(){var e=l.state.currentSlide,t=e-1,a=l.props.getSlides(),n=a[t].id;n?(l.props.animateToElement(n,1),l.setState({currentSlide:t})):l.props.animateToElement(a[e].id,1)},l.toggleSlideList=function(){l.setState({slideNav:!l.state.slideNav})},l.handleJumpToSlide=function(e,t){l.props.animateToElement(e,1),l.setState({currentSlide:t,slideNav:!1})},l.state={currentSlide:0,slideNav:!1},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.currentSlide,n=t.slideNav,r=this.props.getSlides(),o={visibility:"visible"};r.length>0||(o.visibility="hidden");var s="buttonDisabled";0!==a&&(s="");var i="buttonDisabled";a<r.length-1&&(i="");var c=n?"dropDown_open":"",d=n?"openIcon":"",h=r.map((function(t,a){return l.a.createElement(yt,{key:"slideList_name_".concat(a),slideNumber:a,slideName:t.slideName,slideID:t.id,handleJumpToSlide:e.handleJumpToSlide,changeSlideName:e.props.changeSlideName})}));return l.a.createElement("div",{className:"slideList_controls",style:o},l.a.createElement("span",{className:"iconButton backward ".concat(s),onClick:this.handleSlideBackwards}),l.a.createElement("span",{className:"dropDown ".concat(d),onClick:this.toggleSlideList},"Slide ",this.state.currentSlide+1," of ",r.length),l.a.createElement("span",{className:"iconButton forward ".concat(i),onClick:this.handleSlideForward}),l.a.createElement("div",{className:"slideList ".concat(c)},h))}}]),a}(n.Component),bt=(a(63),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"hub_item"},this.props.children)}}]),a}(n.Component)),Et=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"tutorialTrigger"},l.a.createElement("div",{className:"tutorialTriggerContent"}))}}]),a}(n.Component),wt=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"hub_section hub_home"},l.a.createElement("div",{className:"hub_scrollWrapper"},l.a.createElement(Et,null),l.a.createElement("h2",null,"Your boards"),l.a.createElement("div",{className:"hub_boards"},l.a.createElement(bt,null)),l.a.createElement("h2",null,"Settings")))}}]),a}(n.Component),Ot=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"hub_section hub_templates"},l.a.createElement("h2",null,"Popular"),l.a.createElement("div",{className:"hub_boards"},l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null)),l.a.createElement("h2",null,"Games"),l.a.createElement("div",{className:"hub_boards"},l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null)),l.a.createElement("h2",null,"Agile"),l.a.createElement("div",{className:"hub_boards"},l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null)),l.a.createElement("h2",null,"Education"),l.a.createElement("div",{className:"hub_boards"},l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null),l.a.createElement(bt,null)))}}]),a}(n.Component),Dt=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"hub_section hub_guides"},l.a.createElement("h2",null,"Basics"),l.a.createElement("h2",null,"Intermediate"),l.a.createElement("h2",null,"Advanced"))}}]),a}(n.Component),Ct=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).hideHub=function(){l.setState({hubVisible:!1})},l.switchTab=function(e){var t=e.target,a=Array.from(t.parentNode.children).indexOf(t);l.setState({currentTab:a})},l.state={hubVisible:!1,currentTab:0},l}return Object(i.a)(a,[{key:"render",value:function(){var e="",t={},a=this.state,n=a.hubVisible,r=a.currentTab;return n&&(e="hubVisible"),1===r?t.transform="translateX(-100%)":2===r&&(t.transform="translateX(-200%)"),l.a.createElement("div",{className:"hub ".concat(e)},l.a.createElement("div",{className:"hubBackground",onPointerUp:this.hideHub}),l.a.createElement("div",{className:"hubContents"},l.a.createElement("div",{className:"hubTabs"},l.a.createElement("div",{className:"hubTab ".concat(0===r?"selected":null),onPointerUp:this.switchTab},"Home"),l.a.createElement("div",{className:"hubTab ".concat(1===r?"selected":null),onPointerUp:this.switchTab},"Templates"),l.a.createElement("div",{className:"hubTab ".concat(2===r?"selected":null),onPointerUp:this.switchTab},"Guides")),l.a.createElement("div",{className:"hubSections",style:t},l.a.createElement(wt,null),l.a.createElement(Ot,null),l.a.createElement(Dt,null))))}}]),a}(n.Component),kt=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.shapeProps,t=e.width/5;return l.a.createElement("foreignObject",{className:"svg_textContainer_foreignObject visibilityOverlay",x:e.x,y:e.y,height:e.height,width:e.width,style:{backgroundColor:"#ccc",backgroundImage:"url('/icons/visibility_off-24px.svg')",backgroundPosition:"center center",backgroundSize:"".concat(t,"px ").concat(t,"px"),backgroundRepeat:"no-repeat",pointerEvents:"none"}})}}]),a}(n.PureComponent),jt=(a(64),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleTextEdit=function(e){l.props.handleTextEdit(l.props.data.id)},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.elementState,a=e.data,n=Object(h.a)({},this.props.data.styles),r=null,o=null,s=null;if(this.props.isSelected(a.id)?(n.style={outlineWidth:"".concat(a.initialZoomLevel,"px")},n.className="elementSelectedByUser"):t.selected&&(n.style={outlineWidth:"".concat(a.initialZoomLevel,"px")},n.className="elementSelectedByOtherUser",s=l.a.createElement("rect",Object.assign({},n,{fillOpacity:"0.3",fill:"#000000"}))),a.text){var i=a.text.split(/\n|\r/).map((function(e,t){return l.a.createElement("div",{key:"".concat(a.id,"_").concat(e,"_").concat(t)},e)})),c=Object(h.a)(Object(h.a)({},a.fontStyle),{},{lineHeight:"".concat(1.4*a.fontStyle.fontSize,"px"),padding:"".concat(a.padding,"px"),width:"100%"}),d="center";"top"===a.fontStyle.alignItems?d="flex-start":"bottom"===a.fontStyle.alignItems&&(d="flex-end"),r=l.a.createElement("foreignObject",{className:"svg_textContainer_foreignObject",x:n.x,y:n.y,height:n.height,width:n.width},l.a.createElement("div",{className:"svg_textContainer",style:{alignItems:d}},l.a.createElement("div",{className:"svg_textContainer_line",style:c},i)))}if(0===a.shapeType)o=l.a.createElement("rect",Object.assign({id:a.id},n));else if(1===a.shapeType)n.r=n.width/2,n.cx=n.x+n.r,n.cy=n.y+n.r,o=l.a.createElement("circle",Object.assign({id:a.id},n));else if(2===a.shapeType){var u="".concat(n.x+n.width/2,",").concat(n.y),m="".concat(n.x,",").concat(n.y+n.height),p="".concat(n.x+n.width,",").concat(n.y+n.height);n.points="".concat(u," ").concat(m," ").concat(p),o=l.a.createElement("polygon",Object.assign({id:a.id},n))}else o=l.a.createElement("text",null,"No Shape Type Set");return l.a.createElement("g",{onDoubleClick:this.handleTextEdit,height:n.height,width:n.width},o,r,s,null,a.hidden&&l.a.createElement(kt,{shapeProps:n}))}}]),a}(n.PureComponent)),xt=(a(65),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleTextEdit=function(){l.props.handleTextEdit(l.props.data.id)},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.elementState,a=e.data,n=Object(h.a)({},this.props.data.styles),r=null,o=null;if(this.props.isSelected(a.id)?n.style={outline:"".concat(a.initialZoomLevel,"px dashed #5086F2")}:t.selected&&(n.style={outline:"".concat(a.initialZoomLevel,"px solid #666")},o=l.a.createElement("rect",Object.assign({},n,{fillOpacity:"0.3",fill:"#000000"}))),a.text){var s=a.text.split(/\n|\r/).map((function(e,t){return l.a.createElement("div",{key:"".concat(a.id,"_").concat(e,"_").concat(t)},e)})),i=Object(h.a)(Object(h.a)({},a.fontStyle),{},{lineHeight:"".concat(1.4*a.fontStyle.fontSize,"px"),padding:"".concat(a.padding,"px"),width:"100%"}),c="center";"top"===a.fontStyle.alignItems?c="flex-start":"bottom"===a.fontStyle.alignItems&&(c="flex-end"),r=l.a.createElement("foreignObject",{className:"svg_textContainer_foreignObject",x:n.x,y:n.y,height:n.height,width:n.width},l.a.createElement("div",{className:"svg_textContainer",style:{alignItems:c}},l.a.createElement("div",{className:"svg_textContainer_line",style:i},s)))}return l.a.createElement("g",{onDoubleClick:this.handleTextEdit,cursor:this.state.cursor,height:n.height,width:n.width},l.a.createElement("rect",Object.assign({id:a.id},n)),r,o,a.hidden&&l.a.createElement(kt,{shapeProps:n}))}},{key:"componentDidMount",value:function(){var e=this;this.props.isUniqueSelected(this.props.data.id)&&setTimeout((function(){e.handleTextEdit()}),300)}}]),a}(n.PureComponent)),zt=(a(66),[{path:"m12.04544,2.07068l737.03703,11.11111l-1.85186,742.5926l-744.44443,-7.40742l9.25926,-746.29629z",dropShadow:"m38.82956,79.07068l640.25289,10.22659l-17.60868,669.47711l-554.68758,28.18226l-67.95662,-707.88596l-0.00001,0z",filter:"shadow1"},{path:"m0.934329,2.07068l761.481475,-0.000001l2.592584,735.925933l-764.44443,10.370358l0.370371,-746.29629z",dropShadow:"m38.82956,79.07068l640.25289,10.291407l60.169098,684.901871c-233.784749,-16.594366 -465.347276,-42.16213 -681.354247,10.470427l-19.067731,-705.663705l-0.000005,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 -0.000001,0 -0.000001,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c-0.000001,0 -0.000001,0 -0.000001,0z",filter:"shadow2"},{path:"m1.04544,0.07068l753.03703,7.11111l5.14814,727.5926l-751.44443,-0.40742l-6.74074,-734.29629z",dropShadow:"m44.907991,62.874602l640.25289,10.291407l60.169098,684.901871c-220.059258,-34.241425 -433.974727,-12.750366 -685.275815,14.391995l-15.146163,-709.585273l-0.000005,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 -0.000001,0 -0.000001,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c-0.000001,0 -0.000001,0 -0.000001,0z",filter:"shadow2"},{path:"m16.095067,4.07068l747.987379,9.831012l-6.861786,727.872709l-752.43448,-9.220688l11.308887,-728.483033z",dropShadow:"m44.907991,62.874602l640.25289,10.291407l26.126545,667.880594c-220.059258,-34.241425 -365.889621,55.334741 -634.211985,10.136676l-32.16744,-688.308677l-0.000005,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 -0.000001,0 -0.000001,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c-0.000001,0 -0.000001,0 -0.000001,0z",filter:"shadow2"}]),Mt=[{path:"m17.62857,2.07068l1181.45387,11.11111l-2.96849,742.5926l-1193.32777,-7.40742l14.84239,-746.29629z",dropShadow:"m38.82956,79.07068l1130.25287,10.22659l-31.085,669.47711l-979.2025,28.18226l-119.96535,-707.88596l-0.00002,0z",filter:"shadow1"},{path:"m1.1446,2.07068l1193.7993,0l4.06449,735.92593l-1198.44443,10.37036l0.58064,-746.29629z",dropShadow:"m38.82956,79.07068l1020.51677,10.29141l95.90519,684.90187c-372.63597,-16.59437 -741.72988,-42.16213 -1086.02936,10.47042l-30.39258,-705.6637l-0.00002,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0z",filter:"shadow2"},{path:"m1.04544,0.07068l1186.07661,7.11111l8.10862,727.5926l-1183.56818,-0.40742l-10.61705,-734.29629z",dropShadow:"m44.90799,62.8746l1026.00134,10.29141l96.42061,684.90187c-352.64362,-34.24142 -695.44185,-12.75037 -1098.15031,14.392l-24.27163,-709.58528l0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 -0.00002,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0z",filter:"shadow2"},{path:"m22.52924,4.07068l1173.55324,9.83101l-10.76579,727.87271l-1180.53051,-9.22069l17.74306,-728.48303z",dropShadow:"m44.90799,62.8746l1076.45309,10.29141l43.9264,667.88059c-369.98423,-34.24142 -615.16788,55.33474 -1066.29656,10.13668l-54.08291,-688.30868l0,0c0,0 0,0 -0.00002,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0c0,0 0,0 0,0z",filter:"shadow2"}],Lt=[{path:"m1.04585,1195.29546l3.45387,-1192.88889l746.53151,13.5926l-9.32777,1181.59258l-740.65761,-2.29629z",dropShadow:"m754.08243,96.29727l27.915,980.47711l-708.2025,119.18226l9.03465,-1130.88596l671.25285,31.22659z",filter:"shadow1"},{path:"m0.3946,4.07068l736.5493,-3.75l10.06449,1198.42593l-746.44443,-0.87964l-0.16936,-1193.79629z",dropShadow:"m73.29892,130.81302l693.9526,-100.54906c-23.63597,115.40563 -48.72988,863.83787 1.97064,1090.47042l-706.15792,32.70747l10.23468,-1022.62883z",filter:"shadow2"},{path:"m12.04544,11.07068l728.07661,-8.88889l-1.89138,1182.5926l-735.56818,11.59258l9.38295,-1185.29629z",dropShadow:"m71.90933,126.41601l690.42061,-99.09813c-47.64362,326.75858 -4.44185,938.24963 9.84969,1099.392l-708.27064,23.63328l8.00034,-1023.92715z",filter:"shadow2"},{path:"m15.52924,6.07068l732.55324,10.83101l-11.76579,1179.87271l-728.53051,-17.22069l7.74306,-1173.48303z",dropShadow:"m83.36108,54.81461l663.9264,-43.76801c-37.98423,384.30965 72.83212,820.15195 1.70344,1168.13671l-591.04146,-3.2778l-74.58838,-1121.0909z",filter:"shadow2"}],Nt=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleTextEdit=function(e){l.props.handleTextEdit(l.props.data.id)},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.context,t=this.props,a=t.elementState,n=t.data,r=t.lowDetail,o=Object(h.a)({},this.props.data.styles),s=null,i=800,c=null,d=null;if(this.props.isSelected(n.id)?o.style={outline:"".concat(n.initialZoomLevel,"px dashed #5086F2")}:a.selected&&(o.style={outline:"".concat(n.initialZoomLevel,"px solid #666")},c=l.a.createElement("rect",Object.assign({},o,{fillOpacity:"0.3",fill:"#000000"}))),n.text&&!r){var u=n.text.split(/\n|\r/).map((function(e,t){return l.a.createElement("div",{key:"".concat(n.id,"_").concat(e,"_").concat(t)},e)})),m=Object(h.a)(Object(h.a)({},n.fontStyle),{},{lineHeight:"".concat(1.4*n.fontStyle.fontSize,"px"),padding:"".concat(n.padding,"px")});s=l.a.createElement("foreignObject",{className:"svg_textContainer_foreignObject",x:o.x,y:o.y,height:o.height,width:o.width},l.a.createElement("div",{className:"svg_textContainer"},l.a.createElement("div",{className:"svg_textContainer_line",style:m},u)))}var p="";"square"===n.subType?p=zt[a.shapeType||0]:"rect"===n.subType?(p=Mt[a.shapeType||0],i=1200):"rectv"===n.subType&&(p=Lt[a.shapeType||0],i=730);var v=n.predefinedColor;return r||(d=l.a.createElement("path",{d:p.dropShadow,fill:"rgba(0,0,0, 0.4)",filter:"url(#".concat(p.filter,")")})),l.a.createElement("g",{onDoubleClick:this.handleTextEdit,cursor:this.state.cursor,height:o.height,width:o.width},l.a.createElement("rect",Object.assign({id:n.id},o)),l.a.createElement("g",{transform:"translate(".concat(o.x," ").concat(o.y,") scale(").concat(o.width/i,")"),pointerEvents:"none"},d,l.a.createElement("path",{d:p.path,fill:e.preDefinedColors[v]})),s,c,n.hidden&&l.a.createElement(kt,{shapeProps:o}))}}]),a}(n.PureComponent);Nt.contextType=me;var _t=Nt,Tt=(a(67),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleTextEdit=function(e){l.props.handleTextEdit(l.props.data.id)},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.elementState,a=e.data,n=Object(h.a)({},this.props.data.styles),r=null,o=null;return this.props.isSelected(a.id)?n.style={outline:"".concat(a.initialZoomLevel,"px dashed #5086F2")}:t.selected&&(n.style={outline:"".concat(a.initialZoomLevel,"px solid #666")},o=l.a.createElement("rect",Object.assign({},n,{fillOpacity:"0.3",fill:"#000000"}))),0===a.shapeType?(n.x1=n.x,n.y1=n.y+n.height,n.x2=n.x+n.width,n.y2=n.y,r=l.a.createElement("line",Object.assign({id:a.id},n))):1===a.shapeType?(n.d="M ".concat(n.x," ").concat(n.y+n.height," q 0 ").concat(-n.height," ").concat(n.width," ").concat(-n.height),r=l.a.createElement("path",Object.assign({id:a.id},n))):r=2===a.shapeType?l.a.createElement("path",Object.assign({id:a.id},n)):l.a.createElement("text",null,"No Shape Type Set"),l.a.createElement("g",{onDoubleClick:this.handleTextEdit,height:n.height,width:n.width},r,null,o)}}]),a}(n.PureComponent)),At=(a(68),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleCrop=function(e){},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e,t,a=this.props,n=a.elementState,r=a.data,o=Object(h.a)({},this.props.data.styles),s=null;this.props.isSelected(r.id)?o.style={outline:"".concat(r.initialZoomLevel,"px dashed #5086F2")}:n.selected&&(o.style={outline:"".concat(r.initialZoomLevel,"px solid #666")},s=l.a.createElement("rect",Object.assign({},o,{fillOpacity:"0.3",fill:"#000000"})));var i={backgroundImage:"url(".concat(r.URL,")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"0 0",width:"100%"};return e=l.a.createElement("foreignObject",{className:"svg_imageContainer_foreignObject",x:o.x,y:o.y,height:o.height,width:o.width},l.a.createElement("div",{className:"svg_imageContainer",style:i})),t=l.a.createElement("rect",Object.assign({id:r.id},o)),l.a.createElement("g",{onDoubleClick:this.handleCrop,height:o.height,width:o.width},t,e,s,r.hidden&&l.a.createElement(kt,{shapeProps:o}))}}]),a}(n.PureComponent)),Ht=(a(69),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e,t,a=this.props,n=a.elementState,r=a.data,o=Object(h.a)({},this.props.data.styles),s=null;this.props.isSelected(r.id)?(o.style={outlineWidth:"".concat(r.initialZoomLevel,"px")},o.className="elementSelectedByUser"):n.selected&&(o.style={outlineWidth:"".concat(r.initialZoomLevel,"px")},o.className="elementSelectedByOtherUser",s=l.a.createElement("rect",Object.assign({},o,{fillOpacity:"0.3",fill:"#000000"})));var i="".concat(16*r.initialZoomLevel,"px"),c="".concat(16*r.initialZoomLevel*1.4,"px"),d="Unnamed"===r.slideName?"Slide ".concat(this.props.slideNumber):r.slideName;return e=l.a.createElement("foreignObject",{className:"svg_slideContainer_foreignObject",x:o.x,y:o.y,height:o.height,width:o.width},l.a.createElement("div",{className:"svg_SlideWrapper"},l.a.createElement("div",{className:"svg_slideHeader"},l.a.createElement("div",{style:{fontSize:i,lineHeight:c,padding:"0 ".concat(16*r.initialZoomLevel,"px")}},d)),l.a.createElement("div",{className:"svg_slideBackground",style:{border:"".concat(2*r.initialZoomLevel,"px outset"),width:"".concat(o.width-4*r.initialZoomLevel,"px"),backgroundColor:o.fill}}))),t=l.a.createElement("rect",Object.assign({id:r.id},o,{fillOpacity:0})),l.a.createElement("g",{height:o.height,width:o.width},t,e,s)}}]),a}(n.PureComponent)),Bt=(a(70),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleLinkClick=function(e){if(-1!==l.props.data.link.indexOf("element://")){var t=l.props.data.link.split("://")[1];l.props.animateToElement(t,1)}else if(-1!==l.props.data.link.indexOf("wswb")){var a=l.props.data.link.replace(/wswb/,"http");l.props.loadRemoteBoard(a)}else-1!==l.props.data.link.indexOf("http")&&window.open(l.props.data.link,"_blank")},l.state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.elementState,a=e.data,n=Object(h.a)({},this.props.data.styles),r=null,o=null,s=null;this.props.isSelected(a.id)?n.style={outline:"".concat(a.initialZoomLevel,"px dashed #5086F2")}:t.selected&&(n.style={outline:"".concat(a.initialZoomLevel,"px solid #666")},o=l.a.createElement("rect",Object.assign({},n,{fillOpacity:"0.3",fill:"#000000"})));var i=15*a.initialZoomLevel;if(n.fill="url(#diagonalHatch)",n.fillOpacity="1",n.stroke="#ccc",n.strokeOpacity="0.3",n.strokeWidth=i,0===a.shapeType)r=l.a.createElement("rect",Object.assign({id:a.id},n));else if(1===a.shapeType)n.r=n.width/2,n.cx=n.x+n.r,n.cy=n.y+n.r,r=l.a.createElement("circle",Object.assign({id:a.id},n));else if(2===a.shapeType){var c="".concat(n.x+n.width/2,",").concat(n.y),d="".concat(n.x,",").concat(n.y+n.height),u="".concat(n.x+n.width,",").concat(n.y+n.height);n.points="".concat(c," ").concat(d," ").concat(u),r=l.a.createElement("polygon",Object.assign({id:a.id},n))}else r=l.a.createElement("text",null,"No Shape Type Set");return a.link&&(s=l.a.createElement("rect",{height:n.height-i,width:n.width-i,x:n.x+i/2,y:n.y+i/2,fillOpacity:0,onClick:this.handleLinkClick,cursor:"pointer"})),l.a.createElement("g",{height:n.height,width:n.width},r,s,o,a.hidden&&l.a.createElement(kt,{shapeProps:n}))}}]),a}(n.PureComponent)),Pt=(a(71),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).checkFocus=function(){document.activeElement.title!==l.currentFocus?l.disableInteraction():setTimeout(l.checkFocus,1e3)},l.handlePlayIntent=function(){l.setState({iframePointerEvents:"auto"}),l.iframe.contentWindow.focus(),l.currentFocus=document.activeElement.title,setTimeout(l.checkFocus,1e3)},l.disableInteraction=function(){l.setState({iframePointerEvents:"none"})},l.state={iframePointerEvents:"none"},l.iframe=null,l.currentFocus=null,l}return Object(i.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.props,r=n.elementState,o=n.data,s=Object(h.a)({},this.props.data.styles),i=null,c=null;this.props.isSelected(o.id)?s.style={outline:"".concat(o.initialZoomLevel,"px dashed #5086F2")}:r.selected&&(s.style={outline:"".concat(o.initialZoomLevel,"px solid #666")},i=l.a.createElement("rect",Object.assign({},s,{fillOpacity:"0.3",fill:"#000000"})));var d=20*o.initialZoomLevel;s.fill="url(#diagonalHatch)",s.fillOpacity="1",s.stroke="#ccc",s.strokeOpacity="0.3",s.strokeWidth=d;var u=1;"none"===this.state.iframePointerEvents&&(u=.6);var m="https://www.youtube.com/embed/"+/(?:embed\/|v=)\b(.+?)(?![\w-])/g.exec(o.URL)[1];return e=l.a.createElement("foreignObject",{x:s.x,y:s.y,height:s.height,width:s.width,fill:"#000",pointerEvents:this.state.iframePointerEvents},l.a.createElement("iframe",{title:"youtubeVideo"+o.id,width:s.width/o.initialZoomLevel,height:s.height/o.initialZoomLevel,src:m,frameBorder:"0",allow:"clipboard-write; encrypted-media; picture-in-picture",allowFullScreen:!0,style:{transform:"scale(".concat(o.initialZoomLevel,")"),transformOrigin:"top",opacity:u},ref:function(e){a.iframe=e}})),t=l.a.createElement("rect",{id:o.id,x:s.x,y:s.y,height:s.height,width:s.width,fillOpacity:0}),"none"===this.state.iframePointerEvents&&(c=l.a.createElement("rect",{x:s.x+s.width/2-68*o.initialZoomLevel/2,y:s.y+s.height/2-48*o.initialZoomLevel/2,height:48*o.initialZoomLevel,width:68*o.initialZoomLevel,fillOpacity:0,cursor:"pointer",onClick:this.handlePlayIntent})),l.a.createElement("g",{height:s.height,width:s.width},t,e,c,i)}}]),a}(n.PureComponent)),Ut=(a(72),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e,t,a=this.props,n=a.elementState,r=a.data,o=Object(h.a)({},this.props.data.styles),s=null;return this.props.isSelected(r.id)?o.style={outline:"".concat(r.initialZoomLevel,"px dashed #5086F2")}:n.selected&&(o.style={outline:"".concat(r.initialZoomLevel,"px solid #666")},s=l.a.createElement("rect",Object.assign({},o,{fillOpacity:"0.3",fill:"#000000"}))),e=l.a.createElement("g",{transform:"translate(".concat(o.x," ").concat(o.y,") scale(").concat(o.width/24,")"),pointerEvents:"none"},l.a.createElement("text",{fontFamily:"'Noto Color Emoji', 'Apple Color Emoji', 'Segoe UI Emoji', Times, Symbola, Aegyptus, Code2000, Code2001, Code2002, Musica, serif, LastResort",fontSize:"24px",x:0,y:24,dy:-1,textLength:24,pointerEvents:"none",style:{userSelect:"none"}},r.emojiCharacterCode)),t=l.a.createElement("rect",Object.assign({id:r.id},o)),l.a.createElement("g",{height:o.height,width:o.width},t,e,s,r.hidden&&l.a.createElement(kt,{shapeProps:o}))}}]),a}(n.PureComponent)),It=(a(73),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handleDiceClick=function(e){e.stopPropagation(),l.props.handleUpdateElementProperty({id:[l.props.data.id],update:{diceNumber:l.generateRandomDiceNumber()}})},l.state={diceAnimation:null},l.audio=new Audio("/sounds/dice.mp3"),l}return Object(i.a)(a,[{key:"generateRandomDiceNumber",value:function(){return Math.floor(6*Math.random())+0}},{key:"render",value:function(){var e,t,a=this.props,n=a.elementState,r=a.data,o=Object(h.a)({},this.props.data.styles),s=null;this.props.isSelected(r.id)?(o.style={outlineWidth:"".concat(r.initialZoomLevel,"px")},o.className="elementSelectedByUser"):n.selected&&(o.style={outlineWidth:"".concat(r.initialZoomLevel,"px")},o.className="elementSelectedByOtherUser",s=l.a.createElement("rect",Object.assign({},o,{fillOpacity:"0.3",fill:"#000000"})));var i=15*r.initialZoomLevel;o.fill="url(#diagonalHatch)",o.fillOpacity="1",o.stroke="#ccc",o.strokeOpacity="0.3",o.strokeWidth=i,e=l.a.createElement("rect",Object.assign({id:r.id},o));var c=this.state.diceAnimation||r.diceNumber;return t=l.a.createElement("g",{transform:"translate(".concat(o.x," ").concat(o.y,") scale(").concat(o.width/40,")")},l.a.createElement("rect",{x:"0",y:"0",width:"40",height:"40",cursor:"pointer",fill:"#333",onClick:this.handleDiceClick}),[[[20,20]],[[10,30],[30,10]],[[10,30],[20,20],[30,10]],[[10,10],[10,30],[30,10],[30,30]],[[10,10],[10,30],[20,20],[30,10],[30,30]],[[10,10],[10,20],[10,30],[30,10],[30,20],[30,30]]][c].map((function(e){return l.a.createElement("circle",{key:"diceFace_".concat(e[0],"_").concat(e[1]),r:4,cx:e[0],cy:e[1],fill:"#fff",pointerEvents:"none"})}))),l.a.createElement("g",{height:o.height,width:o.width},e,t,s,r.hidden&&l.a.createElement(kt,{shapeProps:o}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.data.diceNumber!==this.props.data.diceNumber){var a=0;this.audio.play();var n=setInterval((function(){a>6?(t.setState({diceAnimation:null}),clearInterval(n)):t.setState({diceAnimation:t.generateRandomDiceNumber()}),a++}),200)}}}]),a}(n.PureComponent)),Ft=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.elements,a=e.elementState,n=e.handleTextEdit,r=e.handleSetCurrentElement,o=e.isSelected,s=e.isUniqueSelected,i=e.zoomLevel,c=e.animateToElement,d=e.loadRemoteBoard,h=e.handleUpdateElementProperty,u=[],m=Object.keys(t).map((function(e){var m=t[e],p=m.styles.width/i<20&&m.styles.height/i<20;return"shape"===m.type?l.a.createElement(jt,{key:m.id,data:m,styles:m.styles,fontStyles:m.fontStyles,elementState:a[m.id],handleTextEdit:n,handleSetCurrentElement:r,isSelected:o,lowDetail:p}):"text"===m.type?l.a.createElement(xt,{key:m.id,data:m,styles:m.styles,fontStyles:m.fontStyles,elementState:a[m.id],handleTextEdit:n,handleSetCurrentElement:r,isSelected:o,isUniqueSelected:s,lowDetail:p}):"postit"===m.type?l.a.createElement(_t,{key:m.id,data:m,styles:m.styles,fontStyles:m.fontStyles,elementState:a[m.id],handleTextEdit:n,handleSetCurrentElement:r,isSelected:o,lowDetail:p}):"line"===m.type?l.a.createElement(Tt,{key:m.id,data:m,styles:m.styles,fontStyles:m.fontStyles,elementState:a[m.id],handleTextEdit:n,handleSetCurrentElement:r,isSelected:o,lowDetail:p}):"image"===m.type?l.a.createElement(At,{key:m.id,data:m,styles:m.styles,fontStyles:m.fontStyles,elementState:a[m.id],handleTextEdit:n,handleSetCurrentElement:r,isSelected:o,lowDetail:p}):"slide"===m.type?(u.push(m.id),l.a.createElement(Ht,{key:m.id,data:m,styles:m.styles,fontStyles:m.fontStyles,elementState:a[m.id],handleTextEdit:n,handleSetCurrentElement:r,isSelected:o,slideNumber:u.length,lowDetail:p})):"link"===m.type?(u.push(m.id),l.a.createElement(Bt,{key:m.id,data:m,styles:m.styles,fontStyles:m.fontStyles,elementState:a[m.id],handleSetCurrentElement:r,isSelected:o,lowDetail:p,animateToElement:c,loadRemoteBoard:d})):"youtube"===m.type?l.a.createElement(Pt,{key:m.id,data:m,styles:m.styles,fontStyles:m.fontStyles,elementState:a[m.id],handleTextEdit:n,handleSetCurrentElement:r,isSelected:o,lowDetail:p}):"emoji"===m.type?l.a.createElement(Ut,{key:m.id,data:m,styles:m.styles,fontStyles:m.fontStyles,elementState:a[m.id],handleSetCurrentElement:r,isSelected:o,lowDetail:p}):"dice"===m.type?l.a.createElement(It,{key:m.id,data:m,styles:m.styles,fontStyles:m.fontStyles,elementState:a[m.id],handleSetCurrentElement:r,handleUpdateElementProperty:h,isSelected:o,lowDetail:p}):null}));return l.a.createElement(l.a.Fragment,null,m)}}]),a}(n.PureComponent),Vt=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).state={},l}return Object(i.a)(a,[{key:"render",value:function(){var e=10*this.props.zoomLevel,t=5*this.props.zoomLevel;return l.a.createElement(l.a.Fragment,null,l.a.createElement("pattern",{id:"diagonalHatch",width:e,height:e,patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse"},l.a.createElement("line",{x1:"0",y1:"0",x2:"0",y2:e,style:{stroke:"#ccc",strokeWidth:t,strokeOpacity:.2}})))}}]),a}(n.Component),Xt=(a(74),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(s.a)(this,a),(l=t.call(this,e,n)).handlePanStart=function(e,t,a){l.clearCanvasAnimations(),l.panEventTimeStamp=Date.now(),l.velocityX=0,l.velocityY=0},l.handlePanMove=function(e){var t=l.state,a=t.offsetX,n=t.offsetY,r=t.zoomLevel;l.setState({offsetX:a+e.movementX*-r,offsetY:n+e.movementY*-r});var o=Date.now(),s=o-l.panEventTimeStamp;l.velocityX_pixelsPerMilliSecond=e.movementX/s,l.velocityY_pixelsPerMilliSecond=e.movementY/s,l.panEventTimeStamp=o},l.animateToElement=function(e,t){var a,n,r=l.state,o=r.zoomLevel,s=r.elements[e],i=s.styles.height/o,c=s.styles.width/o;a=i/l.props.height*1.3*o,n=c/l.props.width*1.3*o;var d=Math.round(Math.max(a,n)),h=s.styles.x+s.styles.width/2,u=s.styles.y+s.styles.height/2,m={offsetX:h-l.props.width/2*d,offsetY:u-l.props.height/2*d,zoomLevel:d};l.animateToPosition(m,t)},l.clearCanvasAnimations=function(){l.canvasAnimations.forEach((function(e){clearTimeout(e)})),l.canvasAnimations=[]},l.handleTextEdit=function(e){var t=Object(h.a)({},l.state.elements),a=Object(h.a)({},l.state.elements[e]),n=Object(h.a)({},l.state.elements[e]);n.text="",t[e]=n,l.setState({textEditor:a,elements:t})},l.handleUpdatedText=function(e){var t=Object(h.a)({},l.state.elements),a=Object(h.a)({},t[e.id]);a.text=e.newText,a.fontStyle.fontSize=e.fontSize,a.unScaledFontSize=e.fontSize,a.padding=8*l.state.zoomLevel,t[e.id]=a,l.setState({elements:t,storeUndo:!0,textEditor:null})},l.selectGroupedElements=function(e){return l.getSelectedElements(e).forEach((function(t){t.groups.length&&t.groups.forEach((function(t){Object.keys(l.state.elements).filter((function(e){return-1!==l.state.elements[e].groups.indexOf(t)})).forEach((function(t){e[t]=Object(h.a)({},e[t]),e[t].selected=l.state.userID}))}))})),e},l.handleSetCurrentElement=function(e,t){var a=Object(h.a)({},l.state.elementState);t||Object.keys(a).forEach((function(e){if(l.isSelected(e)){var t=Object(h.a)({},a[e]);t.selected=!1,a[e]=t}}));var n=Object(h.a)({},a[e]);l.isSelected(e)&&t?n.selected=!1:l.isSelected(e)||!1!==a[e].selected?l.isSelected(e)&&!t&&(n.selected=l.state.userID):n.selected=l.state.userID,a[e]=n,a=l.selectGroupedElements(a),l.setState({elementState:a})},l.handleDeselectAllElements=function(){var e=l.deselectElements(l.state.elementState);l.setState({elementState:e})},l.deselectElements=function(e){var t=Object(h.a)({},e);return Object.keys(t).forEach((function(e){if(l.isSelected(e)){var a=Object(h.a)({},t[e]);a.selected=!1,t[e]=a}})),t},l.registerDragHandler=function(e,t){setTimeout((function(){var a={};t.dragStartHandler&&(a.handleDragStart=t.dragStartHandler.bind(Object(u.a)(l))),t.dragMoveHandler&&(a.handleDragMove=t.dragMoveHandler.bind(Object(u.a)(l))),t.dragEndHandler&&(a.handleDragEnd=t.dragEndHandler.bind(Object(u.a)(l))),t.clickHandler&&(a.handleClick=t.clickHandler.bind(Object(u.a)(l)));var n=Object(h.a)({},l.state.dragHandlers);n[e]=a,l.setState({dragHandlers:n})}))},l.removeDragHandler=function(e){var t=Object(h.a)({},l.state.dragHandlers);t[e]&&delete t[e],l.setState({dragHandlers:t})},l.handleSetElementHeight=function(e,t){var a=Number(t)*l.state.zoomLevel;if(l.state.elements[e].styles.height!==a){var n=Object(h.a)({},l.state.elements);n[e]=Object(h.a)({},n[e]),n[e].styles=Object(h.a)({},n[e].styles),n[e].styles.height=a,l.setState({elements:n})}},l.handleUpdateElementProperty=function(e){var t=Object(h.a)({},l.state.elements);e.id.forEach((function(a){if(e.update){var n=function e(t,a){var n=Object(h.a)({},t);return Object.keys(a).forEach((function(l){Array.isArray(a[l])&&Array.isArray(t[l])?n[l]=n[l].concat(a[l]):rt(a[l])&&rt(t[l])?n[l]=e(t[l],a[l]):n[l]=a[l]})),n}(t[a],e.update);t[a]=n}else if(e.remove){var l=function e(t,a){var n=Object(h.a)({},t);return Object.keys(a).forEach((function(l){Array.isArray(a[l])&&Array.isArray(t[l])?a[l].forEach((function(e){n[l]=n[l].filter((function(t){return t!==e}))})):rt(a[l])&&rt(t[l])?n[l]=e(t[l],a[l]):delete n[l]})),n}(t[a],e.remove);t[a]=l}})),l.setState({elements:t,storeUndo:!0})},l.handleUpdateElementsAndState=function(e){l.setState(e)},l.handleDeleteElements=function(){var e=Object(h.a)({},l.state.elements),t=Object(h.a)({},l.state.elementState);Object.keys(l.state.elementState).forEach((function(a){l.isSelected(a)&&(delete e[a],delete t[a])})),l.setState({elements:e,elementState:t,storeUndo:!0})},l.handleShiftElementPosition=function(e,t){var a={},n={},r=Object.keys(l.state.elements);t.forEach((function(t){var a=r.indexOf(t);r.splice(a,1),"forward"===e?r.splice(r.length,0,t):"backward"===e&&r.splice(0,0,t)})),r.forEach((function(e){a[e]=l.state.elements[e],n[e]=l.state.elementState[e]})),l.setState({elementState:n,elements:a,storeUndo:!0})},l.handleSelectElementsWithinArea=function(e,t,a,n){var r=l.state,o=r.elements,s=r.elementState,i=r.userID,c=r.zoomLevel,d=r.offsetX,u=r.offsetY,m=Object(h.a)({},s),p=e*c+d,v=t*c+u,f=a*c+d,g=n*c+u;Object.keys(o).forEach((function(e){var t=o[e],a=l.isSelected(e)||!1===m[e].selected,n=!1;t.styles.x>=p&&t.styles.x+t.styles.width<=f&&t.styles.y>=v&&t.styles.y+t.styles.height<=g&&(n=!0),n&&a&&(m[e]=Object(h.a)({},m[e]),m[e].selected=i)})),l.setState({elementState:m})},l.handleDuplicateElements=function(){var e=l.state,t=e.elements,a=e.elementState,n=e.zoomLevel,r=e.userID,o=l.getSelectedElements(a,r);if(o.length){var s=Object(h.a)({},t),i=Object(h.a)({},a),c={x:o[0].styles.x,x1:o[0].styles.x+o[0].styles.width+8*n};o.forEach((function(e){e.styles.x<c.x&&(c.x=e.styles.x);var t=e.styles.x+e.styles.width;t>c.x1&&(c.x1=t+8*n)}));var d=[];o.forEach((function(e){var t=C.a.generate(),n=nt(e),l=nt(a[e.id]);n.id=t,n.styles.x=c.x1+(n.styles.x-c.x),s[t]=n,i[t]=l,i[e.id]=Object(h.a)({},i[e.id]),i[e.id].selected=!1,d.push(n)}));var u={};d.forEach((function(e){e.groups.forEach((function(e){u[e]=!0}))})),d.forEach((function(e){var t=e.groups.map((function(e){if(!0===u[e]){var t=C.a.generate();u[e]=t}return u[e]}));e.groups=t})),l.setState({elementState:i,elements:s})}},l.updateBoardPosition=function(e){l.setState(e)},l.updateBoardName=function(e){l.setState({boardName:e})},l.updatePointerPosition=function(e){l.setState({pointerPosition:e})},l.toggleBoardShare=function(e){e?l.setState({shareBoard:e}):l.setState({shareBoard:!1})},l.isSelected=function(e,t){var a=l.state.userID;t||(t=l.state.elementState);var n=!1;return t[e]&&t[e].selected===a&&(n=!0),n},l.isLocked=function(e){var t=l.state.elements[e];return t?t.locked:null},l.isUniqueSelected=function(e){var t=l.state,a=t.elementState,n=t.userID,r=a[e].selected===n,o=0;return Object.keys(a).forEach((function(e){l.isSelected(e)&&o++})),r&&1===o},l.getState=function(){return Object(h.a)({},l.state)},l.getSlides=function(){var e=l.state.elements;return Object.keys(e).filter((function(t){return"slide"===e[t].type})).map((function(t){return{id:t,slideName:e[t].slideName}}))},l.changeSlideName=function(e,t){var a=l.state.elements,n=Object(h.a)({},a),r=Object(h.a)({},a[e]);r.slideName=t,n[e]=r,l.setState({elements:n})},l.shuntSelectedElements=function(e){var t=l.state,a=t.elements,n=t.elementState,r=t.zoomLevel,o=Object(h.a)({},a);l.getSelectedElements(n).forEach((function(t){var a=Object(h.a)({},t.styles);o[t.id].styles=a,"down"===e?a.y+=r:"up"===e?a.y-=r:"left"===e?a.x-=r:"right"===e&&(a.x+=r)})),l.setState({elements:o})},l.copy=function(){var e=l.state,t=e.elementState,a=e.userID,n=e.zoomLevel,r=e.offsetX,o=e.offsetY,s=l.getSelectedElements(t,a),i={type:"copy",elements:s,elementState:{},boundingBox:l.calculateSelectedElementsBoundingBox(s,n,r,o)};s.forEach((function(e){i.elementState[e.id]=Object(h.a)({},t[e.id])})),l.setState({pasteBuffer:i})},l.cut=function(){var e=l.state,t=e.elements,a=e.elementState,n=e.userID,r=e.zoomLevel,o=e.offsetX,s=e.offsetY,i=l.getSelectedElements(a,n),c={type:"cut",elements:[],elementState:{},boundingBox:l.calculateSelectedElementsBoundingBox(i,r,o,s)},d=Object(h.a)({},t),u=Object(h.a)({},a);i.forEach((function(e){c.elements.push(Object(h.a)({},e)),c.elementState[e.id]=Object(h.a)({},a[e.id]),delete d[e.id],delete u[e.id]})),l.setState({elements:d,elementState:u,pasteBuffer:c})},l.paste=function(){var e=l.state,t=e.elements,a=e.elementState,n=e.pointerPosition,r=e.pasteBuffer,o=Object(h.a)({},t),s=l.deselectElements(a);r.elements.forEach((function(e){var t=C.a.generate();o[t]=Object(h.a)({},e),o[t].id=t,s[t]=Object(h.a)({},r.elementState[e.id]),s[e.id]=Object(h.a)({},s[e.id]),s[e.id].selected=!1,o[t].styles=Object(h.a)({},e.styles);var a=n.x+(e.styles.x-r.boundingBox.rawX),l=n.y+(e.styles.y-r.boundingBox.rawY);o[t].styles.x=a,o[t].styles.y=l}));var i={elements:o,elementState:s};"cut"===r.type&&(i.pasteBuffer={type:null,elements:[],elementState:[]}),l.setState(i)},l.loadRemoteBoard=function(e){fetch(e).then((function(e){return e.json()})).then((function(e){var t=Object.assign({},l.state,e);l.setState(t)})).catch((function(e){return console.log(e)}))},l.loadTemplatesAndTutorials=function(){l.loadRemoteBoard("https://raw.githubusercontent.com/SimonKenyonShepard/miral_templates/main/whiteboardFile_splashScreen.wswb")},l.state={boardName:"new-board-"+(new Date).toLocaleDateString().replace(/\//g,""),boardID:C.a.generate(),userID:C.a.generate(),zoomLevel:50,offsetX:0,offsetY:0,tool:"pan",dragHandlers:{},clickHandler:null,elements:{},elementState:{},textEditor:null,storeUndo:!1,shareBoard:!1,multiUserUpdate:!1,pointerPosition:{x:0,y:0},pasteBuffer:{type:null,elements:[],elementState:[]}},l.canvasAnimations=[],l}return Object(i.a)(a,[{key:"handlePanEnd",value:function(e){}},{key:"animateToPosition",value:function(e,t){var a=this.state,n=a.offsetX,l=a.offsetY,r=a.zoomLevel,o=1e3*t/30,s=(e.offsetX-n)/o,i=(e.offsetY-l)/o,c=(e.zoomLevel-r)/o,d=Math.PI/o,h=n,u=l,m=r,p=0,v=0;this.clearCanvasAnimations();do{v++,p+=d,m+=Math.round(c*Math.pow(Math.sin(p),2)*2),h+=s*Math.pow(Math.sin(p),2)*2,u+=i*Math.pow(Math.sin(p),2)*2;var f=o*v;(function(e,t,a,n){var l=this;this.canvasAnimations.push(setTimeout((function(){l.setState({offsetX:e,offsetY:t,zoomLevel:a})}),n))}).bind(this)(h,u,m,f)}while(p<Math.PI)}},{key:"calculateSelectedElementsBoundingBox",value:function(e,t,a,n){if(e&&e.length>0){var l=e[0].styles.width,r=e[0].styles.height,o=e[0].styles.cx||e[0].styles.x,s=e[0].styles.cy||e[0].styles.y,i=o+l,c=s+r,d=0,h=0;return e.length>1&&(e.forEach((function(e){var t=e.styles.width,a=e.styles.height,n=e.styles.cx||e.styles.x,l=e.styles.cy||e.styles.y,r=n+t,d=l+a;n<o&&(o=n),r>i&&(i=r),l<s&&(s=l),d>c&&(c=d)})),d=i-o,h=c-s),{height:(h||r)/t,width:(d||l)/t,x:(o-a)/t,y:(s-n)/t,cx:(i-a)/t,cy:(c-n)/t,rawX:o,rawY:s,rawHeight:h||r,rawWidth:d||l}}return{height:0,width:0,x:0,y:0,cx:0,cy:0,rawX:0,rawY:0,rawHeight:0,rawWidth:0}}},{key:"getSelectedElements",value:function(e){var t=this,a=[];return Object.keys(e).forEach((function(n){t.isSelected(n,e)&&a.push(t.state.elements[n])})),a}},{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,n=this.state,r=n.offsetX,o=n.offsetY,s=n.zoomLevel,i=n.tool,c=n.elements,d=n.elementState,h=n.textEditor,u=t*s,m=a*s,p="".concat(r," ").concat(o," ").concat(u," ").concat(m),v=this.getSelectedElements(d),f=Object.keys(c),g=this.calculateSelectedElementsBoundingBox(v,s,r,o),y=(s-100*Math.floor(s/100))/100,S=96-72*y,b=o/s*-1-y,E={backgroundPosition:"".concat(r/s*-1-y,"px ").concat(b,"px"),backgroundSize:"".concat(S,"px ").concat(S,"px"),height:"".concat(a,"px"),width:"".concat(t,"px")};return l.a.createElement("div",{className:"boardWrapper ".concat(i),style:E},l.a.createElement(ct,{offsetX:this.state.offsetX,offsetY:this.state.offsetY,zoomLevel:this.state.zoomLevel,updateBoardPosition:this.updateBoardPosition,dragHandlers:this.state.dragHandlers,updatePointerPosition:this.updatePointerPosition,handlePanMove:this.handlePanMove,isSelected:this.isSelected,isLocked:this.isLocked},l.a.createElement("svg",{id:"board",width:"".concat(t,"px"),height:"".concat(a,"px"),viewBox:p},l.a.createElement("defs",null,l.a.createElement("filter",{height:"200%",id:"shadow1",width:"200%",x:"-50%",y:"-50%"},l.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"20"})),l.a.createElement("filter",{height:"200%",id:"shadow2",width:"200%",x:"-50%",y:"-50%"},l.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10"})),l.a.createElement("filter",{id:"shadow3"},l.a.createElement("feDropShadow",{ddx:"0",dy:"0",stdDeviation:"0.5"})),l.a.createElement("marker",{id:"arrow",markerWidth:"5",markerHeight:"5",refX:"2.5",refY:"2.5",orient:"auto",markerUnits:"strokeWidth"},l.a.createElement("polygon",{points:"0,0 0,5 5,2.5",fill:"#000"}))),l.a.createElement(Vt,{zoomLevel:s}),l.a.createElement(qe,{boundingBox:g,elementKeys:f,registerDragHandler:this.registerDragHandler,removeDragHandler:this.removeDragHandler}),l.a.createElement(Ft,{elements:c,elementState:d,handleTextEdit:this.handleTextEdit,handleSetCurrentElement:this.handleSetCurrentElement,isSelected:this.isSelected,isUniqueSelected:this.isUniqueSelected,animateToElement:this.animateToElement,loadRemoteBoard:this.loadRemoteBoard,handleUpdateElementProperty:this.handleUpdateElementProperty,zoomLevel:s})),l.a.createElement(Ke,{isLocked:v.filter((function(e){return e.locked})).length,isVisible:v.length>0,registerDragHandler:this.registerDragHandler,boundingBox:g}),l.a.createElement(he,{data:h,gridSpace:{offsetX:r,offsetY:o,zoomLevel:s},handleUpdatedText:this.handleUpdatedText,handleSetElementHeight:this.handleSetElementHeight}),l.a.createElement(Ge,{selectedElements:v,gridSpace:{offsetX:r,offsetY:o,zoomLevel:s},getSlides:this.getSlides,handleUpdateElementProperty:this.handleUpdateElementProperty,handleDeleteElements:this.handleDeleteElements,handleShiftElementPosition:this.handleShiftElementPosition,boundingBox:g}),l.a.createElement(ie,{handleSelectElementsWithinArea:this.handleSelectElementsWithinArea,removeDragHandler:this.removeDragHandler})),l.a.createElement(it,{elements:this.state.elements,elementState:this.state.elementState,storeUndo:this.state.storeUndo,handleUpdateElementsAndState:this.handleUpdateElementsAndState,boardName:this.state.boardName,updateBoardName:this.updateBoardName,toggleBoardShare:this.toggleBoardShare}),l.a.createElement($e,{getState:this.getState,handleUpdateElementsAndState:this.handleUpdateElementsAndState,loadTemplatesAndTutorials:this.loadTemplatesAndTutorials}),l.a.createElement(dt,{keyboardHandlers:this.state.keyboardHandlers,handleDeleteElements:this.handleDeleteElements,handleDuplicateElements:this.handleDuplicateElements,shuntSelectedElements:this.shuntSelectedElements,textEditor:h,copy:this.copy,cut:this.cut,paste:this.paste}),l.a.createElement(oe,{handleDeselectAllElements:this.handleDeselectAllElements,handleSelectElementsWithinArea:this.handleSelectElementsWithinArea,registerDragHandler:this.registerDragHandler,removeDragHandler:this.removeDragHandler,currentSelectedTool:this.state.tool}),l.a.createElement("div",{className:"bottomLeft"},l.a.createElement(St,{getSlides:this.getSlides,changeSlideName:this.changeSlideName,animateToElement:this.animateToElement})),l.a.createElement("div",{className:"bottomRight"},l.a.createElement(ce,{zoomLevel:s})),l.a.createElement(gt,{userID:this.state.userID,shareBoard:this.state.shareBoard,elements:this.state.elements,elementState:this.state.elementState,handleUpdateElementsAndState:this.handleUpdateElementsAndState,multiUserUpdate:this.state.multiUserUpdate,pointerPosition:this.state.pointerPosition,offsetX:this.state.offsetX,offsetY:this.state.offsetY,zoomLevel:this.state.zoomLevel}),l.a.createElement(Ct,null))}},{key:"componentDidMount",value:function(){this.registerDragHandler("board",{dragStartHandler:this.handlePanStart,dragMoveHandler:this.handlePanMove,dragEndHandler:this.handlePanEnd,clickHandler:this.handleDeselectAllElements});var e=window.localStorage.getItem("miral_isFirstUse"),t=-1===window.location.hash.indexOf("j=");!e&&t&&(this.loadTemplatesAndTutorials(),window.localStorage.setItem("miral_isFirstUse",!0))}}]),a}(n.Component)),Yt=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleWindowResize=function(){n.setState({width:document.body.clientWidth,height:document.body.clientHeight})},n.state={width:document.body.clientWidth,height:document.body.clientHeight},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.height,a=e.width;return l.a.createElement(me.Provider,{value:ue.light},l.a.createElement(g,null,l.a.createElement("div",{className:"App"},l.a.createElement(Xt,{width:a,height:t}))))}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize)}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Yt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[23,1,2]]]);
//# sourceMappingURL=main.3788c090.chunk.js.map