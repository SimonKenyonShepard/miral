(this.webpackJsonpmiral=this.webpackJsonpmiral||[]).push([[0],[,,,,,,,function(e,t,a){},,,,,function(e,t,a){},,,,,function(e,t,a){e.exports=a(62)},,,,,function(e,t,a){},function(e,t,a){},,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),o=a.n(l),i=(a(22),a(2)),s=a(3),c=a(5),d=a(4),h=(a(23),a(1)),u=a(8),p=(a(7),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleToolSelect=function(t){e.props.handleToolSelect(e.props.type),e.props.handleDrawCanvasShow(),e.props.registerDragHandler("drawCanvas",{dragStartHandler:e.props.handleDragStart,dragMoveHandler:e.props.handleDragMove,dragEndHandler:e.props.handleDragEnd,clickHandler:e.props.handleClick})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentSelectedTool,a="";return e.type===t&&(a="toolbar_tool_selected"),r.a.createElement("div",{className:"toolbar_tool toolbar_".concat(this.props.type," ").concat(a),onClick:this.handleToolSelect})}},{key:"componentDidUpdate",value:function(){this.props.autoActivate&&this.handleToolSelect()}}]),a}(n.Component)),m=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleSelectStart=function(e,t,a){r.props.handleShowSelectionArea(!0,e,t,a),r.setState({x:t,y:a,x1:t,y1:a})},r.handleSelectMove=function(e){var t={x:r.state.x,y:r.state.y,x1:r.state.x1+e.movementX,y1:r.state.y1+e.movementY};r.props.handleUpdateSelectionArea(t),r.setState(t)},r.handleSelectEnd=function(e){var t=r.state,a=t.x,n=t.y,l=t.x1,o=t.y1,i={x:a,y:n,x1:l,y1:o};a>l&&(i.x=l,i.x1=a),n>o&&(i.y=o,i.y1=n),r.props.handleSelectElementsWithinArea(i.x,i.y,i.x1,i.y1)},r.state={x:0,y:0,x1:0,y1:0},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.currentSelectedTool;return r.a.createElement(p,{type:"select",handleToolSelect:t,handleDrawCanvasShow:a,registerDragHandler:n,handleDragStart:this.handleSelectStart,handleDragMove:this.handleSelectMove,handleDragEnd:this.handleSelectEnd,currentSelectedTool:l})}}]),a}(n.Component),v=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleOpenSubMenu=function(e){e.stopPropagation(),r.setState({toolSubMenuOpen:!r.state.toolSubMenuOpen}),r.props.handleSetCurrentOpenSubMenu(r.props.type)},r.state={toolSubMenuOpen:!1},r}return Object(s.a)(a,[{key:"render",value:function(){var e="toolbar_submenu";return this.state.toolSubMenuOpen&&this.props.subMenuItems&&(e+=" toolbar_isVisible"),r.a.createElement("div",{className:"toolbar_tool toolbar_".concat(this.props.type),onClick:this.handleOpenSubMenu},r.a.createElement("div",{className:e},r.a.createElement("div",{className:"leftArrow"}),this.props.subMenuItems))}},{key:"componentDidUpdate",value:function(){this.state.toolSubMenuOpen&&this.props.openSubMenu!==this.props.type&&this.setState({toolSubMenuOpen:!1})}}]),a}(n.Component),f=a(6),S=a.n(f),g=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,r={};r.elements=Object(h.a)({},n.elements);var l=S.a.generate();r.elements[l]={id:l,type:"shape",shapeType:1,fixedRatio:"true",styles:{x:t*n.zoomLevel+n.offsetX-60*n.zoomLevel,y:a*n.zoomLevel+n.offsetY-60*n.zoomLevel,width:120*n.zoomLevel,height:120*n.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*n.zoomLevel,strokeDasharray:"0"},fontStyle:{fontSize:24*n.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:n.zoomLevel},r.elementState=Object(h.a)({},n.elementState),r.elementState[l]={selected:!0},r.dragStartHandler=null,r.dragMoveHandler=null,r.dragEndHandler=null,r.clickHandler=null,r.tool="pan",r.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(r)}},{key:"handleShapeDragStart",value:function(e,t,a,n){var r=this.state,l={};l.elements=Object(h.a)({},r.elements);var o=S.a.generate();l.elements[o]={id:o,type:"shape",shapeType:1,fixedRatio:"true",styles:{x:t*r.zoomLevel+r.offsetX,y:a*r.zoomLevel+r.offsetY,width:n*r.zoomLevel,height:n*r.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*r.zoomLevel,strokeDasharray:"0"},fontStyle:{fontSize:24*r.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:r.zoomLevel},l.elementState=Object(h.a)({},r.elementState),l.elementState[o]={selected:!0},l.elementBeingDrawn=o,l.storeUndo=!0,this.setState(l)}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"shapeCircle",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),y=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,r={};r.elements=Object(h.a)({},n.elements);var l=S.a.generate();r.elements[l]={id:l,type:"shape",shapeType:0,styles:{x:t*n.zoomLevel+n.offsetX-120*n.zoomLevel,y:a*n.zoomLevel+n.offsetY-60*n.zoomLevel,width:240*n.zoomLevel,height:120*n.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*n.zoomLevel,strokeDasharray:"0"},fontStyle:{fontSize:24*n.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:n.zoomLevel},r.elementState=Object(h.a)({},n.elementState),r.elementState[l]={selected:!0},r.dragStartHandler=null,r.dragMoveHandler=null,r.dragEndHandler=null,r.clickHandler=null,r.tool="pan",r.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(r)}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){var l=this.state,o={};o.elements=Object(h.a)({},l.elements);var i=S.a.generate();o.elements[i]={id:i,type:"shape",shapeType:0,styles:{x:t*l.zoomLevel+l.offsetX,y:a*l.zoomLevel+l.offsetY,width:n*l.zoomLevel,height:r*l.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*l.zoomLevel,strokeDasharray:"0"},fontStyle:{fontSize:24*l.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:l.zoomLevel},o.elementState=Object(h.a)({},l.elementState),o.elementState[i]={selected:!0},o.elementBeingDrawn=i,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"shapeRect",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),b=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,r={};r.elements=Object(h.a)({},n.elements);var l=S.a.generate();r.elements[l]={id:l,type:"shape",shapeType:2,styles:{x:t*n.zoomLevel+n.offsetX-60*n.zoomLevel,y:a*n.zoomLevel+n.offsetY-60*n.zoomLevel,width:120*n.zoomLevel,height:120*n.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*n.zoomLevel,strokeDasharray:"0"},fontStyle:{fontSize:24*n.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:n.zoomLevel},r.elementState=Object(h.a)({},n.elementState),r.elementState[l]={selected:!0},r.dragStartHandler=null,r.dragMoveHandler=null,r.dragEndHandler=null,r.clickHandler=null,r.tool="pan",r.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(r)}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){var l=this.state,o={};o.elements=Object(h.a)({},l.elements);var i=S.a.generate();o.elements[i]={id:i,type:"shape",shapeType:2,styles:{x:t*l.zoomLevel+l.offsetX,y:a*l.zoomLevel+l.offsetY,width:n*l.zoomLevel,height:r*l.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*l.zoomLevel,strokeDasharray:"0"},fontStyle:{fontSize:24*l.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:l.zoomLevel},o.elementState=Object(h.a)({},l.elementState),o.elementState[i]={selected:!0},o.elementBeingDrawn=i,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"shapeTriangle",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),E=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleToolSelect=function(e){r.props.currentSelectedTool!==e&&(r.setState({previousSelectedShapeTool:e}),r.props.handleToolSelect(e))},r.state={previousSelectedShapeTool:"shapeRect",menuActivated:!1},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleDrawCanvasShow,a=e.registerDragHandler,n=e.handleDragMove,l=e.handleDragEnd,o=e.currentSelectedTool,i={shapeRect:!1,shapeCircle:!1,shapeTriangle:!1};this.state.menuActivated&&(i[this.state.previousSelectedShapeTool]=!0);var s=[r.a.createElement(y,{key:"tool_shapeRect",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeRect}),r.a.createElement(g,{key:"tool_shapeCircle",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeCircle}),r.a.createElement(b,{key:"tool_shapeTriangle",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeTriangle})];return r.a.createElement(v,{type:"shape",subMenuItems:s,openSubMenu:this.props.openSubMenu,handleSetCurrentOpenSubMenu:this.props.handleSetCurrentOpenSubMenu})}},{key:"componentDidUpdate",value:function(e){this.props.openSubMenu!==e.openSubMenu&&"shape"===this.props.openSubMenu?this.setState({menuActivated:!0}):this.state.menuActivated&&this.setState({menuActivated:!1})}}]),a}(n.Component),O=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handlePostitClick",value:function(e){var t=this.state,a={};a.elements=Object(h.a)({},t.elements);var n=S.a.generate();a.elements[n]={id:n,type:"postit",subType:"square",fixedRatio:"true",predefinedColor:3,styles:{x:e.clientX*t.zoomLevel+t.offsetX,y:e.clientY*t.zoomLevel+t.offsetY,width:128*t.zoomLevel,height:128*t.zoomLevel,fillOpacity:0,strokeWidth:2*t.zoomLevel},fontStyle:{fontSize:24*t.zoomLevel,fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:""},a.elementState=Object(h.a)({},t.elementState),a.elementState[n]={};a.elementState[n].shapeType=Math.floor(4*Math.random())+0,a.dragStartHandler=null,a.dragMoveHandler=null,a.dragEndHandler=null,a.clickHandler=null,a.tool="pan",a.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(a)}},{key:"handlePostitDragStart",value:function(e){var t=this.state,a={};a.elements=Object(h.a)({},t.elements);var n=S.a.generate();a.elements[n]={id:n,type:"postit",subType:"square",fixedRatio:"true",predefinedColor:3,styles:{x:e.clientX*t.zoomLevel+t.offsetX,y:e.clientY*t.zoomLevel+t.offsetY,width:128*t.zoomLevel,height:128*t.zoomLevel,fillOpacity:0,strokeWidth:2*t.zoomLevel},fontStyle:{fontSize:24*t.zoomLevel,fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:""},a.elementState=Object(h.a)({},t.elementState),a.elementState[n]={};a.elementState[n].shapeType=Math.floor(4*Math.random())+0,a.storeUndo=!0,a.elementBeingDrawn=n,this.setState(a)}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.currentSelectedTool;return r.a.createElement(p,{type:"postit",handleToolSelect:t,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handlePostitClick,handleDragStart:this.handlePostitDragStart,handleDragMove:l,handleDragEnd:o,currentSelectedTool:i})}}]),a}(n.Component),w=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleTextClick",value:function(e,t,a){var n=this.state,r={};r.elements=Object(h.a)({},n.elements);var l=S.a.generate();r.elements[l]={id:l,type:"text",styles:{x:t*n.zoomLevel+n.offsetX,y:a*n.zoomLevel+n.offsetY,width:240*n.zoomLevel,height:24*1.4*n.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:0,strokeWidth:2*n.zoomLevel},fontStyle:{fontSize:24*n.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:""},r.elementState=Object(h.a)({},n.elementState),r.elementState[l]={selected:!0},r.dragStartHandler=null,r.dragMoveHandler=null,r.dragEndHandler=null,r.clickHandler=null,r.tool="pan",this.removeDragHandler("drawCanvas"),this.setState(r)}},{key:"handleTextDragStart",value:function(e,t,a,n,r){var l=this.state,o={};o.elements=Object(h.a)({},l.elements);var i=S.a.generate();o.elements[i]={id:i,type:"text",styles:{x:t*l.zoomLevel+l.offsetX,y:a*l.zoomLevel+l.offsetY,width:n*l.zoomLevel,height:r*l.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:0,strokeWidth:2*l.zoomLevel},fontStyle:{fontSize:24*l.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:""},o.elementState=Object(h.a)({},l.elementState),o.elementState[i]={selected:!0},o.elementBeingDrawn=i,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.currentSelectedTool;return r.a.createElement(p,{type:"text",handleToolSelect:t,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleTextClick,handleDragStart:this.handleTextDragStart,handleDragMove:l,handleDragEnd:o,currentSelectedTool:i})}}]),a}(n.Component),k=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,r={};r.elements=Object(h.a)({},n.elements);var l=S.a.generate();r.elements[l]={id:l,type:"line",shapeType:0,styles:{x:t*n.zoomLevel+n.offsetX,y:a*n.zoomLevel+n.offsetY-120*n.zoomLevel,width:120*n.zoomLevel,height:120*n.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*n.zoomLevel,strokeDasharray:"0",markerEnd:"url(#arrow)"},fontStyle:{fontSize:24*n.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:n.zoomLevel},r.elementState=Object(h.a)({},n.elementState),r.elementState[l]={selected:!0},r.dragStartHandler=null,r.dragMoveHandler=null,r.dragEndHandler=null,r.clickHandler=null,r.tool="pan",r.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(r)}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){var l=this.state,o={};o.elements=Object(h.a)({},l.elements);var i=S.a.generate();o.elements[i]={id:i,type:"line",shapeType:0,styles:{x:t*l.zoomLevel+l.offsetX,y:a*l.zoomLevel+l.offsetY-r*l.zoomLevel,width:n*l.zoomLevel,height:r*l.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*l.zoomLevel,strokeDasharray:"0",markerEnd:"url(#arrow)"},fontStyle:{fontSize:24*l.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:l.zoomLevel},o.elementState=Object(h.a)({},l.elementState),o.elementState[i]={selected:!0},o.elementBeingDrawn=i,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"lineStraight",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),D=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,r={};r.elements=Object(h.a)({},n.elements);var l=S.a.generate();r.elements[l]={id:l,type:"line",shapeType:1,styles:{x:t*n.zoomLevel+n.offsetX,y:a*n.zoomLevel+n.offsetY-120*n.zoomLevel,width:120*n.zoomLevel,height:120*n.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*n.zoomLevel,strokeDasharray:"0",markerEnd:"url(#arrow)"},fontStyle:{fontSize:24*n.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:n.zoomLevel},r.elementState=Object(h.a)({},n.elementState),r.elementState[l]={selected:!0},r.dragStartHandler=null,r.dragMoveHandler=null,r.dragEndHandler=null,r.clickHandler=null,r.tool="pan",r.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(r)}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){var l=this.state,o={};o.elements=Object(h.a)({},l.elements);var i=S.a.generate();o.elements[i]={id:i,type:"line",shapeType:1,styles:{x:t*l.zoomLevel+l.offsetX,y:a*l.zoomLevel+l.offsetY-r*l.zoomLevel,width:n*l.zoomLevel,height:r*l.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*l.zoomLevel,strokeDasharray:"0",markerEnd:"url(#arrow)"},fontStyle:{fontSize:24*l.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:l.zoomLevel},o.elementState=Object(h.a)({},l.elementState),o.elementState[i]={selected:!0},o.elementBeingDrawn=i,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"lineSmooth",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),C=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeDragStart",value:function(e,t,a,n,r){var l=this.state,o={};o.elements=Object(h.a)({},l.elements);var i=S.a.generate(),s=t*l.zoomLevel+l.offsetX,c=a*l.zoomLevel+l.offsetY;o.elements[i]={id:i,type:"line",shapeType:2,styles:{x:s,y:c,width:n*l.zoomLevel,height:r*l.zoomLevel,d:"",fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:l.zoomLevel,strokeDasharray:"0"},fontStyle:{fontSize:24*l.zoomLevel,fontFamily:"",fontWeight:"normal",fontStyle:"normal",textDecorationLine:"",color:"#080808",textAlign:"center"},text:"",initialZoomLevel:l.zoomLevel},o.elementState=Object(h.a)({},l.elementState),o.elementState[i]={selected:!0,pathBuffer:[],smoothingLevel:8,currentPath:"M ".concat(s," ").concat(c)},o.elementBeingDrawn=i,o.storeUndo=!0,this.setState(o)}},{key:"handleDragMove",value:function(e){var t=function(e,t,a){var n=t.length;if(n%2===1||n>=a){var r,l,o=0,i=0,s=0;for(l=e;l<n;l++)s++,o+=(r=t[l]).x,i+=r.y;return{x:o/s,y:i/s}}return null},a=this.state,n={};if(null!==a.elementBeingDrawn){var r=Object(h.a)({},a.elements),l=Object(h.a)({},a.elementState),o=function(e,a,n){var r=t(0,a,n),l="";if(r){e+=" L"+r.x+" "+r.y;for(var o=2;o<a.length;o+=2)l+=" L"+(r=t(o,a,n)).x+" "+r.y}return{currentPath:e,tmpPath:l}}((l=function(e,t,a){var n=t.zoomLevel,r=t.offsetX,l=t.offsetY,o=a[t.elementBeingDrawn],i=e.clientX*n+r,s=e.clientY*n+l;for(o.pathBuffer.push({x:i,y:s});o.pathBuffer.length>o.smoothingLevel;)o.pathBuffer.shift();return a}(e,a,l))[a.elementBeingDrawn].currentPath,l[a.elementBeingDrawn].pathBuffer,l[a.elementBeingDrawn].smoothingLevel);r[a.elementBeingDrawn].styles.d=o.currentPath+o.tmpPath,l[a.elementBeingDrawn].currentPath=o.currentPath,n.elements=r,n.elementState=l}this.setState(n)}},{key:"handleDragEnd",value:function(){var e={tool:"pan"};this.setState(e)}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.autoActivate,o=e.currentSelectedTool;return r.a.createElement(p,{type:"lineFreehand",handleToolSelect:t,currentSelectedTool:o,handleDrawCanvasShow:a,registerDragHandler:n,handleDragStart:this.handleShapeDragStart,handleDragMove:this.handleDragMove,handleDragEnd:this.handleDragEnd,autoActivate:l})}}]),a}(n.Component),x=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleToolSelect=function(e){r.props.currentSelectedTool!==e&&(r.setState({previousSelectedShapeTool:e}),r.props.handleToolSelect(e))},r.state={previousSelectedShapeTool:"shapeRect",menuActivated:!1},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleDrawCanvasShow,a=e.registerDragHandler,n=e.handleDragMove,l=e.handleDragEnd,o=e.currentSelectedTool,i={shapeRect:!1,shapeCircle:!1,shapeTriangle:!1};this.state.menuActivated&&(i[this.state.previousSelectedShapeTool]=!0);var s=[r.a.createElement(k,{key:"tool_lineStraight",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeRect}),r.a.createElement(D,{key:"tool_lineSmooth",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeCircle}),r.a.createElement(C,{key:"tool_lineFreehand",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeTriangle})];return r.a.createElement(v,{type:"line",subMenuItems:s,openSubMenu:this.props.openSubMenu,handleSetCurrentOpenSubMenu:this.props.handleSetCurrentOpenSubMenu})}},{key:"componentDidUpdate",value:function(e){this.props.openSubMenu!==e.openSubMenu&&"line"===this.props.openSubMenu?this.setState({menuActivated:!0}):this.state.menuActivated&&this.setState({menuActivated:!1})}}]),a}(n.Component),j=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){var n=this.state,r={};r.elements=Object(h.a)({},n.elements);var l=S.a.generate();r.elements[l]={id:l,type:"image",styles:{x:t*n.zoomLevel+n.offsetX-60*n.zoomLevel,y:a*n.zoomLevel+n.offsetY-60*n.zoomLevel,width:120*n.zoomLevel,height:120*n.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*n.zoomLevel,strokeDasharray:"0"},imgURL:"/miral/icons/insert_photo-noBorder-24px.svg",initialZoomLevel:n.zoomLevel},r.elementState=Object(h.a)({},n.elementState),r.elementState[l]={selected:!0},r.dragStartHandler=null,r.dragMoveHandler=null,r.dragEndHandler=null,r.clickHandler=null,r.tool="pan",r.storeUndo=!0,this.removeDragHandler("drawCanvas"),this.setState(r)}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){var l=this.state,o={};o.elements=Object(h.a)({},l.elements);var i=S.a.generate();o.elements[i]={id:i,type:"image",styles:{x:t*l.zoomLevel+l.offsetX,y:a*l.zoomLevel+l.offsetY,width:n*l.zoomLevel,height:r*l.zoomLevel,fillOpacity:0,fill:"#ffffff",stroke:"#000000",strokeOpacity:1,strokeWidth:2*l.zoomLevel,strokeDasharray:"0"},imgURL:"/miral/icons/insert_photo-noBorder-24px.svg",initialZoomLevel:l.zoomLevel},o.elementState=Object(h.a)({},l.elementState),o.elementState[i]={selected:!0},o.elementBeingDrawn=i,o.storeUndo=!0,this.setState(o)}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"image",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),M=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){alert("Thanks for your click! We are still working on this feature - but now that we know you want it, we will get it done faster!")}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"slide",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),z=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){alert("Thanks for your click! We are still working on this feature - but now that we know you want it, we will get it done faster!")}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"pdf",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),L=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){alert("Thanks for your click! We are still working on this feature - but now that we know you want it, we will get it done faster!")}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"iframe",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),T=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){alert("Thanks for your click! We are still working on this feature - but now that we know you want it, we will get it done faster!")}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"youtube",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),H=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){alert("Thanks for your click! We are still working on this feature - but now that we know you want it, we will get it done faster!")}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"timer",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),U=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShapeClick",value:function(e,t,a){alert("Thanks for your click! We are still working on this feature - but now that we know you want it, we will get it done faster!")}},{key:"handleShapeDragStart",value:function(e,t,a,n,r){}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.handleDrawCanvasShow,n=e.registerDragHandler,l=e.handleDragMove,o=e.handleDragEnd,i=e.autoActivate,s=e.currentSelectedTool;return r.a.createElement(p,{type:"poll",handleToolSelect:t,currentSelectedTool:s,handleDrawCanvasShow:a,registerDragHandler:n,handleClick:this.handleShapeClick,handleDragStart:this.handleShapeDragStart,handleDragMove:l,handleDragEnd:o,autoActivate:i})}}]),a}(n.Component),B=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleToolSelect=function(e){r.props.currentSelectedTool!==e&&(r.setState({previousSelectedShapeTool:e}),r.props.handleToolSelect(e))},r.state={previousSelectedShapeTool:"shapeRect",menuActivated:!1},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleDrawCanvasShow,a=e.registerDragHandler,n=e.handleDragMove,l=e.handleDragEnd,o=e.currentSelectedTool,i={shapeRect:!1,shapeCircle:!1,shapeTriangle:!1};this.state.menuActivated&&(i[this.state.previousSelectedShapeTool]=!0);var s=[r.a.createElement(M,{key:"tool_slide",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeRect}),r.a.createElement(z,{key:"tool_pdf",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeCircle}),r.a.createElement(L,{key:"tool_iframe",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeTriangle}),r.a.createElement(T,{key:"tool_youtube",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeTriangle}),r.a.createElement(H,{key:"tool_timer",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeTriangle}),r.a.createElement(U,{key:"tool_poll",handleToolSelect:this.handleToolSelect,handleDrawCanvasShow:t,registerDragHandler:a,handleDragMove:n,handleDragEnd:l,currentSelectedTool:o,autoActivate:i.shapeTriangle})];return r.a.createElement(v,{type:"more",subMenuItems:s,openSubMenu:this.props.openSubMenu,handleSetCurrentOpenSubMenu:this.props.handleSetCurrentOpenSubMenu})}},{key:"componentDidUpdate",value:function(e){this.props.openSubMenu!==e.openSubMenu&&"more"===this.props.openSubMenu?this.setState({menuActivated:!0}):this.state.menuActivated&&this.setState({menuActivated:!1})}}]),a}(n.Component),N=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleSetCurrentOpenSubMenu=function(e){r.setState({openSubMenu:e})},r.state={openSubMenu:null},r}return Object(s.a)(a,[{key:"handleElementDragMove",value:function(e){var t=this.state,a={};if(null!==t.elementBeingDrawn){var n=Object(h.a)({},t.elements);if(n[t.elementBeingDrawn].fixedRatio){var r=e.movementX;e.movementY>r&&(r=e.movementY),n[t.elementBeingDrawn].styles.width+=r*t.zoomLevel,n[t.elementBeingDrawn].styles.height+=r*t.zoomLevel}else n[t.elementBeingDrawn].styles.width+=e.movementX*t.zoomLevel,n[t.elementBeingDrawn].styles.height+=e.movementY*t.zoomLevel;a.elements=n}this.setState(a)}},{key:"handleDragEnd",value:function(){var e={tool:"pan"};this.setState(e)}},{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.registerDragHandler,n=e.handleShowSelectionArea,l=e.handleUpdateSelectionArea,o=e.handleDrawCanvasShow,i=e.handleSelectElementsWithinArea,s=e.currentSelectedTool;return r.a.createElement("div",{className:"toolbar_container"},r.a.createElement("div",{className:"toolbar"},r.a.createElement(m,{handleToolSelect:t,handleDrawCanvasShow:o,registerDragHandler:a,handleShowSelectionArea:n,handleUpdateSelectionArea:l,handleSelectElementsWithinArea:i,currentSelectedTool:s,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),r.a.createElement(E,{handleToolSelect:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:s,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),r.a.createElement(O,{handleToolSelect:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:s,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),r.a.createElement(w,{handleToolSelect:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:s,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),r.a.createElement(x,{handleToolSelect:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:s,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu}),r.a.createElement(j,{handleToolSelect:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:s}),r.a.createElement(B,{handleToolSelect:t,handleDrawCanvasShow:o,registerDragHandler:a,handleDragMove:this.handleElementDragMove,handleDragEnd:this.handleDragEnd,currentSelectedTool:s,openSubMenu:this.state.openSubMenu,handleSetCurrentOpenSubMenu:this.handleSetCurrentOpenSubMenu})))}},{key:"componentDidUpdate",value:function(e,t){"pan"===this.props.currentSelectedTool&&null!==this.state.openSubMenu&&t.openSubMenu===this.state.openSubMenu&&this.setState({openSubMenu:null})}}]),a}(n.Component),A=(a(32),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleDrawCanvasShow=function(){r.setState({drawCanvasVisible:!0})},r.handleDrawCanvasHide=function(){r.props.removeDragHandler("drawCanvas"),r.props.handleToolSelect("pan"),r.setState(Object.assign({},{selectAreaVisible:!1,selectAreaPosition:{x:0,y:0,width:0,height:0}},{drawCanvasVisible:!1}))},r.handleShowSelectionArea=function(e,t,a,n){e&&r.setState({selectAreaVisible:e,selectAreaPosition:{x:a,y:n,width:t.movementX,height:t.movementY}})},r.handleUpdateSelectionArea=function(e){var t={width:e.x1-e.x,height:e.y1-e.y};e.x>e.x1&&(t.x=e.x1,t.width=e.x-e.x1),e.y>e.y1&&(t.y=e.y1,t.height=e.y-e.y1),r.setState({selectAreaPosition:Object.assign({},r.state.selectAreaPosition,t)})},r.state={drawCanvasVisible:!1,selectAreaVisible:!1,selectAreaPosition:{x:0,y:0,width:0,height:0}},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleToolSelect,a=e.registerDragHandler,n=e.handleSelectElementsWithinArea,l=e.currentSelectedTool,o=this.state,i=o.selectAreaVisible,s=o.selectAreaPosition,c={display:"none"};i&&(c.display="block",c.transform="translate3d(".concat(s.x,"px,").concat(s.y,"px, 0)"),c.width="".concat(s.width,"px"),c.height="".concat(s.height,"px"));var d={display:"none"};return this.state.drawCanvasVisible&&(d.display="block"),r.a.createElement("div",{className:"tools"},r.a.createElement("div",{id:"drawCanvas",style:d,onMouseUp:this.handleDrawCanvasHide},r.a.createElement("div",{className:"selectionArea",style:c})),r.a.createElement(N,{handleToolSelect:t,registerDragHandler:a,handleDrawCanvasShow:this.handleDrawCanvasShow,handleShowSelectionArea:this.handleShowSelectionArea,handleUpdateSelectionArea:this.handleUpdateSelectionArea,handleSelectElementsWithinArea:n,currentSelectedTool:l}))}}]),a}(n.Component)),P=(a(33),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"zoomLevel"},"Scale : ",this.props.zoomLevel,"%")}}]),a}(n.Component)),_=(a(34),{text:{isExpandToFit:!0,isAutoResize:!1},shape:{isExpandToFit:!1,isAutoResize:!0},postit:{isExpandToFit:!1,isAutoResize:!0}}),V=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleLostFocus=function(e){r.props.handleUpdatedText({id:r.props.data.id,newText:(r.textInput.innerText||r.textInput.textContent).trim(),fontSize:r.state.fontSize})},r.handleKeyPress=function(){var e=_[r.props.data.type],t=e.isAutoResize,a=e.isExpandToFit;if(t&&r.textContainer.scrollHeight>r.textContainer.clientHeight){var n=0;n=r.state.fontSize>8*r.props.gridSpace.zoomLevel?r.state.fontSize-8*r.props.gridSpace.zoomLevel:r.state.fontSize/2,r.setState({fontSize:n})}else a&&r.textContainer.scrollHeight>r.textContainer.clientHeight&&r.props.handleSetElementHeight(r.props.data.id,r.textContainer.scrollHeight)},r.handlePaste=function(e){e.preventDefault(),document.execCommand("inserttext",!1,e.clipboardData.getData("text/plain"))},r.handleGotFocus=function(e){r.setState({fontSize:r.props.data.fontStyle.fontSize})},r.state={fontSize:24*e.gridSpace.zoomLevel},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.gridSpace,l={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",visibility:"hidden"},o="",i="blank";if(a&&a.id&&a.styles){var s=a.styles,c=(s.x||s.cx)/n.zoomLevel-n.offsetX/n.zoomLevel,d=(s.y||s.cy)/n.zoomLevel-n.offsetY/n.zoomLevel,h=s.width/n.zoomLevel,u=s.height/n.zoomLevel;l.top="".concat(d,"px"),l.left="".concat(c,"px"),l.height="".concat(u,"px"),l.width="".concat(h,"px"),l.visibility="visible",l.overflow="scroll",a.text.length>0&&(o=a.text.split(/\n|\r/).map((function(e,t){return r.a.createElement("div",{key:"editor_".concat(a.id,"_").concat(e,"_").concat(t)},e)}))),i=this.props.data.id}return r.a.createElement("div",{style:l,onKeyPress:this.handleKeyPress,ref:function(t){e.textContainer=t}},r.a.createElement("div",{key:"textEditor_".concat(i),contentEditable:!0,ref:function(t){e.textInput=t},className:"textContainer",onBlur:this.handleLostFocus,onFocus:this.handleGotFocus,onPaste:this.handlePaste,suppressContentEditableWarning:!0,style:{fontSize:this.state.fontSize/this.props.gridSpace.zoomLevel}},o))}},{key:"componentDidUpdate",value:function(e,t){if(this.textInput.focus(),!!this.props.data&&this.props.data.text.length>0&&document.createRange){var a=document.createRange();a.selectNodeContents(this.textInput),a.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(a)}}}]),a}(n.Component),W={light:{preDefinedColors:["#FC72A6","#1B8CA6","#C8DE02","#EBE000","#F2A105"],primaryColors:["#ffffff","#000000","#999"]},dark:{}},X=r.a.createContext(W.light),F=(a(35),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleSelectColor=function(){e.props.handleUpdateElementProperty({property:"predefinedColor",value:e.props.colorID})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"availableColor",style:{backgroundColor:this.props.color},onClick:this.handleSelectColor})}}]),a}(n.Component)),Y=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleOpenSubMenu=function(){r.setState({subMenuOpen:!r.state.subMenuOpen}),r.props.handleSetCurrentOpenSubMenu("PredefinedColorPicker")},r.state={subMenuOpen:!1},r}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"PredefinedColorPicker"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.context,a={backgroundColor:t.preDefinedColors[this.props.fillColor]},n="predefinedColorPicker_submenu";return this.state.subMenuOpen&&(n+=" isVisible"),r.a.createElement("div",{className:"predefinedColorPicker"},r.a.createElement("div",{className:"selectedColor",style:a,onClick:this.handleOpenSubMenu,title:"Change color"}),r.a.createElement("div",{className:n,onClick:this.handleOpenSubMenu},r.a.createElement("div",{className:"arrow"}),t.preDefinedColors.map((function(t,a){return r.a.createElement(F,{key:"preDefinedColorOption_"+t,color:t,colorID:a,handleUpdateElementProperty:e.props.handleUpdateElementProperty})}))))}}]),a}(n.Component);Y.contextType=X;var R=Y,I=(a(36),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleSelectColor=function(){e.props.handleUpdateColor(e.props.color)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"availableColor",style:{backgroundColor:this.props.color},onClick:this.handleSelectColor})}}]),a}(n.Component)),Z=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleSelectColor=function(){e.props.handleOpacityChange({target:{value:0}})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"availableColor",style:{backgroundColor:"#fff",border:"1px solid #999"},onClick:this.handleSelectColor},r.a.createElement("div",{className:"transparentLine"}))}}]),a}(n.Component),J=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleOpenSubMenu=function(){r.setState({subMenuOpen:!r.state.subMenuOpen}),r.props.handleSetCurrentOpenSubMenu("CustomColorPicker")},r.handleUpdateColor=function(e){var t=r.props.currentStyles.fillOpacity;0===t&&(t=1),r.props.handleUpdateElementProperty({property:"styles",value:Object(h.a)(Object(h.a)({},r.props.currentStyles),{},{fill:e,fillOpacity:t})})},r.handleOpacityChange=function(e){r.props.handleUpdateElementProperty({property:"styles",value:Object(h.a)(Object(h.a)({},r.props.currentStyles),{},{fillOpacity:e.target.value})})},r.state={subMenuOpen:!1},r}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"CustomColorPicker"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.context,a={backgroundColor:this.props.currentStyles.fill},n="predefinedColorPicker_submenu";return this.state.subMenuOpen&&(n+=" isVisible"),r.a.createElement("div",{className:"predefinedColorPicker"},r.a.createElement("div",{className:"selectedColor",style:a,onClick:this.handleOpenSubMenu,title:"Change color"}),r.a.createElement("div",{className:n},r.a.createElement("div",{className:"arrow"}),r.a.createElement(Z,{key:"customColorOption_transparent",handleOpacityChange:this.handleOpacityChange}),t.preDefinedColors.map((function(t,a){return r.a.createElement(I,{key:"preDefinedColorOption_"+t,color:t,colorID:a,handleUpdateColor:e.handleUpdateColor})})),r.a.createElement("div",{className:"opacityPicker"},r.a.createElement("div",{className:"opacityLabel"},"Opacity:"),r.a.createElement("input",{type:"number",id:"opacity",name:"opacity",min:"0",max:"1",step:"0.1",onChange:this.handleOpacityChange,value:this.props.currentStyles.fillOpacity||0}))))}}]),a}(n.Component);J.contextType=X;var K=J,Q=(a(37),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleSelectColor=function(){e.props.handleUpdateColor(e.props.color)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"availableColor",style:{backgroundColor:this.props.color},onClick:this.handleSelectColor})}}]),a}(n.Component)),G=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleSelectColor=function(){e.props.handleOpacityChange({target:{value:0}})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"availableColor",style:{backgroundColor:"#fff",border:"1px solid #999"},onClick:this.handleSelectColor},r.a.createElement("div",{className:"transparentLine"}))}}]),a}(n.Component),q=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleOpenSubMenu=function(){r.setState({subMenuOpen:!r.state.subMenuOpen}),r.props.handleSetCurrentOpenSubMenu("CustomBorderColorPicker")},r.handleUpdateColor=function(e){var t=r.props.currentStyles.strokeOpacity;0===t&&(t=1),r.props.handleUpdateElementProperty({property:"styles",value:Object(h.a)(Object(h.a)({},r.props.currentStyles),{},{stroke:e,strokeOpacity:t})})},r.handleOpacityChange=function(e){r.props.handleUpdateElementProperty({property:"styles",value:Object(h.a)(Object(h.a)({},r.props.currentStyles),{},{strokeOpacity:e.target.value})})},r.state={subMenuOpen:!1},r}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"CustomBorderColorPicker"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.context,a={borderColor:this.props.currentStyles.stroke},n="predefinedColorPicker_submenu";return this.state.subMenuOpen&&(n+=" isVisible"),r.a.createElement("div",{className:"predefinedColorPicker"},r.a.createElement("div",{className:"selectedBorderColor",style:a,onClick:this.handleOpenSubMenu,title:"Change border color"}),r.a.createElement("div",{className:n},r.a.createElement("div",{className:"arrow"}),r.a.createElement(G,{key:"customColorOption_transparent",handleOpacityChange:this.handleOpacityChange}),t.primaryColors.map((function(t,a){return r.a.createElement(Q,{key:"preDefinedColorOption_"+t,color:t,colorID:a,handleUpdateColor:e.handleUpdateColor})})),r.a.createElement("div",{className:"opacityPicker"},r.a.createElement("div",{className:"opacityLabel"},"Opacity:"),r.a.createElement("input",{type:"number",id:"opacity",name:"opacity",min:"0",max:"1",step:"0.1",onChange:this.handleOpacityChange,value:this.props.currentStyles.strokeOpacity||0}))))}}]),a}(n.Component);q.contextType=X;var $=q,ee=(a(38),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleOpenSubMenu=function(){r.setState({subMenuOpen:!r.state.subMenuOpen}),r.props.handleSetCurrentOpenSubMenu("BorderStyle")},r.handleSolidChange=function(){r.props.handleUpdateElementProperty({property:"styles",value:Object(h.a)(Object(h.a)({},r.props.currentStyles),{},{strokeDasharray:"0"})})},r.handleDashedChange=function(){var e=4*r.props.initialZoomLevel+" "+2*r.props.initialZoomLevel;r.props.handleUpdateElementProperty({property:"styles",value:Object(h.a)(Object(h.a)({},r.props.currentStyles),{},{strokeDasharray:e})})},r.handleDottedChange=function(){var e=String(2*r.props.initialZoomLevel);r.props.handleUpdateElementProperty({property:"styles",value:Object(h.a)(Object(h.a)({},r.props.currentStyles),{},{strokeDasharray:e})})},r.handleWidthChange=function(e){r.props.handleUpdateElementProperty({property:"styles",value:Object(h.a)(Object(h.a)({},r.props.currentStyles),{},{strokeWidth:e.target.value*r.props.initialZoomLevel})})},r.state={subMenuOpen:!1},r}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"BorderStyle"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e="predefinedColorPicker_submenu";this.state.subMenuOpen&&(e+=" isVisible");var t="0"===this.props.currentStyles.strokeDasharray?"selected":null,a=this.props.currentStyles.strokeDasharray===4*this.props.initialZoomLevel+" "+2*this.props.initialZoomLevel?"selected":null,n=this.props.currentStyles.strokeDasharray===String(2*this.props.initialZoomLevel)?"selected":null,l=Math.ceil(this.props.currentStyles.strokeWidth/this.props.initialZoomLevel);return r.a.createElement("div",{className:"fontStyle"},r.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Change border styles"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{fill:"#333",d:"M3 16h5v-2H3v2zm6.5 0h5v-2h-5v2zm6.5 0h5v-2h-5v2zM3 20h2v-2H3v2zm4 0h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM3 12h8v-2H3v2zm10 0h8v-2h-8v2zM3 4v4h18V4H3z"}))),r.a.createElement("div",{className:e},r.a.createElement("div",{className:"arrow"}),r.a.createElement("div",{className:"editor_subMenu_icon ".concat(t),onClick:this.handleSolidChange},r.a.createElement("svg",{viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fill:"#333",d:"m3,10l0,4l18,0l0,-4l-18,0z"}))),r.a.createElement("div",{className:"editor_subMenu_icon ".concat(a),onClick:this.handleDashedChange},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:"#333",d:"m3,13l5,0l0,-2l-5,0l0,2zm6.5,0l5,0l0,-2l-5,0l0,2zm6.5,0l5,0l0,-2l-5,0l0,2z"}))),r.a.createElement("div",{className:"editor_subMenu_icon ".concat(n),onClick:this.handleDottedChange},r.a.createElement("svg",{viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fill:"#333",d:"m3,13l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2z"}))),r.a.createElement("div",{className:"opacityPicker"},r.a.createElement("div",{className:"opacityLabel"},"Width:"),r.a.createElement("input",{type:"number",id:"opacity",name:"opacity",min:"1",max:"10",step:"1",onChange:this.handleWidthChange,value:l}))))}}]),a}(n.Component)),te=(a(39),["Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Baskerville","Courier New","Georgia","Lucida Bright","Lucida Sans Typewriter","Palatino","Tahoma","Times New Roman","Trebuchet MS","Verdana"]),ae=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleOpenSubMenu=function(){r.setState({subMenuOpen:!r.state.subMenuOpen}),r.props.handleSetCurrentOpenSubMenu("FontStyle")},r.handleBoldChange=function(){var e="normal";"normal"===r.props.fontStyle.fontWeight&&(e="bold"),r.props.handleUpdateElementProperty({property:"fontStyle",value:Object(h.a)(Object(h.a)({},r.props.fontStyle),{},{fontWeight:e})})},r.handleItalicChange=function(){var e="normal";"normal"===r.props.fontStyle.fontStyle&&(e="italic"),r.props.handleUpdateElementProperty({property:"fontStyle",value:Object(h.a)(Object(h.a)({},r.props.fontStyle),{},{fontStyle:e})})},r.handleUnderlineChange=function(){var e=r.props.fontStyle.textDecorationLine;e=-1===r.props.fontStyle.textDecorationLine.indexOf("underline")?"underline "+e:e.replace("underline",""),r.props.handleUpdateElementProperty({property:"fontStyle",value:Object(h.a)(Object(h.a)({},r.props.fontStyle),{},{textDecorationLine:e})})},r.handleStrikeThroughChange=function(){var e=r.props.fontStyle.textDecorationLine;-1===r.props.fontStyle.textDecorationLine.indexOf("line-through")?e+=" line-through":e=e.replace("line-through",""),r.props.handleUpdateElementProperty({property:"fontStyle",value:Object(h.a)(Object(h.a)({},r.props.fontStyle),{},{textDecorationLine:e})})},r.handleFontChange=function(e){r.props.fontStyle.fontFamily!==e.target.value&&r.props.handleUpdateElementProperty({property:"fontStyle",value:Object(h.a)(Object(h.a)({},r.props.fontStyle),{},{fontFamily:e.target.value})})},r.state={subMenuOpen:!1},r}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"FontStyle"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e="predefinedColorPicker_submenu";this.state.subMenuOpen&&(e+=" isVisible");var t="bold"===this.props.fontStyle.fontWeight?"selected":null,a="italic"===this.props.fontStyle.fontStyle?"selected":null,n=-1!==this.props.fontStyle.textDecorationLine.indexOf("underline")?"selected":null,l=-1!==this.props.fontStyle.textDecorationLine.indexOf("line-through")?"selected":null;return r.a.createElement("div",{className:"fontStyle"},r.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Change font styles"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:"#333",d:"M9 4v3h5v12h3V7h5V4H9zm-6 8h3v7h3v-7h3V9H3v3z"}))),r.a.createElement("div",{className:e},r.a.createElement("div",{className:"arrow"}),r.a.createElement("div",{className:"editor_subMenu_icon ".concat(t),onClick:this.handleBoldChange},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:"#333",d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}))),r.a.createElement("div",{className:"editor_subMenu_icon ".concat(a),onClick:this.handleItalicChange},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:"#333",d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"}))),r.a.createElement("div",{className:"editor_subMenu_icon ".concat(n),onClick:this.handleUnderlineChange},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:"#333",d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}))),r.a.createElement("div",{className:"editor_subMenu_icon ".concat(l),onClick:this.handleStrikeThroughChange},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:"#333",d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"}))),r.a.createElement("div",{className:"fontFamily"},r.a.createElement("select",{value:this.props.fontStyle.fontFamily,onChange:this.handleFontChange},te.map((function(e){return r.a.createElement("option",{key:"fontSelector_".concat(e)},e)}))))))}}]),a}(n.Component);a(40);function ne(e){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:e.iconColor,d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}))}function re(e){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:e.iconColor,d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}))}function le(e){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:e.iconColor,d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}))}var oe=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleOpenSubMenu=function(){r.setState({subMenuOpen:!r.state.subMenuOpen}),r.props.handleSetCurrentOpenSubMenu("TextAlignment")},r.handleLeftChange=function(){r.props.handleUpdateElementProperty({property:"fontStyle",value:Object(h.a)(Object(h.a)({},r.props.fontStyle),{},{textAlign:"left"})})},r.handleRightChange=function(){r.props.handleUpdateElementProperty({property:"fontStyle",value:Object(h.a)(Object(h.a)({},r.props.fontStyle),{},{textAlign:"right"})})},r.handleCenterChange=function(){r.props.handleUpdateElementProperty({property:"fontStyle",value:Object(h.a)(Object(h.a)({},r.props.fontStyle),{},{textAlign:"center"})})},r.state={subMenuOpen:!1},r}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"TextAlignment"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e="predefinedColorPicker_submenu";this.state.subMenuOpen&&(e+=" isVisible");var t="left"===this.props.fontStyle.textAlign?"selected":null,a="center"===this.props.fontStyle.textAlign?"selected":null,n="right"===this.props.fontStyle.textAlign?"selected":null,l=r.a.createElement(ne,{iconColor:"#333"});return t?l=r.a.createElement(re,{iconColor:"#333"}):n&&(l=r.a.createElement(le,{iconColor:"#333"})),r.a.createElement("div",{className:"editor_option"},r.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Change text alignment"},l),r.a.createElement("div",{className:e,onClick:this.handleOpenSubMenu},r.a.createElement("div",{className:"arrow"}),r.a.createElement("div",{className:"editor_subMenu_icon ".concat(t),onClick:this.handleLeftChange},r.a.createElement(re,{iconColor:"#333"})),r.a.createElement("div",{className:"editor_subMenu_icon ".concat(a),onClick:this.handleCenterChange},r.a.createElement(ne,{iconColor:"#333"})),r.a.createElement("div",{className:"editor_subMenu_icon ".concat(n),onClick:this.handleRightChange},r.a.createElement(le,{iconColor:"#333"}))))}}]),a}(n.Component),ie=(a(41),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleOpenSubMenu=function(){r.setState({subMenuOpen:!r.state.subMenuOpen})},r.state={subMenuOpen:!1},r}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"editor_option"},r.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Add link to this element"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:"#333",d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}))))}}]),a}(n.Component)),se=(a(42),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleBringForward=function(){r.props.handleShiftElementPosition("forward",r.props.ids)},r.handleSendBackward=function(){r.props.handleShiftElementPosition("backward",r.props.ids)},r.state={},r}return Object(s.a)(a,[{key:"render",value:function(){var e="forward"===this.props.type;return r.a.createElement("div",{className:"editor_option"},e?r.a.createElement("div",{className:"editor_icon",title:"Bring forward",onClick:this.handleBringForward},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{fill:"#333",d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm12 12h2v-2h-2v2zm6-18H7v14h14V3zm-2 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2zm-4 0h2v-2H3v2z"}))):r.a.createElement("div",{className:"editor_icon",title:"Send backwards",onClick:this.handleSendBackward},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M9 7H7v2h2V7zm0 4H7v2h2v-2zm4 4h-2v2h2v-2zm0-12h-2v2h2V3zM9 3H7v2h2V3zm12 0h-2v2h2V3zm0 12h-2v2h2v-2zM9 15H7v2h2v-2zm10-2h2v-2h-2v2zm0-4h2V7h-2v2zM5 7H3v14h14v-2H5V7zm10-2h2V3h-2v2zm0 12h2v-2h-2v2z"}))))}}]),a}(n.Component)),ce=(a(43),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleToggleLock=function(){r.setState({isLocked:!r.state.isLocked})},r.state={isLocked:!1},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.isLocked;return r.a.createElement("div",{className:"editor_option"},r.a.createElement("div",{className:"editor_icon",onClick:this.handleToggleLock,title:"Lock this element from changes"},e?r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("g",{fill:"none"},r.a.createElement("path",{d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M0 0h24v24H0V0z",opacity:".87"})),r.a.createElement("path",{fill:"#333",d:"M20 8h-3V6.21c0-2.61-1.91-4.94-4.51-5.19C9.51.74 7 3.08 7 6v2H4v14h16V8zm-8 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"})):r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{fill:"#333",d:"M20 8h-3V6.21c0-2.61-1.91-4.94-4.51-5.19C9.51.74 7 3.08 7 6h2c0-1.13.6-2.24 1.64-2.7C12.85 2.31 15 3.9 15 6v2H4v14h16V8zm-2 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}))))}}]),a}(n.Component)),de=(a(44),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).state={},r}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"editor_option"},r.a.createElement("div",{className:"editor_icon",title:"Delete this element",onClick:this.props.handleDeleteElements},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{fill:"#333",d:"M6 21h12V7H6v14zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}))))}}]),a}(n.Component)),he=(a(45),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).state={},r}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"editor_option"},r.a.createElement("div",{className:"editor_icon",title:"More options"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{fill:"#333",d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))))}}]),a}(n.Component)),ue=(a(46),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleOpenSubMenu=function(){r.setState({subMenuOpen:!r.state.subMenuOpen}),r.props.handleSetCurrentOpenSubMenu("URL")},r.handleURLChange=function(e){r.props.handleUpdateElementProperty({property:"imgURL",value:e.target.value})},r.state={subMenuOpen:!1},r}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.state.subMenuOpen&&"URL"!==this.props.currentOpenSubMenu&&this.setState({subMenuOpen:!1})}},{key:"render",value:function(){var e="predefinedColorPicker_submenu";return this.state.subMenuOpen&&(e+=" isVisible"),r.a.createElement("div",{className:"fontStyle"},r.a.createElement("div",{className:"editor_icon",onClick:this.handleOpenSubMenu,title:"Change image URL"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{fill:"#333",d:"M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5v2zm2.5-.5h1.5V15H10v-4.5h1.5V9H7v1.5zm5.5 0H14V15h1.5v-4.5H17V9h-4.5v1.5zM23 9h-5v6h1.5v-2H23V9zm-1.5 2.5h-2v-1h2v1z"}))),r.a.createElement("div",{className:e},r.a.createElement("div",{className:"arrow"}),r.a.createElement("div",{className:"urlLocation"},r.a.createElement("div",{className:"urlLocation_label"},"URL:"),r.a.createElement("input",{name:"imgURL",onChange:this.handleURLChange,value:this.props.imgURL}))))}}]),a}(n.Component)),pe=(a(47),{postit:["predefinedColor","fontStyle","bringForward","sendBackward","lock","delete","menu"],shape:["customColor","customBorderColor","borderStyle","fontStyle","textAlignment","bringForward","sendBackward","lock","delete","menu"],text:["fontStyle","textAlignment","bringForward","sendBackward","lock","delete","menu"],line:["customBorderColor","borderStyle","bringForward","sendBackward","lock","delete","menu"],image:["url","customBorderColor","borderStyle","bringForward","sendBackward","lock","delete","menu"]}),me=["bringForward","sendBackward","lock","delete","menu"],ve=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleUpdateElementProperty=function(e){e.id=r.props.selectedElements[0].id,r.props.handleUpdateElementProperty(e)},r.handleSetCurrentOpenSubMenu=function(e){r.setState({currentOpenSubMenu:e})},r.state={currentOpenSubMenu:null},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t={},a=this.props,n=a.selectedElements,l=a.boundingBox,o="elementEditor",i=null,s=null,c=n.map((function(e){return e.id}));if(1===n.length?i=pe[n[0].type]:n.length>1&&(i=me),i){o+=" isVisible";var d=40*(s=i.map((function(t){switch(t){case"predefinedColor":return r.a.createElement(R,{key:"".concat(n[0].id,"_").concat(t),fillColor:n[0].predefinedColor,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"customColor":return r.a.createElement(K,{key:"".concat(n[0].id,"_").concat(t),currentStyles:n[0].styles,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"customBorderColor":return r.a.createElement($,{key:"".concat(n[0].id,"_").concat(t),currentStyles:n[0].styles,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"borderStyle":return r.a.createElement(ee,{key:"".concat(n[0].id,"_").concat(t),currentStyles:n[0].styles,initialZoomLevel:n[0].initialZoomLevel,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"fontStyle":return r.a.createElement(ae,{key:"".concat(n[0].id,"_").concat(t),fontStyle:n[0].fontStyle,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"textAlignment":return r.a.createElement(oe,{key:"".concat(n[0].id,"_").concat(t),fontStyle:n[0].fontStyle,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"link":return r.a.createElement(ie,{key:"".concat(n[0].id,"_").concat(t)});case"bringForward":return r.a.createElement(se,{type:"forward",key:"".concat(n[0].id,"_").concat(t),handleShiftElementPosition:e.props.handleShiftElementPosition,ids:c});case"sendBackward":return r.a.createElement(se,{type:"backward",key:"".concat(n[0].id,"_").concat(t),handleShiftElementPosition:e.props.handleShiftElementPosition,ids:c});case"lock":return r.a.createElement(ce,{key:"".concat(n[0].id,"_").concat(t)});case"delete":return r.a.createElement(de,{key:"".concat(n[0].id,"_").concat(t),handleDeleteElements:e.props.handleDeleteElements});case"url":return r.a.createElement(ue,{key:"".concat(n[0].id,"_").concat(t),imgURL:n[0].imgURL,handleUpdateElementProperty:e.handleUpdateElementProperty,handleSetCurrentOpenSubMenu:e.handleSetCurrentOpenSubMenu,currentOpenSubMenu:e.state.currentOpenSubMenu});case"menu":return r.a.createElement(he,{options:pe[n[0].type],key:"".concat(n[0].id,"_").concat(t)});default:return null}}))).length/2,h=l.width/2,u=l.x+h-d,p=l.y-96;t.left="".concat(u,"px"),t.top="".concat(p,"px")}return r.a.createElement("div",{className:o,style:t},s)}}]),a}(n.Component),fe=(a(48),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"handleMouseMove",value:function(e){var t=this,a=this.state,n=[];Object.keys(this.state.elementState).forEach((function(e){t.state.elementState[e].selected&&n.push(t.state.elements[e])}));if(n){var r=Object(h.a)({},a.elements);if(n.length>1)n.forEach((function(t){r[t.id].styles.width+=e.movementX*a.zoomLevel,r[t.id].styles.height+=e.movementX*a.zoomLevel}));else if(1===n.length&&n[0].fixedRatio){var l=n[0].id;r[l].styles.width+=e.movementX*a.zoomLevel,r[l].styles.height+=e.movementX*a.zoomLevel}else if(1===n.length){var o=n[0].id;r[o].styles.width+=e.movementX*a.zoomLevel,r[o].styles.height+=e.movementY*a.zoomLevel}this.setState({newState:{}})}}},{key:"render",value:function(){var e=this.props,t=e.boundingBox,a={display:"none"};e.isVisible&&(a.display="block");var n={position:"absolute",height:"16px",width:"16px",top:"0",left:"0",transform:"translate3d(".concat(t.cx-8,"px,").concat(t.cy-8,"px, 0)")},l={x:t.x,y:t.y,height:t.height,width:t.width};l.width<0&&(l.x+=l.width,l.width=-1*l.width),l.height<0&&(l.y+=l.height,l.height=-1*l.height);var o={position:"absolute",height:"".concat(l.height,"px"),width:"".concat(l.width,"px"),top:"0",left:"0",transform:"translate3d(".concat(l.x,"px,").concat(l.y,"px, 0)")};return r.a.createElement("div",{className:"resizerWrapper",style:a},r.a.createElement("div",{className:"elementsHightlight",style:o}),r.a.createElement("svg",{style:n,height:"16",width:"16",viewBox:"-8 -8 16 16"},r.a.createElement("circle",{id:"resizerHandle",cx:0,cy:0,r:6,fill:"white",stroke:"grey",strokeWidth:2,strokeOpacity:.5,cursor:"nwse-resize"})))}},{key:"componentDidMount",value:function(){this.props.registerDragHandler("resizerHandle",{dragMoveHandler:this.handleMouseMove})}}]),a}(n.Component)),Se=(a(49),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"updateElementDragPosition",value:function(e){var t=this,a=this.state.zoomLevel,n=Object(h.a)({},this.state.elements),r=Object.keys(this.state.elementState).filter((function(e){return!!t.state.elementState[e].selected}));r.length&&(r.forEach((function(t){var r=Object(h.a)({},n[t]),l=Object(h.a)({},n[t].styles);l.x+=e.movementX*a,l.y+=e.movementY*a,r.styles=l,n[t]=r})),this.setState({elements:n}))}},{key:"render",value:function(){var e=this.props.boundingBox;return r.a.createElement("rect",{id:"elementSelectionArea",height:e.rawHeight,width:e.rawWidth,x:e.rawX,y:e.rawY,fillOpacity:0})}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.selectedElementKeys,n=e.selectedElementKeys,r=n.filter((function(e){return-1===a.indexOf(e)})),l=a.filter((function(e){return-1===n.indexOf(e)}));r.length>0&&r.forEach((function(e){t.props.removeDragHandler(e)})),l.length>0&&l.forEach((function(e){t.props.registerDragHandler(e,{dragMoveHandler:t.updateElementDragPosition})}))}},{key:"componentDidMount",value:function(){this.props.registerDragHandler("elementSelectionArea",{dragMoveHandler:this.updateElementDragPosition})}}]),a}(n.Component)),ge=(a(50),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){e.props.loadFile(e.props.fileName)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"navBar_menu_item",onClick:this.handleClick},this.props.fileName)}}]),a}(n.Component)),ye=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(i.a)(this,a),(l=t.call(this,e,n)).handleOpenMenu=function(e){e.stopPropagation(),l.setState({menuVisible:!l.state.menuVisible,subMenu:[]})},l.saveToBrowser=function(e){var t=l.props.applicationState,a={elements:t.elements,elementState:t.elementState,boardName:t.boardName,zoomLevel:t.zoomLevel,offsetX:applicationCache.offsetX,offsetY:t.offsetY},n="miralFile_".concat(t.boardName);window.localStorage.getItem(n)&&(n=n+"_"+(new Date).getHours()+(new Date).getMinutes()),window.localStorage.setItem(n,JSON.stringify(a)),l.setState({menuVisible:!1,subMenu:[]})},l.loadFileFromBrowser=function(e){var t=window.localStorage.getItem("miralFile_".concat(e)),a=Object.assign({},l.props.applicationState,JSON.parse(t));l.props.handleUpdateElementsAndState(a),l.setState({menuVisible:!1,subMenu:[]})},l.getSavedFromBrowser=function(e){var t=[];Object.keys(window.localStorage).forEach((function(e){if(-1!==e.indexOf("miralFile_")){var a=e.replace("miralFile_","");t.push(r.a.createElement(ge,{key:"fileOption_".concat(a),fileName:a,loadFile:l.loadFileFromBrowser}))}})),0===t.length&&t.push(r.a.createElement("div",{className:"navMenu_error"},"No saved files found on this browser.")),l.setState({subMenu:t})},l.saveToMonday=function(e){var t=window.mondaySdk(),a=l.props.applicationState,n={elements:a.elements,elementState:a.elementState,boardName:a.boardName,zoomLevel:a.zoomLevel,offsetX:applicationCache.offsetX,offsetY:a.offsetY},r="miralFile_".concat(a.boardName);t.storage.instance.getItem(r)&&(r=r+"_"+(new Date).getHours()+(new Date).getMinutes()),t.storage.instance.setItem(r,JSON.stringify(n)),t.storage.instance.getItem("miralFileList").then((function(e){var a=[];null===e.data.value?a=[r]:(a=JSON.parse(e.data.value)).push(r),t.storage.instance.setItem("miralFileList",JSON.stringify(a))})),l.setState({menuVisible:!1,subMenu:[]})},l.getSavedFromMonday=function(e){window.mondaySdk().storage.instance.getItem("miralFileList").then((function(e){var t=[];e.data.value?t=JSON.parse(e.data.value).map((function(e){return r.a.createElement(ge,{key:"fileOption_".concat(e),fileName:e,loadFile:l.loadFileFromMonday})})):t.push(r.a.createElement("div",{className:"navMenu_error"},"No saved files found on this browser."));l.setState({subMenu:t})}))},l.loadFileFromMonday=function(e){window.mondaySdk().storage.instance.getItem(e).then((function(e){if(e.data.value){var t=Object.assign({},l.props.applicationState,JSON.parse(e.data.value));l.props.handleUpdateElementsAndState(t),l.setState({menuVisible:!1,subMenu:[]})}}))},l.state={menuVisible:!1,subMenu:[],mondaySaveAvailable:!1},l}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.menuVisible,a=e.subMenu,n=e.mondaySaveAvailable,l="navBar_menu",o="";return t&&(l+=" navBar_menu_open"),a.length>0&&(o="slideLeft"),r.a.createElement("div",{className:"navBar"},r.a.createElement("span",{className:"companyName"},"Your company name"),r.a.createElement("span",{className:"burgerMenu",onClick:this.handleOpenMenu}),r.a.createElement("div",{className:l},r.a.createElement("div",{className:"navBar_menu_arrow"}),r.a.createElement("div",{className:"navBar_menu_sliderWrapper"},r.a.createElement("div",{className:"navBar_menu_slider ".concat(o)},r.a.createElement("div",{className:"navBar_menu_items"},n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navBar_menu_item",onClick:this.saveToMonday},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 64 64"},r.a.createElement("g",{transform:"matrix(3.208255 0 0 3.208255 -35.559129 -63.587202)"},r.a.createElement("path",{d:"M13.513 35.76a2.433 2.433 0 0 1-2.059-3.723l4.377-6.99a2.432 2.432 0 1 1 4.123 2.582l-4.378 6.99a2.43 2.43 0 0 1-2.063 1.141z",fill:"#ff3d57"}),r.a.createElement("path",{d:"M21.056 35.76a2.433 2.433 0 0 1-2.063-3.723l4.38-6.99a2.432 2.432 0 1 1 4.117 2.582l-4.372 6.99a2.43 2.43 0 0 1-2.063 1.141z",fill:"#ffcb00"}),r.a.createElement("ellipse",{ry:"2.375",rx:"2.436",cy:"33.384",cx:"28.597",fill:"#00d647"}))),r.a.createElement("span",null,"Save to Monday.com")),r.a.createElement("div",{className:"navBar_menu_item",onClick:this.getSavedFromMonday},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 64 64"},r.a.createElement("g",{transform:"matrix(3.208255 0 0 3.208255 -35.559129 -63.587202)"},r.a.createElement("path",{d:"M13.513 35.76a2.433 2.433 0 0 1-2.059-3.723l4.377-6.99a2.432 2.432 0 1 1 4.123 2.582l-4.378 6.99a2.43 2.43 0 0 1-2.063 1.141z",fill:"#ff3d57"}),r.a.createElement("path",{d:"M21.056 35.76a2.433 2.433 0 0 1-2.063-3.723l4.38-6.99a2.432 2.432 0 1 1 4.117 2.582l-4.372 6.99a2.43 2.43 0 0 1-2.063 1.141z",fill:"#ffcb00"}),r.a.createElement("ellipse",{ry:"2.375",rx:"2.436",cy:"33.384",cx:"28.597",fill:"#00d647"}))),r.a.createElement("span",null,"Load from Monday.com"))),r.a.createElement("div",{className:"navBar_menu_item",onClick:this.saveToBrowser},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M19 12v7H5v-7H3v9h18v-9h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"})),r.a.createElement("span",null,"Save to Browser")),r.a.createElement("div",{className:"navBar_menu_item",onClick:this.getSavedFromBrowser},r.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"m19,12l0,7l-14,0l0,-7l-2,0l0,9l18,0l0,-9l-2,0z",fill:"black",id:"svg_2"}),r.a.createElement("path",{d:"m12.75,11.67l2.59,-2.58l1.41,1.41l-5,5l-5,-5l1.41,-1.41l2.59,2.58l0,-9.67l2,0c0,3.223333 0,6.446667 0,9.67z",fill:"black",id:"svg_3",transform:"rotate(180 11.75 8.75)"})),r.a.createElement("span",null,"Load from Browser"))),r.a.createElement("div",{className:"navBar_menu_items"},a.map((function(e){return e})))))))}},{key:"componentDidMount",value:function(){var e=document.location.ancestorOrigins[0];e&&(-1!==e.indexOf("monday.com")&&this.setState({mondaySaveAvailable:!0}))}}]),a}(n.Component),be=a(9),Ee=(a(12),a(13)),Oe=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleUndo=function(){var e=Object(be.a)(r.state.undo),t=Object(be.a)(r.state.updates),a=e.pop(),n=t.pop(),l=[].concat(Object(be.a)(r.state.redo),[n]),o={elements:Object(h.a)({},r.props.elements),elementState:Object(h.a)({},r.props.elementState)};Ee.applyPatch(o,a),r.setState({undo:e,redo:l,updates:t}),r.props.handleUpdateElementsAndState({elementState:o.elementState,elements:o.elements})},r.handleRedo=function(){var e=Object(be.a)(r.state.redo),t=e.pop(),a={elements:Object(h.a)({},r.props.elements),elementState:Object(h.a)({},r.props.elementState)};Ee.applyPatch(a,t),r.setState({redo:e}),r.props.handleUpdateElementsAndState({elementState:a.elementState,elements:a.elements,storeUndo:!0})},r.state={undo:[],redo:[],updates:[]},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.undo.length>0,t=this.state.redo.length>0,a={visibility:"hidden"};(e||t)&&(a.visibility="visible");var n={pointerEvents:"none",opacity:.5};t&&(n.opacity=1,n.pointerEvents="all");var l={opacity:.5,pointerEvents:"none"};return e&&(l.opacity=1,l.pointerEvents="all"),r.a.createElement("div",{className:"undoControls",style:a},r.a.createElement("span",{className:"iconButton undo",onClick:this.handleUndo,style:l}),r.a.createElement("span",{className:"iconButton redo",onClick:this.handleRedo,style:n}))}},{key:"componentDidUpdate",value:function(e){var t={elements:e.elements,elementState:e.elementState},a={elements:this.props.elements,elementState:this.props.elementState},n=Ee.createPatch(t,a),r=Ee.createPatch(a,t);r.length>0&&n.length>0&&this.props.storeUndo&&(this.setState({undo:[].concat(Object(be.a)(this.state.undo),[r]),updates:[].concat(Object(be.a)(this.state.updates),[n])}),this.props.handleUpdateElementsAndState({storeUndo:!1}))}}]),a}(n.Component),we=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleEditBoardName=function(){r.setState({editBoardName:!0})},r.handleBlur=function(e){r.props.updateBoardName(e.target.innerText),r.setState({editBoardName:!1})},r.handleShareBoard=function(){-1!==window.location.href.indexOf("localhost")&&r.props.toggleBoardShare()},r.state={editBoardName:!1},r}return Object(s.a)(a,[{key:"render",value:function(){var e=!1;return this.state.editBoardName&&(e=!0),r.a.createElement("div",{className:"boardControls"},r.a.createElement("div",{className:"primaryControls"},r.a.createElement("span",{className:"boardName",contentEditable:e,onClick:this.handleEditBoardName,onBlur:this.handleBlur,suppressContentEditableWarning:!0},this.props.boardName),r.a.createElement("span",{className:"iconButton share",onClick:this.handleShareBoard})),r.a.createElement(Oe,{handleUpdateElementsAndState:this.props.handleUpdateElementsAndState,elements:this.props.elements,elementState:this.props.elementState,storeUndo:this.props.storeUndo}))}}]),a}(n.Component),ke=(a(54),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleZoom=function(e){var t=r.props,a=t.offsetX,n=t.offsetY,l=t.zoomLevel,o=Math.sign(e.deltaY),i=l+o>0?l+o:1,s=e.clientX*l,c=e.clientY*l,d=a-(e.clientX*i-s),h=n-(e.clientY*i-c);r.props.updateBoardPosition({offsetX:d,offsetY:h,zoomLevel:i})},r.handleMouseDown=function(e){e.stopPropagation(),r.setState({dragStartX:e.clientX,dragStartY:e.clientY,dragStartTime:Date.now(),drag:"mouseDown",elementID:e.target.id}),console.log(e.target)},r.handleMouseMove=function(e){if(r.props.updatePointerPosition({x:e.clientX*r.props.zoomLevel+r.props.offsetX,y:e.clientY*r.props.zoomLevel+r.props.offsetY}),"mouseDown"===r.state.drag||"dragging"===r.state.drag){var t=!1,a=r.props.dragHandlers[r.state.elementID];"mouseDown"===r.state.drag&&(t=!0,r.setState({drag:"dragging"}),a&&a.handleDragStart&&a.handleDragStart(e,r.state.dragStartX,r.state.dragStartY,e.movementX,e.movementY)),e.stopPropagation(),a&&a.handleDragMove&&!t&&a.handleDragMove(e,r.state.dragStartX,r.state.dragStartY)}},r.handleMouseUp=function(e){var t=r.props.dragHandlers[r.state.elementID],a=Date.now()-r.state.dragStartTime,n=r.state.dragStartX+r.state.dragStartY-(e.clientX+e.clientY),l=n>-5&&n<5&&a<200;"dragging"!==r.state.drag||l?("normal"===r.state.drag||"mouseDown"===r.state.drag||"dragging"===r.state.drag&&l)&&(t&&t.handleClick&&t.handleClick(e,r.state.dragStartX,r.state.dragStartY),r.setState({drag:"normal",dragStartX:0,dragStartY:0})):(e.stopPropagation(),t&&t.handleDragEnd&&t.handleDragEnd(),r.setState({drag:"normal",dragStartX:0,dragStartY:0}))},r.state={drag:"normal",dragStartX:0,dragStartY:0},r}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{position:"absolute",top:0,left:0,height:"100vh",width:"100vw"},onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,onWheel:this.handleZoom,id:"interActionManager"},this.props.children)}}]),a}(n.Component)),De=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleKeyPress=function(e){"Backspace"===e.key&&null===r.props.textEditor&&"INPUT"!==e.target.tagName?(e.preventDefault(),r.props.handleDeleteElements()):(!0===e.ctrlKey&&"d"===e.key||!0===e.metaKey&&"d"===e.key)&&(e.preventDefault(),r.props.handleDuplicateElements())},r.state={},r}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"keyboardManager",styles:{display:"none"}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress)}}]),a}(n.Component),Ce=(a(55),a(13)),xe=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var l;return Object(i.a)(this,a),(l=t.call(this,e,n)).state={},l.cursorRef=r.a.createRef(),l.cursorAnimation=null,l.lastUpdate=null,l}return Object(s.a)(a,[{key:"render",value:function(){var e={color:"#007fff"};return r.a.createElement("div",{className:"multiUser_UserCursorWrapper",ref:this.cursorRef,style:e},r.a.createElement("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",className:"multiUser_UserCursor"},r.a.createElement("path",{fill:"#007fff",d:"m0.2125,0.101564l5.116674,15.552611c1.603039,-5.720502 1.863999,-7.627336 10.401108,-9.534169l-15.517782,-6.018442z"})),this.props.data.initials)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.offsetX,n=t.offsetY,r=t.zoomLevel,l=this.props.data.pointerPosition.x/r-a/r,o=this.props.data.pointerPosition.y/r-n/r,i=e.data.pointerPosition.x/e.zoomLevel-e.offsetX/e.zoomLevel,s=e.data.pointerPosition.y/e.zoomLevel-e.offsetY/e.zoomLevel;(i!==l||s!==o)&&this.cursorRef.current.animate([{transform:"translate3d(".concat(i,"px, ").concat(s,"px, 0px)")},{transform:"translate3d(".concat(l,"px, ").concat(o,"px, 0px)")}],{fill:"forwards",easing:"linear",duration:500})}}]),a}(n.Component),je=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"multiUser_UserDockAvatar"},this.props.data.name)}}]),a}(n.Component),Me=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).setupShareBoardSocketConnection=function(){var e=r.state,t=e.companyName,a=e.boardID,n=e.password,l={id:e.id,name:"simon",initials:"ss",pointerPosition:r.props.pointerPosition},o=window.io,i={elements:r.props.elements,elementState:r.props.elementState},s=o("http://192.168.178.30:3001/".concat(t));s.emit("shareBoard",{boardID:a,boardContents:i,owner:l,password:n,duration:40}),s.on("userJoin",r.userJoin),s.on("updatePointer",r.updatePointer),s.on("updateBoard",r.updateBoard),r.setState({socket:s}),setInterval(r.purgeEmitQueue,500)},r.setupJoinBoardSocketConnection=function(){var e=r.state,t=e.companyName,a=e.boardID,n=e.password,l={id:e.id,name:"simonJoin",initials:"sks",pointerPosition:r.props.pointerPosition},o=(0,window.io)("http://192.168.178.30:3001/".concat(t));o.emit("joinBoard",{boardID:a,user:l,password:n}),o.on("initializeBoard",r.initializeBoard),o.on("userJoin",r.userJoin),o.on("updatePointer",r.updatePointer),o.on("updateBoard",r.updateBoard),o.on("shareEnded",r.shareEnded),r.setState({socket:o,isParticipant:!0}),setInterval(r.purgeEmitQueue,500)},r.initializeBoard=function(e){r.props.handleUpdateElementsAndState(e.boardContents),r.setState({boardUsers:e.users})},r.updatePointer=function(e){if(r.state.boardUsers[e.id]){var t=Object(h.a)({},r.state.boardUsers),a=Object(h.a)({},t[e.id]);a.pointerPosition=e.pointerPosition,t[e.id]=a,r.setState({boardUsers:t})}},r.userJoin=function(e){var t=Object(h.a)({},r.state.boardUsers);t[e.id]=e,r.setState({boardUsers:t})},r.updateBoard=function(e){var t={elements:Object(h.a)({},r.props.elements),elementState:Object(h.a)({},r.props.elementState),multiUserUpdate:!0};Ce.applyPatch(t,e.elementsDiffUpdates),console.log("recieved update",t),r.props.handleUpdateElementsAndState(t)},r.shareEnded=function(e){r.setState({boardError:e.reason})},r.addToEmitQueue=function(e,t){var a=Object(u.a)(r).emitQueue;a[e]||(a[e]=[]),a[e].push(t)},r.purgeEmitQueue=function(){var e=r.state.socket;Object.keys(r.emitQueue).forEach((function(t){e.emit(t,r.emitQueue[t].pop()),delete r.emitQueue[t]}))},r.state={isParticipant:!1,boardError:null,socket:null,boardUsers:{},companyName:"unfoldbio",boardID:"2eweor3892",password:"miral",id:S.a.generate()},r.emitQueue={},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.boardUsers,n=t.isParticipant,l=t.socket,o=t.boardError,i=this.props.shareBoard,s=[],c=[],d={pointerEvents:"none",position:"absolute",left:0,top:0,height:"100vh",width:"100vw"};return(i||n)&&l&&null===o&&(Object.keys(a).length>0&&Object.keys(a).forEach((function(t){s.push(r.a.createElement(je,{key:t,data:a[t]})),t!==e.state.id&&c.push(r.a.createElement(xe,{key:a[t].id+"_key",data:a[t],offsetX:e.props.offsetX,offsetY:e.props.offsetY,zoomLevel:e.props.zoomLevel}))})),o&&(d.pointerEvents="auto")),r.a.createElement("div",{id:"mutliUserManager",style:d},Object.keys(a).length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"multiUser_UserDock"},s),r.a.createElement("div",{className:"multiUser_UserCursors"},c)),o&&r.a.createElement("div",{className:"multiUser_boardError"},r.a.createElement("span",{className:"multiUser_boardErrorText"},"Board unavailable : ",o)))}},{key:"componentDidUpdate",value:function(e){var t=this.state,a=t.boardID,n=t.socket,r=t.isParticipant,l=t.id,o=t.boardError;e.shareBoard!==this.props.shareBoard&&this.props.shareBoard&&!n&&this.setupShareBoardSocketConnection();var i=(this.props.shareBoard||r)&&n&&null===o;if(i&&!this.props.multiUserUpdate){var s={elements:e.elements,elementState:e.elementState},c={elements:this.props.elements,elementState:this.props.elementState},d=Ce.createPatch(s,c);d.length>0&&this.addToEmitQueue("updateBoard",{boardID:a,elementsDiffUpdates:d})}else this.props.multiUserUpdate&&this.props.handleUpdateElementsAndState({multiUserUpdate:!1});var h=this.props.pointerPosition,u=h.x!==e.pointerPosition.x||h.y!==e.pointerPosition.y;i&&u&&this.addToEmitQueue("updatePointer",{boardID:a,id:l,pointerPosition:h})}},{key:"componentDidMount",value:function(){-1!==window.location.hash.indexOf("join")&&this.setupJoinBoardSocketConnection()}},{key:"componentWillUnmount",value:function(){}}]),a}(n.Component),ze=(a(56),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleSelect=function(e){var t=e.metaKey;r.props.handleSetCurrentElement(r.props.data.id,!0,t)},r.handleTextEdit=function(e){r.props.handleTextEdit(r.props.data.id)},r.state={},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.elementState,a=e.data,n=Object(h.a)({},this.props.data.styles),l=null,o=null;if(t.selected&&(n.style={outline:"".concat(a.initialZoomLevel,"px dashed #5086F2")}),a.text){var i=a.text.split(/\n|\r/).map((function(e,t){return r.a.createElement("div",{key:"".concat(a.id,"_").concat(e,"_").concat(t)},e)})),s=Object(h.a)(Object(h.a)({},a.fontStyle),{},{lineHeight:"".concat(1.4*a.fontStyle.fontSize,"px"),padding:"".concat(a.padding,"px"),width:"100%"});l=r.a.createElement("foreignObject",{className:"svg_textContainer_foreignObject",x:n.x,y:n.y,height:n.height,width:n.width},r.a.createElement("div",{className:"svg_textContainer"},r.a.createElement("div",{className:"svg_textContainer_line",style:s},i)))}if(0===a.shapeType)o=r.a.createElement("rect",Object.assign({id:a.id},n));else if(1===a.shapeType)n.r=n.width/2,n.cx=n.x+n.r,n.cy=n.y+n.r,o=r.a.createElement("circle",Object.assign({id:a.id},n));else if(2===a.shapeType){var c="".concat(n.x+n.width/2,",").concat(n.y),d="".concat(n.x,",").concat(n.y+n.height),u="".concat(n.x+n.width,",").concat(n.y+n.height);n.points="".concat(c," ").concat(d," ").concat(u),o=r.a.createElement("polygon",Object.assign({id:a.id},n))}else o=r.a.createElement("text",null,"No Shape Type Set");return r.a.createElement("g",{onClick:this.handleSelect,onDoubleClick:this.handleTextEdit,height:n.height,width:n.width},o,l)}}]),a}(n.Component)),Le=(a(57),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleSelect=function(e){var t=e.metaKey;r.props.handleSetCurrentElement(r.props.data.id,!0,t)},r.handleTextEdit=function(){r.props.handleTextEdit(r.props.data.id)},r.state={},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.elementState,a=e.data,n=Object(h.a)({},this.props.data.styles),l=null;if(t.selected&&(n.style={outline:"".concat(n.strokeWidth/2,"px dashed #5086F2")}),a.text){var o=a.text.split(/\n|\r/).map((function(e,t){return r.a.createElement("div",{key:"".concat(a.id,"_").concat(e,"_").concat(t)},e)})),i=Object(h.a)(Object(h.a)({},a.fontStyle),{},{fontSize:"".concat(n.fontSize,"px"),lineHeight:"".concat(1.4*n.fontSize,"px"),padding:"".concat(a.padding,"px"),width:"100%"});l=r.a.createElement("foreignObject",{className:"svg_textContainer_foreignObject",x:n.x,y:n.y,height:n.height,width:n.width},r.a.createElement("div",{className:"svg_textContainer"},r.a.createElement("div",{className:"svg_textContainer_line",style:i},o)))}return r.a.createElement("g",{onClick:this.handleSelect,onDoubleClick:this.handleTextEdit,cursor:this.state.cursor,height:n.height,width:n.width},r.a.createElement("rect",Object.assign({id:a.id},n)),l)}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.handleTextEdit()}),300)}}]),a}(n.Component)),Te=(a(58),[{path:"m12.04544,2.07068l737.03703,11.11111l-1.85186,742.5926l-744.44443,-7.40742l9.25926,-746.29629z",dropShadow:"m38.82956,79.07068l640.25289,10.22659l-17.60868,669.47711l-554.68758,28.18226l-67.95662,-707.88596l-0.00001,0z",filter:"shadow1"},{path:"m0.934329,2.07068l761.481475,-0.000001l2.592584,735.925933l-764.44443,10.370358l0.370371,-746.29629z",dropShadow:"m38.82956,79.07068l640.25289,10.291407l60.169098,684.901871c-233.784749,-16.594366 -465.347276,-42.16213 -681.354247,10.470427l-19.067731,-705.663705l-0.000005,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 -0.000001,0 -0.000001,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c-0.000001,0 -0.000001,0 -0.000001,0z",filter:"shadow2"},{path:"m1.04544,0.07068l753.03703,7.11111l5.14814,727.5926l-751.44443,-0.40742l-6.74074,-734.29629z",dropShadow:"m44.907991,62.874602l640.25289,10.291407l60.169098,684.901871c-220.059258,-34.241425 -433.974727,-12.750366 -685.275815,14.391995l-15.146163,-709.585273l-0.000005,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 -0.000001,0 -0.000001,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c-0.000001,0 -0.000001,0 -0.000001,0z",filter:"shadow2"},{path:"m16.095067,4.07068l747.987379,9.831012l-6.861786,727.872709l-752.43448,-9.220688l11.308887,-728.483033z",dropShadow:"m44.907991,62.874602l640.25289,10.291407l26.126545,667.880594c-220.059258,-34.241425 -365.889621,55.334741 -634.211985,10.136676l-32.16744,-688.308677l-0.000005,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 -0.000001,0 -0.000001,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c-0.000001,0 -0.000001,0 -0.000001,0z",filter:"shadow2"}]),He=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleSelect=function(e){var t=e.metaKey;r.props.handleSetCurrentElement(r.props.data.id,!0,t)},r.handleTextEdit=function(e){r.props.handleTextEdit(r.props.data.id)},r.state={},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.context,t=this.props,a=t.elementState,n=t.data,l=Object(h.a)({},this.props.data.styles),o=null;if(a.selected&&(l.style={outline:"".concat(l.strokeWidth/2,"px dashed #5086F2")}),n.text){var i=n.text.split(/\n|\r/).map((function(e,t){return r.a.createElement("div",{key:"".concat(n.id,"_").concat(e,"_").concat(t)},e)})),s=Object(h.a)(Object(h.a)({},n.fontStyle),{},{fontSize:"".concat(l.fontSize,"px"),lineHeight:"".concat(1.4*l.fontSize,"px"),padding:"".concat(n.padding,"px")});o=r.a.createElement("foreignObject",{className:"svg_textContainer_foreignObject",x:l.x,y:l.y,height:l.height,width:l.width},r.a.createElement("div",{className:"svg_textContainer"},r.a.createElement("div",{className:"svg_textContainer_line",style:s},i)))}var c=Te[a.shapeType||0],d=n.predefinedColor;return r.a.createElement("g",{onClick:this.handleSelect,onDoubleClick:this.handleTextEdit,cursor:this.state.cursor,height:l.width,width:l.width},r.a.createElement("rect",Object.assign({id:n.id},l,{height:l.width})),r.a.createElement("g",{transform:"translate(".concat(l.x," ").concat(l.y,") scale(").concat(l.width/800,")"),pointerEvents:"none"},r.a.createElement("path",{d:c.dropShadow,fill:"rgba(0,0,0, 0.4)",filter:"url(#".concat(c.filter,")")}),r.a.createElement("path",{d:c.path,fill:e.preDefinedColors[d]})),o)}}]),a}(n.Component);He.contextType=X;var Ue=He,Be=(a(59),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleSelect=function(e){var t=e.metaKey;r.props.handleSetCurrentElement(r.props.data.id,!0,t)},r.handleTextEdit=function(e){r.props.handleTextEdit(r.props.data.id)},r.state={},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.elementState,a=e.data,n=Object(h.a)({},this.props.data.styles),l=null;return t.selected&&(n.style={outline:"".concat(a.initialZoomLevel,"px dashed #5086F2")}),0===a.shapeType?(n.x1=n.x,n.y1=n.y+n.height,n.x2=n.x+n.width,n.y2=n.y,l=r.a.createElement("line",Object.assign({id:a.id},n))):1===a.shapeType?(n.d="M ".concat(n.x," ").concat(n.y+n.height," q 0 ").concat(-n.height," ").concat(n.width," ").concat(-n.height),l=r.a.createElement("path",Object.assign({id:a.id},n))):l=2===a.shapeType?r.a.createElement("path",Object.assign({id:a.id},n)):r.a.createElement("text",null,"No Shape Type Set"),r.a.createElement("g",{onClick:this.handleSelect,onDoubleClick:this.handleTextEdit,height:n.height,width:n.width},l,null)}}]),a}(n.Component)),Ne=(a(60),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleSelect=function(e){var t=e.metaKey;r.props.handleSetCurrentElement(r.props.data.id,!0,t)},r.handleCrop=function(e){},r.state={},r}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a=this.props,n=a.elementState,l=a.data,o=Object(h.a)({},this.props.data.styles);n.selected&&(o.style={outline:"".concat(l.initialZoomLevel,"px dashed #5086F2")});var i={backgroundImage:"url(".concat(l.imgURL,")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"0 0",width:"100%"};return e=r.a.createElement("foreignObject",{className:"svg_imageContainer_foreignObject",x:o.x,y:o.y,height:o.height,width:o.width},r.a.createElement("div",{className:"svg_imageContainer",style:i})),t=r.a.createElement("rect",Object.assign({id:l.id},o)),r.a.createElement("g",{onClick:this.handleSelect,onDoubleClick:this.handleCrop,height:o.height,width:o.width},t,e)}}]),a}(n.Component));function Ae(e){var t=Object.assign({},e);return Object.keys(t).forEach((function(e){"object"===typeof t[e]&&(t[e]=Ae(t[e]))})),t}a(61);var Pe=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleToolSelect=function(e){r.handleDeselectAllElements(),r.setState({tool:e})},r.handleTextEdit=function(e){var t=Object(h.a)({},r.state.elements),a=Object(h.a)({},r.state.elements[e]);t[e].text="",r.setState({textEditor:a,elements:t})},r.handleUpdatedText=function(e){var t=Object(h.a)({},r.state.elements),a=Object(h.a)({},t[e.id]);a.text=e.newText,a.styles.fontSize=e.fontSize,a.unScaledFontSize=e.fontSize,a.padding=8*r.state.zoomLevel,t[e.id]=a,r.setState({elements:t,storeUndo:!0,textEditor:null})},r.handleSetCurrentElement=function(e,t,a){var n=Object(h.a)({},r.state.elementState);a||Object.keys(n).forEach((function(e){n[e].selected=!1})),n[e].selected=!n[e].selected,r.setState({elementState:n})},r.handleDeselectAllElements=function(){var e=Object(h.a)({},r.state.elementState);Object.keys(e).forEach((function(t){e[t].selected=!1})),r.setState({elementState:e})},r.registerDragHandler=function(e,t){setTimeout((function(){var a={};t.dragStartHandler&&(a.handleDragStart=t.dragStartHandler.bind(Object(u.a)(r))),t.dragMoveHandler&&(a.handleDragMove=t.dragMoveHandler.bind(Object(u.a)(r))),t.dragEndHandler&&(a.handleDragEnd=t.dragEndHandler.bind(Object(u.a)(r))),t.clickHandler&&(a.handleClick=t.clickHandler.bind(Object(u.a)(r)));var n=Object(h.a)({},r.state.dragHandlers);n[e]=a,r.setState({dragHandlers:n})}))},r.removeDragHandler=function(e){var t=Object(h.a)({},r.state.dragHandlers);t[e]&&delete t[e],r.setState({dragHandlers:t})},r.handleSetElementHeight=function(e,t){var a=Object(h.a)({},r.state.elements);a[e].styles.height=Number(t)*r.state.zoomLevel,r.setState(a)},r.handleUpdateElementProperty=function(e){var t=Object(h.a)({},r.state.elements),a=Object(h.a)({},t[e.id]);a[e.property]=e.value,t[e.id]=a,r.setState({elements:t,storeUndo:!0})},r.handleUpdateElementsAndState=function(e){r.setState(e)},r.handleDeleteElements=function(){var e=Object(h.a)({},r.state.elements),t=Object(h.a)({},r.state.elementState);Object.keys(r.state.elementState).forEach((function(a){r.state.elementState[a].selected&&(delete e[a],delete t[a])})),r.setState({elements:e,elementState:t,storeUndo:!0})},r.handleShiftElementPosition=function(e,t){var a={},n=Object.keys(r.state.elements);t.forEach((function(t){var a=n.indexOf(t);n.splice(a,1),"forward"===e?n.splice(a+1,0,t):"backward"===e&&n.splice(a-1,0,t)})),n.forEach((function(e){a[e]=r.state.elements[e]})),r.setState({elements:a,storeUndo:!0})},r.handleSelectElementsWithinArea=function(e,t,a,n){var l=r.state,o=l.elements,i=l.elementState,s=l.zoomLevel,c=l.offsetX,d=l.offsetY,u=Object(h.a)({},i),p=e*s+c,m=t*s+d,v=a*s+c,f=n*s+d;Object.keys(o).forEach((function(e){var t=o[e],a=!1;t.styles.x>=p&&t.styles.x+t.styles.width<=v&&t.styles.y>=m&&t.styles.y+t.styles.height<=f&&(a=!0),u[t.id].selected=!!a})),r.setState({elementState:u})},r.handleDuplicateElements=function(){var e=r.state,t=e.elements,a=e.elementState,n=e.zoomLevel,l=Object(h.a)({},t),o=Object(h.a)({},a),i=[];Object.keys(a).forEach((function(e){a[e].selected&&i.push(t[e])}));var s={x:i[0].styles.x,x1:i[0].styles.x+i[0].styles.width+8*n};i.forEach((function(e){e.styles.x<s.x&&(s.x=e.styles.x);var t=e.styles.x+e.styles.width;t>s.x1&&(s.x1=t+8*n)})),i.forEach((function(e){var t=S.a.generate(),n=Ae(e),r=Ae(a[e.id]);n.id=t,n.styles.x=s.x1+(n.styles.x-s.x),l[t]=n,o[t]=r,o[e.id].selected=!1})),r.setState({elementState:o,elements:l})},r.updateBoardPosition=function(e){r.setState(e)},r.updateBoardName=function(e){r.setState({boardName:e})},r.updatePointerPosition=function(e){r.setState({pointerPosition:e})},r.toggleBoardShare=function(){r.setState({shareBoard:!r.state.shareBoard})},r.state={boardName:"new-board-"+(new Date).toLocaleDateString().replace(/\//g,""),zoomLevel:100,offsetX:0,offsetY:0,tool:"pan",dragHandlers:{},clickHandler:null,elements:{},elementState:{},textEditor:null,storeUndo:!1,shareBoard:!1,multiUserUpdate:!1,pointerPosition:{x:0,y:0}},r}return Object(s.a)(a,[{key:"handlePanStart",value:function(e,t,a){var n=this.state,r=n.offsetX,l=n.offsetY,o=n.zoomLevel;this.setState({offsetX:r+(t+e.movementX)*-o,offsetY:l+(a+e.movementY)*-o})}},{key:"handlePanMove",value:function(e){var t=this.state,a=t.offsetX,n=t.offsetY,r=t.zoomLevel;this.setState({offsetX:a+e.movementX*-r,offsetY:n+e.movementY*-r})}},{key:"calculateSelectedElementsBoundingBox",value:function(e,t,a,n){if(e&&e.length>0){var r=e[0].styles.width,l=e[0].styles.height,o=e[0].styles.cx||e[0].styles.x,i=e[0].styles.cy||e[0].styles.y,s=o+r,c=i+l,d=0,h=0;return e.length>1&&(e.forEach((function(e){var t=e.styles.width,a=e.styles.height,n=e.styles.cx||e.styles.x,r=e.styles.cy||e.styles.y,l=n+t,d=r+a;n<o&&(o=n),l>s&&(s=l),r<i&&(i=r),d>c&&(c=d)})),d=s-o,h=c-i),{height:(h||l)/t,width:(d||r)/t,x:(o-a)/t,y:(i-n)/t,cx:(s-a)/t,cy:(c-n)/t,rawX:o,rawY:i,rawHeight:h||l,rawWidth:d||r}}return{height:0,width:0,x:0,y:0,cx:0,cy:0}}},{key:"render",value:function(){var e=this,t=this.props,a=t.width,n=t.height,l=this.state,o=l.offsetX,i=l.offsetY,s=l.zoomLevel,c=l.tool,d=l.elements,h=l.textEditor,u=a*s,p=n*s,m="".concat(o," ").concat(i," ").concat(u," ").concat(p),v=Object.keys(d).map((function(t){var a=d[t];return"circle"===a.type?r.a.createElement("circle",Object.assign({key:a.id},a.styles,{style:{cursor:"pointer"}})):"shape"===a.type?r.a.createElement(ze,{key:a.id,data:a,elementState:e.state.elementState[a.id],handleTextEdit:e.handleTextEdit,handleSetCurrentElement:e.handleSetCurrentElement}):"text"===a.type?r.a.createElement(Le,{key:a.id,data:a,elementState:e.state.elementState[a.id],handleTextEdit:e.handleTextEdit,handleSetCurrentElement:e.handleSetCurrentElement}):"postit"===a.type?r.a.createElement(Ue,{key:a.id,data:a,elementState:e.state.elementState[a.id],handleTextEdit:e.handleTextEdit,handleSetCurrentElement:e.handleSetCurrentElement}):"line"===a.type?r.a.createElement(Be,{key:a.id,data:a,elementState:e.state.elementState[a.id],handleTextEdit:e.handleTextEdit,handleSetCurrentElement:e.handleSetCurrentElement}):"image"===a.type?r.a.createElement(Ne,{key:a.id,data:a,elementState:e.state.elementState[a.id],handleTextEdit:e.handleTextEdit,handleSetCurrentElement:e.handleSetCurrentElement}):null})),f=[],S=[];Object.keys(this.state.elementState).forEach((function(t){e.state.elementState[t].selected&&(f.push(e.state.elements[t]),S.push(t))}));var g=this.calculateSelectedElementsBoundingBox(f,s,o,i),y={backgroundPosition:"".concat(-1*o/s,"px ").concat(-1*i/s,"px")};return r.a.createElement("div",{className:"boardWrapper ".concat(c),style:y},r.a.createElement(ke,{offsetX:this.state.offsetX,offsetY:this.state.offsetY,zoomLevel:this.state.zoomLevel,updateBoardPosition:this.updateBoardPosition,dragHandlers:this.state.dragHandlers,updatePointerPosition:this.updatePointerPosition},r.a.createElement("svg",{id:"board",width:"".concat(a,"px"),height:"".concat(n,"px"),viewBox:m,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp},r.a.createElement("defs",null,r.a.createElement("filter",{height:"200%",id:"shadow1",width:"200%",x:"-50%",y:"-50%"},r.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"20"})),r.a.createElement("filter",{height:"200%",id:"shadow2",width:"200%",x:"-50%",y:"-50%"},r.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10"})),r.a.createElement("marker",{id:"arrow",markerWidth:"5",markerHeight:"5",refX:"2.5",refY:"2.5",orient:"auto",markerUnits:"strokeWidth"},r.a.createElement("polygon",{points:"0,0 0,5 5,2.5",fill:"#000"}))),r.a.createElement(Se,{boundingBox:g,selectedElementKeys:S,registerDragHandler:this.registerDragHandler,removeDragHandler:this.removeDragHandler}),v),r.a.createElement(fe,{isVisible:f.length>0,registerDragHandler:this.registerDragHandler,boundingBox:g}),r.a.createElement(ye,{applicationState:this.state,handleUpdateElementsAndState:this.handleUpdateElementsAndState}),r.a.createElement(P,{zoomLevel:s}),r.a.createElement(we,{elements:this.state.elements,elementState:this.state.elementState,storeUndo:this.state.storeUndo,handleUpdateElementsAndState:this.handleUpdateElementsAndState,boardName:this.state.boardName,updateBoardName:this.updateBoardName,toggleBoardShare:this.toggleBoardShare}),r.a.createElement(V,{data:h,gridSpace:{offsetX:o,offsetY:i,zoomLevel:s},handleUpdatedText:this.handleUpdatedText,handleSetElementHeight:this.handleSetElementHeight}),r.a.createElement(ve,{selectedElements:f,gridSpace:{offsetX:o,offsetY:i,zoomLevel:s},handleUpdateElementProperty:this.handleUpdateElementProperty,handleDeleteElements:this.handleDeleteElements,handleShiftElementPosition:this.handleShiftElementPosition,boundingBox:g}),r.a.createElement(A,{handleToolSelect:this.handleToolSelect,registerDragHandler:this.registerDragHandler,removeDragHandler:this.removeDragHandler,handleSelectElementsWithinArea:this.handleSelectElementsWithinArea,currentSelectedTool:this.state.tool})),r.a.createElement(De,{handleDeleteElements:this.handleDeleteElements,handleDuplicateElements:this.handleDuplicateElements,textEditor:h}),r.a.createElement(Me,{shareBoard:this.state.shareBoard,elements:this.state.elements,elementState:this.state.elementState,handleUpdateElementsAndState:this.handleUpdateElementsAndState,multiUserUpdate:this.state.multiUserUpdate,pointerPosition:this.state.pointerPosition,offsetX:this.state.offsetX,offsetY:this.state.offsetY,zoomLevel:this.state.zoomLevel}))}},{key:"componentDidMount",value:function(){this.registerDragHandler("board",{dragMoveHandler:this.handlePanMove,clickHandler:this.handleDeselectAllElements})}}]),a}(n.Component),_e=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleWindowResize=function(){n.setState({width:window.innerWidth,height:window.innerHeight})},n.state={width:window.innerWidth,height:window.innerHeight},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.height,a=e.width;return r.a.createElement(X.Provider,{value:W.light},r.a.createElement("div",{className:"App"},r.a.createElement(Pe,{width:a,height:t})))}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize)}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.2d445c62.chunk.js.map