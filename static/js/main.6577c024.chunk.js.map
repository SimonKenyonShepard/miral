{"version":3,"sources":["board/ui/tools/toolbar/tool.js","board/ui/tools/toolbar/select.js","board/ui/tools/toolbar/multiTool.js","board/ui/tools/toolbar/shapeCircle.js","board/ui/tools/toolbar/shapeRect.js","board/ui/tools/toolbar/shapeTriangle.js","board/ui/tools/toolbar/shape.js","board/ui/tools/toolbar/postit.js","board/ui/tools/toolbar/text.js","board/ui/tools/toolbar/lineStraight.js","board/ui/tools/toolbar/lineSmooth.js","board/ui/tools/toolbar/lineFreehand.js","board/ui/tools/toolbar/line.js","board/ui/tools/toolbar/image.js","board/ui/tools/toolbar/index.js","board/ui/tools/index.js","board/ui/altimeter/index.js","board/ui/textEditor/index.js","theme-context.js","board/ui/elementEditor/editors/predefinedColorPicker/index.js","board/ui/elementEditor/editors/customColorPicker/index.js","board/ui/elementEditor/editors/customBorderColorPicker/index.js","board/ui/elementEditor/editors/borderStyle/index.js","board/ui/elementEditor/editors/fontStyle/index.js","board/ui/elementEditor/editors/textAlignment/index.js","board/ui/elementEditor/editors/link/index.js","board/ui/elementEditor/editors/depthSetter/index.js","board/ui/elementEditor/editors/elementLocker/index.js","board/ui/elementEditor/editors/elementDeleter/index.js","board/ui/elementEditor/editors/elementEditorMenu/index.js","board/ui/elementEditor/editors/url/index.js","board/ui/elementEditor/index.js","board/ui/resizer/index.js","board/ui/elementDrag/index.js","board/ui/navbar/index.js","board/ui/boardControls/undoRedo.js","board/ui/boardControls/index.js","board/ui/InteractionManager/index.js","board/ui/KeyboardManager/index.js","board/elements/shape/index.js","board/elements/text/index.js","board/elements/postit/index.js","board/elements/line/index.js","board/elements/image/index.js","board/utils.js","board/index.js","App.js","serviceWorker.js","index.js"],"names":["Tool","handleToolSelect","e","props","type","handleDrawCanvasShow","registerDragHandler","handleDragStart","handleDragMove","handleDragEnd","handleClick","this","currentSelectedTool","isSelectedCSS","className","onClick","autoActivate","Component","Select","context","handleSelectStart","dragStartX","dragStartY","handleShowSelectionArea","setState","x","y","x1","y1","handleSelectMove","selectionAreaUpdate","state","movementX","movementY","handleUpdateSelectionArea","handleSelectEnd","selectionArea","handleSelectElementsWithinArea","MultiTool","handleOpenSubMenu","stopPropagation","toolSubMenuOpen","handleSetCurrentOpenSubMenu","submenuCSS","subMenuItems","openSubMenu","Shape","currentState","newState","elements","newID","Shortid","generate","id","shapeType","fixedRatio","styles","zoomLevel","offsetX","width","offsetY","height","fillOpacity","fill","stroke","strokeOpacity","strokeWidth","strokeDasharray","fontStyle","fontSize","fontFamily","fontWeight","textDecorationLine","color","textAlign","text","initialZoomLevel","elementState","selected","dragStartHandler","dragMoveHandler","dragEndHandler","clickHandler","tool","storeUndo","removeDragHandler","elementBeingDrawn","handleShapeClick","handleShapeDragStart","previousSelectedShapeTool","menuActivated","shapeRect","shapeCircle","shapeTriangle","subMenuTools","key","prevProps","Postit","subType","predefinedColor","clientX","clientY","Math","floor","random","handlePostitClick","handlePostitDragStart","Text","handleTextClick","handleTextDragStart","LineStraight","markerEnd","currentX","currentY","d","pathBuffer","smoothingLevel","currentPath","getAveragePoint","offset","buffer","len","length","pt","i","totalX","totalY","count","newElementGraph","newElementState","newPath","tmpPath","getUpdatedSvgPath","currentElementState","push","shift","getUpdatedPointsBuffer","Line","Image","imgURL","Toolbar","multiplier","handleElementDragMove","prevState","Tools","drawCanvasVisible","handleDrawCanvasHide","Object","assign","selectAreaVisible","selectAreaPosition","visible","event","selectionAreaCoords","positionUpdate","selectAreaStyle","display","transform","drawCanvasStyles","style","onMouseUp","Altimeter","ELEMENT_TYPE_PROPERTIES","isExpandToFit","isAutoResize","shape","postit","TextEditor","handleLostFocus","handleUpdatedText","data","newText","textInput","innerText","textContent","trim","handleKeyPress","textContainer","scrollHeight","clientHeight","newFontSize","gridSpace","handleSetElementHeight","handlePaste","preventDefault","document","execCommand","clipboardData","getData","handleGotFocus","position","alignItems","justifyContent","visibility","starterText","editorKey","componentStyles","cx","cy","top","left","overflow","split","map","line","onKeyPress","ref","container","contentEditable","input","onBlur","onFocus","onPaste","suppressContentEditableWarning","focus","createRange","range","selectNodeContents","collapse","selection","window","getSelection","removeAllRanges","addRange","themes","light","preDefinedColors","primaryColors","dark","ThemeContext","React","createContext","PredefinedColorOption","handleSelectColor","handleUpdateElementProperty","property","value","colorID","backgroundColor","PredefinedColorPicker","subMenuOpen","currentOpenSubMenu","theme","selectedColor","fillColor","title","contextType","CustomColorOption","handleUpdateColor","TransparentColorOption","handleOpacityChange","target","border","CustomColorPicker","newFillOpacity","currentStyles","name","min","max","step","onChange","CustomBorderColorOption","TransparentBorderColorOption","CustomBorderColorPicker","newStrokeOpacity","borderColor","BorderStyle","handleSolidChange","handleDashedChange","handleDottedChange","String","handleWidthChange","solidSelected","dashedSelected","dottedSelected","computedStrokeWidth","ceil","xmlns","viewBox","FONT_FAMILIES","FontStyle","handleBoldChange","newFontWeight","handleItalicChange","newFontStyle","handleUnderlineChange","indexOf","replace","handleStrikeThroughChange","handleFontChange","boldSelected","italicSelected","underlineSelected","strikeThroughSelected","font","CenterIcon","iconColor","LeftIcon","RightIcon","TextAlignment","handleLeftChange","handleRightChange","handleCenterChange","leftSelected","centerSelected","rightSelected","currentIcon","Link","DepthSetter","handleBringForward","handleShiftElementPosition","ids","handleSendBackward","isForward","ElementLocker","handleToggleLock","isLocked","opacity","ElementDeleter","handleDeleteElements","ElementEditorMenu","URL","handleURLChange","shapeTypeEditableFeatures","multiElementEditableFeatures","ElementEditor","selectedElements","containerPosition","boundingBox","containerClass","editButtonTypes","editButtons","selectedIDs","element","halfEditorWidth","button","options","halfElementWidth","finalLeft","finalTop","Resizer","keys","forEach","item","newElementsData","elementID","wrapperStyles","isVisible","resizerStyles","highlightBoxPosition","elementHighlightStyles","r","cursor","handleMouseMove","ElementDrag","selectedItems","filter","rawHeight","rawWidth","rawX","rawY","currentSelectedElements","selectedElementKeys","prevSelectedElements","removedElements","addedElements","updateElementDragPosition","FileOption","loadFileFromBrowser","fileName","Navbar","handleOpenMenu","menuVisible","subMenu","saveToBrowser","applicationState","stateToSave","boardName","applicationCache","localStorage","getItem","Date","getHours","getMinutes","setItem","JSON","stringify","file","parse","handleUpdateElementsAndState","getSavedFromBrowser","files","loadFile","saveToMonday","monday","mondaySdk","storage","instance","checkFileList","getSavedFromMonday","loadFileFromMonday","mondaySaveAvailable","menuCSS","letFirstMenuHidden","ry","rx","loadFromMonday","location","ancestorOrigins","rfc6902","require","UndoRedo","handleUndo","newUndo","undo","newUpdates","updates","lastUndoAction","pop","lastUpdateAction","newRedo","redo","newCombinedData","applyPatch","handleRedo","lastRedoAction","undoIsPossible","redoIsPossible","undoRedoStyles","redoStyles","pointerEvents","undoStyles","prevCombinedData","currentCombinedData","elementsDiffUpdates","createPatch","elementsDiffUndo","BoardControls","InteractionManager","handleZoom","dir","sign","deltaY","nextZoomLevel","currentCursorPositionX","currentCursorPositionY","newOffsetX","newOffsetY","updateBoardPosition","handleMouseDown","dragStartTime","now","drag","console","log","wasFirstDrag","dragHandlers","handleMouseUp","interactionTime","interactionMovement","wasProbablyClick","onMouseDown","onMouseMove","onWheel","children","KeyboardManager","textEditor","ctrlKey","metaKey","handleDuplicateElements","addEventListener","removeEventListener","handleSelect","isMultiSelect","handleSetCurrentElement","handleTextEdit","shapeProps","outline","textBody","lineHeight","padding","triangleStart","triangleMid","triangleEnd","points","onDoubleClick","setTimeout","postItShapeTypes","path","dropShadow","postItShapeData","postItColor","x2","y2","handleCrop","image","imgStyle","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition","objectClone","obj","clone","subPropertyKey","Board","handleDeselectAllElements","newElements","elementData","unScaledFontSize","newElementStateData","newDragHandlers","newHandlers","bind","Number","newElement","newElementsState","newIdsOrder","arrayPosition","splice","realSpaceX","realSpaceY","realSpaceX1","realSpaceY1","isWithinArea","duplicatesOffsetPosition","elementX1","duplicateElement","duplicateElementState","toLocaleDateString","combinedWidth","combinedHeight","itemWidth","itemHeight","itemX","itemY","itemCX","itemCY","zoomedWidth","zoomedHeight","elementNodes","calculateSelectedElementsBoundingBox","gridPosition","updateDragPosition","in","stdDeviation","markerWidth","markerHeight","refX","refY","orient","markerUnits","handlePanMove","App","handleWindowResize","innerWidth","innerHeight","Provider","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.6577c024.chunk.js","sourcesContent":["import React, {Component} from 'react';\n\nimport './styles.css';\n\nclass Tool extends Component {\n  \n    handleToolSelect = (e) => {\n        this.props.handleToolSelect(this.props.type);\n        this.props.handleDrawCanvasShow();\n        this.props.registerDragHandler(\"drawCanvas\", {\n            \"dragStartHandler\" : this.props.handleDragStart,\n            \"dragMoveHandler\" : this.props.handleDragMove,\n            \"dragEndHandler\" : this.props.handleDragEnd,\n            \"clickHandler\" : this.props.handleClick\n        });\n    }\n\n    render() {\n\n        const {\n            currentSelectedTool,\n            type\n        } = this.props;\n        \n        let isSelectedCSS = \"\";\n\n        if(type === currentSelectedTool) {\n            isSelectedCSS = \"toolbar_tool_selected\";\n        }\n\n        return (\n            <div \n                className={`toolbar_tool toolbar_${this.props.type} ${isSelectedCSS}`}\n                onClick={this.handleToolSelect}\n            ></div>\n        );\n    }\n\n    componentDidUpdate() {\n\n        if(this.props.autoActivate) {\n            this.handleToolSelect();\n        }\n\n    }\n    \n  }\n\n  export default Tool;","import React, {Component} from 'react';\nimport Tool from './tool';\n\nimport './styles.css';\n\n\nclass Select extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n          x : 0,\n          y : 0,\n          x1 : 0,\n          y1 : 0\n        };\n    }\n\n    handleSelectStart = (e, dragStartX, dragStartY) => {\n        this.props.handleShowSelectionArea(true, e, dragStartX, dragStartY);\n        \n        this.setState({\n            x : dragStartX,\n            y : dragStartY,\n            x1 : dragStartX,\n            y1 : dragStartY\n        });\n    }\n\n    handleSelectMove = (e) => {\n        const selectionAreaUpdate = {\n            x : this.state.x,\n            y : this.state.y,\n            x1 : this.state.x1+e.movementX,\n            y1 : this.state.y1+e.movementY\n        };\n        this.props.handleUpdateSelectionArea(selectionAreaUpdate);\n        this.setState(selectionAreaUpdate);\n    }\n\n    handleSelectEnd = (e) => {\n        const {\n            x,\n            y,\n            x1,\n            y1\n        } = this.state;\n        const selectionArea = {\n            x,\n            y,\n            x1,\n            y1\n        };\n        if(x > x1) {\n            selectionArea.x = x1;\n            selectionArea.x1 = x;\n        }\n        if(y > y1) {\n            selectionArea.y = y1;\n            selectionArea.y1 = y;\n        }\n        this.props.handleSelectElementsWithinArea(selectionArea.x, selectionArea.y, selectionArea.x1, selectionArea.y1);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            handleDrawCanvasShow,\n            registerDragHandler,\n            currentSelectedTool\n        } = this.props;\n       \n        return (\n            <Tool type=\"select\" \n                handleToolSelect={handleToolSelect}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleDragStart={this.handleSelectStart}\n                handleDragMove={this.handleSelectMove}\n                handleDragEnd={this.handleSelectEnd}\n                currentSelectedTool={currentSelectedTool} \n            />\n        );\n    }\n    \n  }\n\n  export default Select;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nclass MultiTool extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            toolSubMenuOpen : false\n        };\n    }\n  \n    handleOpenSubMenu = (e) => {\n        e.stopPropagation();\n        this.setState({\n            toolSubMenuOpen : !this.state.toolSubMenuOpen\n        });\n        this.props.handleSetCurrentOpenSubMenu(this.props.type);\n    }\n  \n    render() {\n\n        let submenuCSS = \"toolbar_submenu\";\n        if(this.state.toolSubMenuOpen && this.props.subMenuItems) {\n          submenuCSS += \" toolbar_isVisible\";\n        }\n\n        return (\n            <div \n                className={`toolbar_tool toolbar_${this.props.type}`}\n                onClick={this.handleOpenSubMenu}\n            >\n                <div className={submenuCSS}>\n                    <div className={\"leftArrow\"} />\n                    {this.props.subMenuItems}\n                </div>\n            </div>\n        );\n    }\n\n    componentDidUpdate() {\n        if( this.state.toolSubMenuOpen &&\n            this.props.openSubMenu !== this.props.type) {\n                this.setState({toolSubMenuOpen : false});\n        }\n    }\n    \n  }\n\n  export default MultiTool;","import React, {Component} from 'react';\nimport Shortid from 'shortid';\nimport Tool from './tool';\n\nimport './styles.css';\n\n\nclass Shape extends Component {\n\n    handleShapeClick(e, dragStartX, dragStartY) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        const width = 120;\n        newState.elements[newID] = {\n            id : newID,\n            type : \"shape\",\n            shapeType : 1,\n            fixedRatio : \"true\",\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX-((width/2)*currentState.zoomLevel),\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY-((width/2)*currentState.zoomLevel),\n                width : width*currentState.zoomLevel,\n                height: width*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.dragStartHandler = null;\n        newState.dragMoveHandler = null;\n        newState.dragEndHandler = null;\n        newState.clickHandler = null;\n        newState.tool = \"pan\";\n        newState.storeUndo = true;\n        this.removeDragHandler(\"drawCanvas\");\n        this.setState(newState);\n    }\n\n    handleShapeDragStart(e, dragStartX, dragStartY, width) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        newState.elements[newID] = {\n            id : newID,\n            type : \"shape\",\n            shapeType : 1,\n            fixedRatio : \"true\",\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY,\n                width : width*currentState.zoomLevel,\n                height: width*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.elementBeingDrawn = newID;\n        newState.storeUndo = true;\n        this.setState(newState);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            handleDrawCanvasShow,\n            registerDragHandler,\n            handleDragMove,\n            handleDragEnd,\n            autoActivate,\n            currentSelectedTool\n        } = this.props;\n\n        return (\n           \n            <Tool type=\"shapeCircle\" \n                handleToolSelect={handleToolSelect}\n                currentSelectedTool={currentSelectedTool}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleClick={this.handleShapeClick}\n                handleDragStart={this.handleShapeDragStart}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                autoActivate={autoActivate}\n            />\n                   \n        );\n    }\n    \n  }\n\n  export default Shape;","import React, {Component} from 'react';\nimport Shortid from 'shortid';\nimport Tool from './tool';\n\nimport './styles.css';\n\n\nclass Shape extends Component {\n\n    handleShapeClick(e, dragStartX, dragStartY) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        const width = 240,\n              height = 120;\n        newState.elements[newID] = {\n            id : newID,\n            type : \"shape\",\n            shapeType : 0,\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX-((width/2)*currentState.zoomLevel),\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY-((height/2)*currentState.zoomLevel),\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.dragStartHandler = null;\n        newState.dragMoveHandler = null;\n        newState.dragEndHandler = null;\n        newState.clickHandler = null;\n        newState.tool = \"pan\";\n        newState.storeUndo = true;\n        this.removeDragHandler(\"drawCanvas\");\n        this.setState(newState);\n    }\n\n    handleShapeDragStart(e, dragStartX, dragStartY, width, height) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        newState.elements[newID] = {\n            id : newID,\n            type : \"shape\",\n            shapeType : 0,\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY,\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.elementBeingDrawn = newID;\n        newState.storeUndo = true;\n        this.setState(newState);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            handleDrawCanvasShow,\n            registerDragHandler,\n            handleDragMove,\n            handleDragEnd,\n            autoActivate,\n            currentSelectedTool\n        } = this.props;\n\n\n        return (\n           \n            <Tool type=\"shapeRect\" \n                handleToolSelect={handleToolSelect}\n                currentSelectedTool={currentSelectedTool}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleClick={this.handleShapeClick}\n                handleDragStart={this.handleShapeDragStart}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                autoActivate={autoActivate}\n            />\n                   \n        );\n    }\n    \n  }\n\n  export default Shape;","import React, {Component} from 'react';\nimport Shortid from 'shortid';\nimport Tool from './tool';\n\nimport './styles.css';\n\n\nclass Shape extends Component {\n\n    handleShapeClick(e, dragStartX, dragStartY) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        const width = 120,\n              height = 120;\n        newState.elements[newID] = {\n            id : newID,\n            type : \"shape\",\n            shapeType : 2,\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX-((width/2)*currentState.zoomLevel),\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY-((height/2)*currentState.zoomLevel),\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.dragStartHandler = null;\n        newState.dragMoveHandler = null;\n        newState.dragEndHandler = null;\n        newState.clickHandler = null;\n        newState.tool = \"pan\";\n        newState.storeUndo = true;\n        this.removeDragHandler(\"drawCanvas\");\n        this.setState(newState);\n    }\n\n    handleShapeDragStart(e, dragStartX, dragStartY, width, height) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        newState.elements[newID] = {\n            id : newID,\n            type : \"shape\",\n            shapeType : 2,\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY,\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.elementBeingDrawn = newID;\n        newState.storeUndo = true;\n        this.setState(newState);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            handleDrawCanvasShow,\n            registerDragHandler,\n            handleDragMove,\n            handleDragEnd,\n            autoActivate,\n            currentSelectedTool\n        } = this.props;\n\n\n        return (\n           \n            <Tool type=\"shapeTriangle\" \n                handleToolSelect={handleToolSelect}\n                currentSelectedTool={currentSelectedTool}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleClick={this.handleShapeClick}\n                handleDragStart={this.handleShapeDragStart}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                autoActivate={autoActivate}\n            />\n                   \n        );\n    }\n    \n  }\n\n  export default Shape;","import React, {Component} from 'react';\nimport MultiTool from './multiTool';\n\nimport './styles.css';\n\nimport ShapeCircle from './shapeCircle';\nimport ShapeRect from './shapeRect';\nimport ShapeTriangle from './shapeTriangle';\n\n\nclass Shape extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n          previousSelectedShapeTool : \"shapeRect\",\n          menuActivated : false\n        };\n    }\n\n    handleToolSelect = (tool) => {\n        if(this.props.currentSelectedTool !== tool) {\n            this.setState({\n                previousSelectedShapeTool : tool\n            });\n            this.props.handleToolSelect(tool);\n        }\n    }\n  \n    render() {\n        const {\n            handleDrawCanvasShow,\n            registerDragHandler,\n            handleDragMove,\n            handleDragEnd,\n            currentSelectedTool\n        } = this.props;\n\n        const autoActivate = {\n            shapeRect : false,\n            shapeCircle : false,\n            shapeTriangle : false\n        };\n\n        if(this.state.menuActivated) {\n            autoActivate[this.state.previousSelectedShapeTool] = true;\n        }\n\n        const subMenuTools = [\n            <ShapeRect\n                key={\"tool_shapeRect\"}\n                handleToolSelect={this.handleToolSelect}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                currentSelectedTool={currentSelectedTool}\n                autoActivate={autoActivate.shapeRect}\n            />,\n            <ShapeCircle\n                key={\"tool_shapeCircle\"}\n                handleToolSelect={this.handleToolSelect}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                currentSelectedTool={currentSelectedTool}\n                autoActivate={autoActivate.shapeCircle}\n\n            />,\n            <ShapeTriangle\n                key={\"tool_shapeTriangle\"} \n                handleToolSelect={this.handleToolSelect}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                currentSelectedTool={currentSelectedTool}\n                autoActivate={autoActivate.shapeTriangle}\n            />\n        ];\n\n        return (\n           \n            <MultiTool \n                type=\"shape\" \n                subMenuItems={subMenuTools}\n                openSubMenu={this.props.openSubMenu}\n                handleSetCurrentOpenSubMenu={this.props.handleSetCurrentOpenSubMenu} \n            />\n                   \n        );\n    }\n\n    componentDidUpdate(prevProps) {\n        if(this.props.openSubMenu !== prevProps.openSubMenu && this.props.openSubMenu === \"shape\") {\n            this.setState({menuActivated : true});\n        } else if (this.state.menuActivated) {\n            this.setState({menuActivated : false});\n        }\n    }   \n    \n  }\n\n  export default Shape;","import React, {Component} from 'react';\nimport Shortid from 'shortid';\nimport Tool from './tool';\n\nimport './styles.css';\n\n\nclass Postit extends Component {\n\n    handlePostitClick(e) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        newState.elements[newID] = {\n            id : newID,\n            type : \"postit\",\n            subType : \"square\",\n            fixedRatio : \"true\",\n            predefinedColor : 3,\n            styles : {\n                x : (e.clientX*currentState.zoomLevel)+currentState.offsetX,\n                y : (e.clientY*currentState.zoomLevel)+currentState.offsetY,\n                width : 128*currentState.zoomLevel,\n                height: 128*currentState.zoomLevel,\n                fillOpacity: 0,\n                strokeWidth : 2*currentState.zoomLevel\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {};\n        let min = 0,\n            max = 3;\n        newState.elementState[newID].shapeType = Math.floor(Math.random() * (max - min + 1)) + min;\n        newState.dragStartHandler = null;\n        newState.dragMoveHandler = null;\n        newState.dragEndHandler = null;\n        newState.clickHandler = null;\n        newState.tool = \"pan\";\n        newState.storeUndo = true;\n        this.removeDragHandler(\"drawCanvas\");\n        this.setState(newState);\n    }\n\n    handlePostitDragStart(e) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        newState.elements[newID] = {\n            id : newID,\n            type : \"postit\",\n            subType : \"square\",\n            fixedRatio : \"true\",\n            predefinedColor : 3,\n            styles : {\n                x : (e.clientX*currentState.zoomLevel)+currentState.offsetX,\n                y : (e.clientY*currentState.zoomLevel)+currentState.offsetY,\n                width : 128*currentState.zoomLevel,\n                height: 128*currentState.zoomLevel,\n                fillOpacity: 0,\n                strokeWidth : 2*currentState.zoomLevel\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {};\n        let min = 0,\n            max = 3;\n        newState.elementState[newID].shapeType = Math.floor(Math.random() * (max - min + 1)) + min;\n        newState.storeUndo = true;\n        newState.elementBeingDrawn = newID;\n        this.setState(newState);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            handleDrawCanvasShow,\n            registerDragHandler,\n            handleDragMove,\n            handleDragEnd,\n            currentSelectedTool\n        } = this.props;\n\n        return (\n            <Tool type=\"postit\" \n                handleToolSelect={handleToolSelect}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleClick={this.handlePostitClick}\n                handleDragStart={this.handlePostitDragStart}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                currentSelectedTool={currentSelectedTool}\n            />    \n        );\n    }\n    \n  }\n\n  export default Postit;","import React, {Component} from 'react';\nimport Shortid from 'shortid';\nimport Tool from './tool';\n\nimport './styles.css';\n\n\nclass Text extends Component {\n\n    handleTextClick(e, dragStartX, dragStartY) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        newState.elements[newID] = {\n            id : newID,\n            type : \"text\",\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY,\n                width : 240*currentState.zoomLevel,\n                height: (24*1.4)*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 0,\n                strokeWidth : 2*currentState.zoomLevel\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\"\n            },\n            text : \"\"\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.dragStartHandler = null;\n        newState.dragMoveHandler = null;\n        newState.dragEndHandler = null;\n        newState.clickHandler = null;\n        newState.tool = \"pan\";\n        this.removeDragHandler(\"drawCanvas\");\n        this.setState(newState);\n    }\n\n    handleTextDragStart(e, dragStartX, dragStartY, width, height) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        newState.elements[newID] = {\n            id : newID,\n            type : \"text\",\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY,\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 0,\n                strokeWidth : 2*currentState.zoomLevel\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\"\n            },\n            text : \"\"\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.elementBeingDrawn = newID;\n        this.setState(newState);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            handleDrawCanvasShow,\n            registerDragHandler,\n            handleDragMove,\n            handleDragEnd,\n            currentSelectedTool\n        } = this.props;\n       \n        return (\n            <Tool type=\"text\" \n                handleToolSelect={handleToolSelect}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleClick={this.handleTextClick}\n                handleDragStart={this.handleTextDragStart}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd} \n                currentSelectedTool={currentSelectedTool}\n            />\n        );\n    }\n    \n  }\n\n  export default Text;","import React, {Component} from 'react';\nimport Shortid from 'shortid';\nimport Tool from './tool';\n\nimport './styles.css';\n\n\nclass LineStraight extends Component {\n\n    handleShapeClick(e, dragStartX, dragStartY) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        const width = 120,\n              height = 120;\n        newState.elements[newID] = {\n            id : newID,\n            type : \"line\",\n            shapeType : 0,\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY-(height*currentState.zoomLevel),\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\",\n                markerEnd : \"url(#arrow)\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.dragStartHandler = null;\n        newState.dragMoveHandler = null;\n        newState.dragEndHandler = null;\n        newState.clickHandler = null;\n        newState.tool = \"pan\";\n        newState.storeUndo = true;\n        this.removeDragHandler(\"drawCanvas\");\n        this.setState(newState);\n    }\n\n    handleShapeDragStart(e, dragStartX, dragStartY, width, height) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        newState.elements[newID] = {\n            id : newID,\n            type : \"line\",\n            shapeType : 0,\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY-(height*currentState.zoomLevel),\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\",\n                markerEnd : \"url(#arrow)\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.elementBeingDrawn = newID;\n        newState.storeUndo = true;\n        this.setState(newState);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            handleDrawCanvasShow,\n            registerDragHandler,\n            handleDragMove,\n            handleDragEnd,\n            autoActivate,\n            currentSelectedTool\n        } = this.props;\n\n\n        return (\n           \n            <Tool type=\"lineStraight\" \n                handleToolSelect={handleToolSelect}\n                currentSelectedTool={currentSelectedTool}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleClick={this.handleShapeClick}\n                handleDragStart={this.handleShapeDragStart}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                autoActivate={autoActivate}\n            />\n                   \n        );\n    }\n    \n  }\n\n  export default LineStraight;","import React, {Component} from 'react';\nimport Shortid from 'shortid';\nimport Tool from './tool';\n\nimport './styles.css';\n\n\nclass Shape extends Component {\n\n    handleShapeClick(e, dragStartX, dragStartY) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        const width = 120,\n              height = 120;\n        newState.elements[newID] = {\n            id : newID,\n            type : \"line\",\n            shapeType : 1,\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY-(height*currentState.zoomLevel),\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\",\n                markerEnd : \"url(#arrow)\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.dragStartHandler = null;\n        newState.dragMoveHandler = null;\n        newState.dragEndHandler = null;\n        newState.clickHandler = null;\n        newState.tool = \"pan\";\n        newState.storeUndo = true;\n        this.removeDragHandler(\"drawCanvas\");\n        this.setState(newState);\n    }\n\n    handleShapeDragStart(e, dragStartX, dragStartY, width, height) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        newState.elements[newID] = {\n            id : newID,\n            type : \"line\",\n            shapeType : 1,\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY-(height*currentState.zoomLevel),\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\",\n                markerEnd : \"url(#arrow)\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.elementBeingDrawn = newID;\n        newState.storeUndo = true;\n        this.setState(newState);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            handleDrawCanvasShow,\n            registerDragHandler,\n            handleDragMove,\n            handleDragEnd,\n            autoActivate,\n            currentSelectedTool\n        } = this.props;\n\n\n        return (\n           \n            <Tool type=\"lineSmooth\" \n                handleToolSelect={handleToolSelect}\n                currentSelectedTool={currentSelectedTool}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleClick={this.handleShapeClick}\n                handleDragStart={this.handleShapeDragStart}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                autoActivate={autoActivate}\n            />\n                   \n        );\n    }\n    \n  }\n\n  export default Shape;","import React, {Component} from 'react';\nimport Shortid from 'shortid';\nimport Tool from './tool';\n\nimport './styles.css';\n\n\nclass Shape extends Component {\n\n    handleShapeDragStart(e, dragStartX, dragStartY, width, height) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        const currentX = (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n              currentY = (dragStartY*currentState.zoomLevel)+currentState.offsetY;\n        newState.elements[newID] = {\n            id : newID,\n            type : \"line\",\n            shapeType : 2,\n            styles : {\n                x : currentX,\n                y : currentY,\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                d : \"\",\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : currentState.zoomLevel,\n                strokeDasharray : \"0\"\n            },\n            fontStyle : {\n                fontSize : 24*currentState.zoomLevel,\n                fontFamily : \"\",\n                fontWeight : \"normal\",\n                fontStyle : \"normal\",\n                textDecorationLine : \"\",\n                color : \"#080808\",\n                textAlign: \"center\" \n            },\n            text : \"\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true,\n            pathBuffer : [],\n            smoothingLevel : 8,\n            currentPath : `M ${currentX} ${currentY}`\n        };\n        newState.elementBeingDrawn = newID;\n        newState.storeUndo = true;\n        this.setState(newState);\n    }\n\n    handleDragMove(e) {\n\n        var getUpdatedPointsBuffer = function(e, currentState, newElementState) {\n            const {\n                zoomLevel,\n                offsetX,\n                offsetY,\n                elementBeingDrawn\n            } = currentState;\n    \n            const currentElementState = newElementState[elementBeingDrawn];\n    \n            const x = (e.clientX*zoomLevel)+offsetX,\n                  y = (e.clientY*zoomLevel)+offsetY;\n    \n            currentElementState.pathBuffer.push({ x, y });\n    \n            while (currentElementState.pathBuffer.length > currentElementState.smoothingLevel) {\n                currentElementState.pathBuffer.shift();\n            }\n            return newElementState;\n        }\n    \n        var getUpdatedSvgPath = function(currentPath, buffer, smoothingLevel) {\n            var pt = getAveragePoint(0, buffer, smoothingLevel);\n            var tmpPath = \"\";\n        \n            if (pt) {\n                // Get the smoothed part of the path that will not change\n                currentPath += \" L\" + pt.x + \" \" + pt.y;\n        \n                // Get the last part of the path (close to the current mouse position)\n                // This part will change if the mouse moves again\n                \n                for (var offset = 2; offset < buffer.length; offset += 2) {\n                    pt = getAveragePoint(offset, buffer, smoothingLevel);\n                    tmpPath += \" L\" + pt.x + \" \" + pt.y;\n                }\n            }\n            return {\n                currentPath,\n                tmpPath\n            };\n        };\n    \n        var getAveragePoint = function(offset, buffer, smoothingLevel) {\n            var len = buffer.length;\n            if (len % 2 === 1 || len >= smoothingLevel) {\n                var totalX = 0;\n                var totalY = 0;\n                var pt, i;\n                var count = 0;\n                for (i = offset; i < len; i++) {\n                    count++;\n                    pt = buffer[i];\n                    totalX += pt.x;\n                    totalY += pt.y;\n                }\n                return {\n                    x: totalX / count,\n                    y: totalY / count\n                }\n            }\n            return null;\n        };\n\n        const currentState = this.state;\n        const newState = {};\n        if(currentState.elementBeingDrawn !== null) {\n            const newElementGraph = {...currentState.elements};\n            let newElementState = {...currentState.elementState};\n\n            newElementState = getUpdatedPointsBuffer(e, currentState, newElementState);\n\n            const currentPath = newElementState[currentState.elementBeingDrawn].currentPath;\n\n            const currentPathBuffer = newElementState[currentState.elementBeingDrawn].pathBuffer;\n            const smoothingLevel = newElementState[currentState.elementBeingDrawn].smoothingLevel;\n            const newPath = getUpdatedSvgPath(currentPath, currentPathBuffer, smoothingLevel);\n\n            newElementGraph[currentState.elementBeingDrawn].styles.d = newPath.currentPath+newPath.tmpPath;\n            newElementState[currentState.elementBeingDrawn].currentPath = newPath.currentPath;\n            \n            newState.elements = newElementGraph;\n            newState.elementState = newElementState;\n        }\n        this.setState(newState);\n    }\n\n    handleDragEnd() {\n        const newState = {};\n        newState.tool = \"pan\";\n        this.setState(newState);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            handleDrawCanvasShow,\n            registerDragHandler,\n            autoActivate,\n            currentSelectedTool\n        } = this.props;\n\n        return (\n           \n            <Tool type=\"lineFreehand\" \n                handleToolSelect={handleToolSelect}\n                currentSelectedTool={currentSelectedTool}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleDragStart={this.handleShapeDragStart}\n                handleDragMove={this.handleDragMove}\n                handleDragEnd={this.handleDragEnd}\n                autoActivate={autoActivate}\n            />\n                   \n        );\n    }\n    \n  }\n\n  export default Shape;","import React, {Component} from 'react';\nimport MultiTool from './multiTool';\n\nimport LineStraight from \"./lineStraight\";\nimport LineSmooth from \"./lineSmooth\";\nimport LineFreehand from \"./lineFreehand\";\n\nimport './styles.css';\n\n\n\nclass Line extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n          previousSelectedShapeTool : \"shapeRect\",\n          menuActivated : false\n        };\n    }\n\n    handleToolSelect = (tool) => {\n        if(this.props.currentSelectedTool !== tool) {\n            this.setState({\n                previousSelectedShapeTool : tool\n            });\n            this.props.handleToolSelect(tool);\n        }\n    }\n  \n    render() {\n        const {\n            handleDrawCanvasShow,\n            registerDragHandler,\n            handleDragMove,\n            handleDragEnd,\n            currentSelectedTool\n        } = this.props;\n\n        const autoActivate = {\n            shapeRect : false,\n            shapeCircle : false,\n            shapeTriangle : false\n        };\n\n        if(this.state.menuActivated) {\n            autoActivate[this.state.previousSelectedShapeTool] = true;\n        }\n\n        const subMenuTools = [\n            <LineStraight\n                key={\"tool_lineStraight\"}\n                handleToolSelect={this.handleToolSelect}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                currentSelectedTool={currentSelectedTool}\n                autoActivate={autoActivate.shapeRect}\n            />,\n            <LineSmooth\n                key={\"tool_lineSmooth\"}\n                handleToolSelect={this.handleToolSelect}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                currentSelectedTool={currentSelectedTool}\n                autoActivate={autoActivate.shapeCircle}\n\n            />,\n            <LineFreehand\n                key={\"tool_lineFreehand\"}\n                handleToolSelect={this.handleToolSelect}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                currentSelectedTool={currentSelectedTool}\n                autoActivate={autoActivate.shapeTriangle}\n            />\n        ];\n\n        return (\n           \n            <MultiTool \n                type=\"line\" \n                subMenuItems={subMenuTools}\n                openSubMenu={this.props.openSubMenu}\n                handleSetCurrentOpenSubMenu={this.props.handleSetCurrentOpenSubMenu} \n            />\n                   \n        );\n    }\n\n    componentDidUpdate(prevProps) {\n        if(this.props.openSubMenu !== prevProps.openSubMenu && this.props.openSubMenu === \"line\") {\n            this.setState({menuActivated : true});\n        } else if (this.state.menuActivated) {\n            this.setState({menuActivated : false});\n        }\n    }   \n    \n  }\n\n  export default Line;","import React, {Component} from 'react';\nimport Shortid from 'shortid';\nimport Tool from './tool';\n\nimport './styles.css';\n\n\nclass Image extends Component {\n\n    handleShapeClick(e, dragStartX, dragStartY) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        const width = 120,\n              height = 120;\n        newState.elements[newID] = {\n            id : newID,\n            type : \"image\",\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX-((width/2)*currentState.zoomLevel),\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY-((height/2)*currentState.zoomLevel),\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\"\n            },\n            imgURL : \"/miral/icons/insert_photo-noBorder-24px.svg\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.dragStartHandler = null;\n        newState.dragMoveHandler = null;\n        newState.dragEndHandler = null;\n        newState.clickHandler = null;\n        newState.tool = \"pan\";\n        newState.storeUndo = true;\n        this.removeDragHandler(\"drawCanvas\");\n        this.setState(newState);\n    }\n\n    handleShapeDragStart(e, dragStartX, dragStartY, width, height) {\n        const currentState = this.state;\n        const newState = {};\n        newState.elements = {...currentState.elements};\n        const newID = Shortid.generate();\n        newState.elements[newID] = {\n            id : newID,\n            type : \"image\",\n            styles : {\n                x : (dragStartX*currentState.zoomLevel)+currentState.offsetX,\n                y : (dragStartY*currentState.zoomLevel)+currentState.offsetY,\n                width : width*currentState.zoomLevel,\n                height: height*currentState.zoomLevel,\n                fillOpacity: 0,\n                fill: \"#ffffff\",\n                stroke : \"#000000\",\n                strokeOpacity : 1,\n                strokeWidth : 2*currentState.zoomLevel,\n                strokeDasharray : \"0\"\n            },\n            imgURL : \"/miral/icons/insert_photo-noBorder-24px.svg\",\n            initialZoomLevel : currentState.zoomLevel\n        };\n        newState.elementState = {...currentState.elementState};\n        newState.elementState[newID] = {\n            selected : true\n        };\n        newState.elementBeingDrawn = newID;\n        newState.storeUndo = true;\n        this.setState(newState);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            handleDrawCanvasShow,\n            registerDragHandler,\n            handleDragMove,\n            handleDragEnd,\n            autoActivate,\n            currentSelectedTool\n        } = this.props;\n\n\n        return (\n           \n            <Tool type=\"image\" \n                handleToolSelect={handleToolSelect}\n                currentSelectedTool={currentSelectedTool}\n                handleDrawCanvasShow={handleDrawCanvasShow}\n                registerDragHandler={registerDragHandler}\n                handleClick={this.handleShapeClick}\n                handleDragStart={this.handleShapeDragStart}\n                handleDragMove={handleDragMove}\n                handleDragEnd={handleDragEnd}\n                autoActivate={autoActivate}\n            />\n                   \n        );\n    }\n    \n  }\n\n  export default Image;","import React, {Component} from 'react';\n\nimport Select from './select';\nimport Shape from './shape';\nimport Postit from './postit';\nimport Text from './text';\nimport Line from './line';\nimport Image from './image';\n\nimport './styles.css';\n\nclass Toolbar extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n          openSubMenu : null\n        };\n    }\n\n\n    handleSetCurrentOpenSubMenu = (openSubMenu) => {\n        this.setState({openSubMenu});\n    }\n\n    handleElementDragMove(e) {\n        const currentState = this.state;\n        const newState = {};\n        if(currentState.elementBeingDrawn !== null) {\n            const newElementGraph = {...currentState.elements};\n            if(newElementGraph[currentState.elementBeingDrawn].fixedRatio) {\n                let multiplier = e.movementX;\n                if(e.movementY > multiplier) {\n                    multiplier = e.movementY;\n                }\n                newElementGraph[currentState.elementBeingDrawn].styles.width += multiplier*currentState.zoomLevel;\n                newElementGraph[currentState.elementBeingDrawn].styles.height += multiplier*currentState.zoomLevel;\n\n            } else {\n                newElementGraph[currentState.elementBeingDrawn].styles.width += e.movementX*currentState.zoomLevel;\n                newElementGraph[currentState.elementBeingDrawn].styles.height += e.movementY*currentState.zoomLevel;\n            }\n            newState.elements = newElementGraph;\n        }\n        this.setState(newState);\n    }\n\n    handleDragEnd() {\n        const newState = {};\n        newState.tool = \"pan\";\n        this.setState(newState);\n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            registerDragHandler,\n            handleShowSelectionArea,\n            handleUpdateSelectionArea,\n            handleDrawCanvasShow,\n            handleSelectElementsWithinArea,\n            currentSelectedTool\n        } = this.props;\n\n        return (\n            <div className=\"toolbar_container\">\n                <div className=\"toolbar\">\n                    <Select \n                        handleToolSelect={handleToolSelect}\n                        handleDrawCanvasShow={handleDrawCanvasShow}\n                        registerDragHandler={registerDragHandler}\n                        handleShowSelectionArea={handleShowSelectionArea}\n                        handleUpdateSelectionArea={handleUpdateSelectionArea}\n                        handleSelectElementsWithinArea={handleSelectElementsWithinArea}\n                        currentSelectedTool={currentSelectedTool}\n                        openSubMenu={this.state.openSubMenu}\n                        handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                    />\n                    <Shape\n                        handleToolSelect={handleToolSelect}\n                        handleDrawCanvasShow={handleDrawCanvasShow}\n                        registerDragHandler={registerDragHandler}\n                        handleDragMove={this.handleElementDragMove}\n                        handleDragEnd={this.handleDragEnd}\n                        currentSelectedTool={currentSelectedTool}\n                        openSubMenu={this.state.openSubMenu}\n                        handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                    />\n                    <Postit\n                        handleToolSelect={handleToolSelect}\n                        handleDrawCanvasShow={handleDrawCanvasShow}\n                        registerDragHandler={registerDragHandler}\n                        handleDragMove={this.handleElementDragMove}\n                        handleDragEnd={this.handleDragEnd}\n                        currentSelectedTool={currentSelectedTool}\n                        openSubMenu={this.state.openSubMenu}\n                        handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                    />\n                    <Text\n                        handleToolSelect={handleToolSelect}\n                        handleDrawCanvasShow={handleDrawCanvasShow}\n                        registerDragHandler={registerDragHandler}\n                        handleDragMove={this.handleElementDragMove}\n                        handleDragEnd={this.handleDragEnd}\n                        currentSelectedTool={currentSelectedTool}\n                        openSubMenu={this.state.openSubMenu}\n                        handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                    />\n                    <Line\n                        handleToolSelect={handleToolSelect}\n                        handleDrawCanvasShow={handleDrawCanvasShow}\n                        registerDragHandler={registerDragHandler}\n                        handleDragMove={this.handleElementDragMove}\n                        handleDragEnd={this.handleDragEnd}\n                        currentSelectedTool={currentSelectedTool}\n                        openSubMenu={this.state.openSubMenu}\n                        handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                    />\n                    <Image handleToolSelect={handleToolSelect}\n                        handleDrawCanvasShow={handleDrawCanvasShow}\n                        registerDragHandler={registerDragHandler}\n                        handleDragMove={this.handleElementDragMove}\n                        handleDragEnd={this.handleDragEnd}\n                        currentSelectedTool={currentSelectedTool}\n                    />\n                    {/*\n                    <MoreOptions\n                        //Slides\n                        //PDF\n                        //IFRAME\n                        //YOUTUBE\n                        //TRELLO\n                        //TIMER\n                        //VOTE\n\n                    />\n                    \n                    \n                    <Tool type=\"more\" handleToolSelect={handleToolSelect}/> */}\n                </div>\n            </div>\n        );\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if(\n            this.props.currentSelectedTool === \"pan\" &&\n            this.state.openSubMenu !== null && \n            prevState.openSubMenu === this.state.openSubMenu\n        ) {\n            this.setState({openSubMenu : null});\n        }\n    }\n    \n  }\n\n  export default Toolbar;","import React, {Component} from 'react';\n\nimport Toolbar from './toolbar';\n\nimport './styles.css';\n\nclass Tools extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n          drawCanvasVisible : false,\n          selectAreaVisible : false,\n          selectAreaPosition : {\n            x : 0,\n            y : 0,\n            width : 0,\n            height : 0,\n          }\n        };\n    }\n\n    handleDrawCanvasShow = () => {\n        this.setState({drawCanvasVisible : true});\n    }\n\n    handleDrawCanvasHide = () => {\n        const resetSelectArea = {\n            selectAreaVisible : false,\n            selectAreaPosition : {\n                x : 0,\n                y : 0,\n                width : 0,\n                height : 0,\n            }\n        };\n        const resetDrawCanvas = {\n            drawCanvasVisible : false\n        };\n        this.props.removeDragHandler(\"drawCanvas\");\n        this.props.handleToolSelect(\"pan\");\n        this.setState(Object.assign({}, resetSelectArea, resetDrawCanvas));\n    }\n\n    handleShowSelectionArea = (visible, event, dragStartX, dragStartY) => {\n        if(visible) {\n            this.setState({\n                selectAreaVisible : visible,\n                selectAreaPosition : {\n                    x : dragStartX,\n                    y : dragStartY,\n                    width : event.movementX,\n                    height : event.movementY,\n                }\n            });\n        }\n        \n    }\n\n    handleUpdateSelectionArea = (selectionAreaCoords) => {\n        const positionUpdate = {\n            width : selectionAreaCoords.x1-selectionAreaCoords.x,\n            height : selectionAreaCoords.y1-selectionAreaCoords.y\n        };\n        if(selectionAreaCoords.x > selectionAreaCoords.x1) {\n            positionUpdate.x = selectionAreaCoords.x1;\n            positionUpdate.width = selectionAreaCoords.x-selectionAreaCoords.x1;\n        }\n        if(selectionAreaCoords.y > selectionAreaCoords.y1) {\n            positionUpdate.y = selectionAreaCoords.y1;\n            positionUpdate.height = selectionAreaCoords.y-selectionAreaCoords.y1;\n        }\n        this.setState({\n            selectAreaPosition : Object.assign({}, this.state.selectAreaPosition, positionUpdate)\n        });\n        \n    }\n  \n    render() {\n        const {\n            handleToolSelect,\n            registerDragHandler,\n            handleSelectElementsWithinArea,\n            currentSelectedTool\n        } = this.props;\n        const {\n            selectAreaVisible,\n            selectAreaPosition\n        } = this.state;\n\n        const selectAreaStyle = {\n            display : \"none\"\n        };\n\n        if(selectAreaVisible) {\n            selectAreaStyle.display = \"block\";\n            selectAreaStyle.transform = `translate3d(${(selectAreaPosition.x)}px,${(selectAreaPosition.y)}px, 0)`\n            selectAreaStyle.width = `${selectAreaPosition.width}px`;\n            selectAreaStyle.height = `${selectAreaPosition.height}px`;\n        }\n\n        const drawCanvasStyles = {\n            display : \"none\"\n        };\n        if(this.state.drawCanvasVisible) {\n            drawCanvasStyles.display = \"block\";\n        }\n        return (\n            <div className=\"tools\">\n                <div \n                    id=\"drawCanvas\" \n                    style={drawCanvasStyles}\n                    onMouseUp={this.handleDrawCanvasHide}\n                >\n                    <div className={\"selectionArea\"} style={selectAreaStyle}/>\n                </div>\n                <Toolbar\n                    handleToolSelect={handleToolSelect} \n                    registerDragHandler={registerDragHandler}\n                    handleDrawCanvasShow={this.handleDrawCanvasShow}\n                    handleShowSelectionArea={this.handleShowSelectionArea}\n                    handleUpdateSelectionArea={this.handleUpdateSelectionArea}\n                    handleSelectElementsWithinArea={handleSelectElementsWithinArea}\n                    currentSelectedTool={currentSelectedTool}\n\n                />\n            </div>\n        );\n    }\n    \n  }\n\n  export default Tools;","import React, {Component} from 'react';\n\nimport './styles.css';\n\n\nclass Altimeter extends Component {\n  \n    render() {\n        return (\n            <div className={\"zoomLevel\"}>Scale : {this.props.zoomLevel}%</div>\n        );\n    }\n    \n  }\n\n  export default Altimeter;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst ELEMENT_TYPE_PROPERTIES = {\n    text : {\n        isExpandToFit : true,\n        isAutoResize : false\n    },\n    shape : {\n        isExpandToFit : false,\n        isAutoResize : true\n    },\n    postit : {\n        isExpandToFit : false,\n        isAutoResize : true\n    }\n};\n\nclass TextEditor extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        fontSize : 24*props.gridSpace.zoomLevel\n      };\n    }\n\n    handleLostFocus = (e) => {\n        this.props.handleUpdatedText({\n            id : this.props.data.id,\n            newText : (this.textInput.innerText || this.textInput.textContent).trim(),\n            fontSize : this.state.fontSize\n        });\n        // this.setState({\n        //     fontSize : 24*this.props.gridSpace.zoomLevel\n        // });\n    }\n\n    handleKeyPress = () => {\n\n        const { isAutoResize, isExpandToFit } = ELEMENT_TYPE_PROPERTIES[this.props.data.type];\n\n        if(isAutoResize && (this.textContainer.scrollHeight > this.textContainer.clientHeight)) {\n            let newFontSize = 0;\n            if(this.state.fontSize > 8*this.props.gridSpace.zoomLevel) {\n                newFontSize = this.state.fontSize - 8*this.props.gridSpace.zoomLevel;\n                \n            } else {\n                newFontSize = this.state.fontSize/2;\n            }\n            this.setState({fontSize : newFontSize});\n        } else if(isExpandToFit && (this.textContainer.scrollHeight > this.textContainer.clientHeight)) {\n            this.props.handleSetElementHeight(this.props.data.id, this.textContainer.scrollHeight);\n        }\n    }\n\n    handlePaste = (event) => {\n        event.preventDefault();\n        document.execCommand('inserttext', false, event.clipboardData.getData('text/plain'));\n    }\n\n    handleGotFocus = (e) => {\n        this.setState({\n            fontSize : this.props.data.fontStyle.fontSize\n        });\n    }\n\n    render() {\n       const {data, gridSpace} = this.props;\n       const styles = {\n           position : \"absolute\",\n           display : \"flex\",\n           alignItems : \"center\",\n           justifyContent : \"center\",\n           visibility: \"hidden\"\n       };\n       let starterText = \"\";\n       let editorKey = \"blank\";\n       if(data && data.id && data.styles) {\n        const componentStyles = data.styles;\n        let x = ((componentStyles.x || componentStyles.cx)/gridSpace.zoomLevel)-(gridSpace.offsetX/gridSpace.zoomLevel),\n            y = ((componentStyles.y || componentStyles.cy)/gridSpace.zoomLevel)-(gridSpace.offsetY/gridSpace.zoomLevel),\n            width = componentStyles.width/gridSpace.zoomLevel,\n            height = componentStyles.height/gridSpace.zoomLevel;\n        styles.top = `${y}px`;\n        styles.left = `${x}px`; \n        styles.height = `${height}px`; \n        styles.width = `${width}px`;\n        styles.visibility = \"visible\";\n        styles.overflow = \"scroll\";\n        if(data.text.length > 0) {\n            starterText = data.text.split(/\\n|\\r/).map((line, i) => {\n                return(<div key={`editor_${data.id}_${line}_${i}`}>{line}</div>);\n            });\n        }\n        editorKey=this.props.data.id;\n            \n       }\n        \n        return (\n            <div\n                style={styles}\n                onKeyPress={this.handleKeyPress}\n                ref={(container) => { this.textContainer = container; }}\n            >\n                <div \n                    key={`textEditor_${editorKey}`}\n                    contentEditable={true}\n                    ref={(input) => { this.textInput = input; }}\n                    className=\"textContainer\"\n                    onBlur={this.handleLostFocus}\n                    onFocus={this.handleGotFocus}\n                    onPaste={this.handlePaste}\n                    suppressContentEditableWarning={true}\n                    style={{\n                        fontSize : this.state.fontSize/this.props.gridSpace.zoomLevel\n                    }}\n                >\n                    {starterText}\n                </div>\n            </div>\n        );\n    }\n\n   componentDidUpdate(prevProps, prevState) {\n        this.textInput.focus();\n        const moveCaretToEnd = this.props.data ? this.props.data.text.length > 0 : false;\n\n        if(moveCaretToEnd && document.createRange) {\n            let range = document.createRange();\n            range.selectNodeContents(this.textInput);\n            range.collapse(false);\n            let selection = window.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n\n        // if(this.props.data && this.props.data.unScaledFontSize && this.props.data.unScaledFontSize !== this.state.fontSize) {\n        //     this.setState({fontSize : this.props.data.unScaledFontSize});\n        // }\n        //Can't remember why this was needed.\n   }\n\n    \n  }\n\n  export default TextEditor;","import React from 'react';\n\nexport const themes = {\n  light: {\n    preDefinedColors : [\n      \"#FC72A6\", //pink\n      \"#1B8CA6\", //blue\n      \"#C8DE02\", //green\n      \"#EBE000\", //yellow\n      \"#F2A105\" //orange\n    ],\n    primaryColors : [\n      \"#ffffff\", //white\n      \"#000000\", //black\n      \"#999\", //grey\n    ],\n  },\n  dark: {\n    \n  },\n};\n\nexport const ThemeContext = React.createContext(\n  themes.light\n);\n","import React, {Component} from 'react';\nimport {ThemeContext} from '../../../../../theme-context';\n\nimport './styles.css';\n\nclass PredefinedColorOption extends Component {\n\n  handleSelectColor = () => {\n    this.props.handleUpdateElementProperty({\n      property : \"predefinedColor\",\n      value : this.props.colorID\n    })\n  }\n\n  render() {\n      return <div \n              className={\"availableColor\"} \n              style={{backgroundColor: this.props.color}}\n              onClick={this.handleSelectColor}  \n            />\n  }\n\n}\n\nconst SUBMENU_NAME = \"PredefinedColorPicker\";\n\nclass PredefinedColorPicker extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        subMenuOpen : false\n      };\n    }\n\n    handleOpenSubMenu = () => {\n      this.setState({subMenuOpen : !this.state.subMenuOpen});\n      this.props.handleSetCurrentOpenSubMenu(SUBMENU_NAME);\n    }\n\n    componentDidUpdate() {\n      if(this.state.subMenuOpen && this.props.currentOpenSubMenu !== SUBMENU_NAME) {\n        this.setState({subMenuOpen : false});\n      }\n    }\n\n    render() {\n        const theme = this.context;\n        const selectedColor = {\n          backgroundColor : theme.preDefinedColors[this.props.fillColor] \n        };\n        let submenuCSS = \"predefinedColorPicker_submenu\";\n        if(this.state.subMenuOpen) {\n          submenuCSS += \" isVisible\";\n        }\n        \n        return (\n            <div className={\"predefinedColorPicker\"}>\n                <div \n                  className={\"selectedColor\"}\n                  style={selectedColor}\n                  onClick={this.handleOpenSubMenu}\n                  title={\"Change color\"}\n                ></div>\n                <div \n                  className={submenuCSS}\n                  onClick={this.handleOpenSubMenu}\n                >\n                    <div className={\"arrow\"} />\n                    {\n                      theme.preDefinedColors.map((color, i) => {\n                        return <PredefinedColorOption \n                                key={('preDefinedColorOption_'+color)}\n                                color={color} \n                                colorID={i}\n                                handleUpdateElementProperty={this.props.handleUpdateElementProperty}\n                              />\n                      })\n                    }\n                </div>\n            </div>\n        );\n    }\n\n    \n  }\n\n  PredefinedColorPicker.contextType = ThemeContext;\n\n  export default PredefinedColorPicker;","import React, {Component} from 'react';\nimport {ThemeContext} from '../../../../../theme-context';\n\nimport './styles.css';\n\nclass CustomColorOption extends Component {\n\n  handleSelectColor = () => {\n   this.props.handleUpdateColor(this.props.color);\n  }\n\n  render() {\n      return <div \n              className={\"availableColor\"} \n              style={{backgroundColor: this.props.color}}\n              onClick={this.handleSelectColor}  \n            />\n  }\n\n}\n\nclass TransparentColorOption extends Component {\n\n  handleSelectColor = () => {\n   this.props.handleOpacityChange({target : { value : 0 }});\n  }\n\n  render() {\n      return <div \n              className={\"availableColor\"} \n              style={{backgroundColor: \"#fff\", border: \"1px solid #999\"}}\n              onClick={this.handleSelectColor}  \n            >\n            <div className=\"transparentLine\" />\n            </div>\n  }\n\n}\n\nconst SUBMENU_NAME = \"CustomColorPicker\";\n\nclass CustomColorPicker extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        subMenuOpen : false\n      };\n    }\n\n    handleOpenSubMenu = () => {\n      this.setState({subMenuOpen : !this.state.subMenuOpen});\n      this.props.handleSetCurrentOpenSubMenu(SUBMENU_NAME);\n    }\n\n    handleUpdateColor = (color) => {\n      let newFillOpacity = this.props.currentStyles.fillOpacity;\n      if (newFillOpacity === 0) {\n        newFillOpacity = 1;\n      }\n      this.props.handleUpdateElementProperty({\n        property : \"styles\",\n        value : {...this.props.currentStyles, \"fill\" : color, fillOpacity : newFillOpacity} \n      });\n    }\n\n    handleOpacityChange = (e) => {\n      this.props.handleUpdateElementProperty({\n        property : \"styles\",\n        value : {...this.props.currentStyles, fillOpacity : e.target.value} \n      });\n    }\n\n    componentDidUpdate() {\n      if(this.state.subMenuOpen && this.props.currentOpenSubMenu !== SUBMENU_NAME) {\n        this.setState({subMenuOpen : false});\n      }\n    }\n\n    render() {\n        const theme = this.context;\n        const selectedColor = {\n          backgroundColor : this.props.currentStyles.fill \n        };\n        let submenuCSS = \"predefinedColorPicker_submenu\";\n        if(this.state.subMenuOpen) {\n          submenuCSS += \" isVisible\";\n        }\n        \n        return (\n            <div className={\"predefinedColorPicker\"}>\n                <div \n                  className={\"selectedColor\"}\n                  style={selectedColor}\n                  onClick={this.handleOpenSubMenu}\n                  title={\"Change color\"}\n                ></div>\n                <div \n                  className={submenuCSS}\n                >\n                    <div className={\"arrow\"} />\n                    <TransparentColorOption \n                      key={('customColorOption_transparent')}\n                      handleOpacityChange={this.handleOpacityChange}\n                    />\n                    {\n                      theme.preDefinedColors.map((color, i) => {\n                        return <CustomColorOption \n                                key={('preDefinedColorOption_'+color)}\n                                color={color} \n                                colorID={i}\n                                handleUpdateColor={this.handleUpdateColor}\n                              />\n                      })\n                    }\n                    <div\n                     className=\"opacityPicker\"\n                    >\n                      <div  className=\"opacityLabel\" >Opacity:</div>\n                      <input \n                        type=\"number\" \n                        id=\"opacity\" \n                        name=\"opacity\" \n                        min=\"0\" \n                        max=\"1\"\n                        step=\"0.1\"\n                        onChange={this.handleOpacityChange}\n                        value={(this.props.currentStyles.fillOpacity || 0)}\n                      />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    \n  }\n\n  CustomColorPicker.contextType = ThemeContext;\n\n  export default CustomColorPicker;","import React, {Component} from 'react';\nimport {ThemeContext} from '../../../../../theme-context';\n\nimport './styles.css';\n\nclass CustomBorderColorOption extends Component {\n\n  handleSelectColor = () => {\n   this.props.handleUpdateColor(this.props.color);\n  }\n\n  render() {\n      return <div \n              className={\"availableColor\"} \n              style={{backgroundColor: this.props.color}}\n              onClick={this.handleSelectColor}  \n            />\n  }\n\n}\n\nclass TransparentBorderColorOption extends Component {\n\n  handleSelectColor = () => {\n   this.props.handleOpacityChange({target : { value : 0 }});\n  }\n\n  render() {\n      return <div \n              className={\"availableColor\"} \n              style={{backgroundColor: \"#fff\", border: \"1px solid #999\"}}\n              onClick={this.handleSelectColor}  \n            >\n            <div className=\"transparentLine\" />\n            </div>\n  }\n\n}\n\nconst SUBMENU_NAME = \"CustomBorderColorPicker\";\n\nclass CustomBorderColorPicker extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        subMenuOpen : false\n      };\n    }\n\n    handleOpenSubMenu = () => {\n      this.setState({subMenuOpen : !this.state.subMenuOpen});\n      this.props.handleSetCurrentOpenSubMenu(SUBMENU_NAME);\n    }\n\n    handleUpdateColor = (color) => {\n      let newStrokeOpacity = this.props.currentStyles.strokeOpacity;\n      if (newStrokeOpacity === 0) {\n        newStrokeOpacity = 1;\n      }\n      this.props.handleUpdateElementProperty({\n        property : \"styles\",\n        value : {...this.props.currentStyles, \"stroke\" : color, strokeOpacity : newStrokeOpacity} \n      });\n    }\n\n    handleOpacityChange = (e) => {\n      this.props.handleUpdateElementProperty({\n        property : \"styles\",\n        value : {...this.props.currentStyles, strokeOpacity : e.target.value} \n      });\n    }\n\n    componentDidUpdate() {\n      if(this.state.subMenuOpen && this.props.currentOpenSubMenu !== SUBMENU_NAME) {\n        this.setState({subMenuOpen : false});\n      }\n    }\n\n    render() {\n        const theme = this.context;\n        const selectedColor = {\n          borderColor : this.props.currentStyles.stroke \n        };\n        let submenuCSS = \"predefinedColorPicker_submenu\";\n        if(this.state.subMenuOpen) {\n          submenuCSS += \" isVisible\";\n        }\n        \n        return (\n            <div className={\"predefinedColorPicker\"}>\n                <div \n                  className={\"selectedBorderColor\"}\n                  style={selectedColor}\n                  onClick={this.handleOpenSubMenu}\n                  title={\"Change border color\"}\n                ></div>\n                <div \n                  className={submenuCSS}\n                >\n                    <div className={\"arrow\"} />\n                    <TransparentBorderColorOption \n                      key={('customColorOption_transparent')}\n                      handleOpacityChange={this.handleOpacityChange}\n                    />\n                    {\n                      theme.primaryColors.map((color, i) => {\n                        return <CustomBorderColorOption \n                                key={('preDefinedColorOption_'+color)}\n                                color={color} \n                                colorID={i}\n                                handleUpdateColor={this.handleUpdateColor}\n                              />\n                      })\n                    }\n                    <div\n                     className=\"opacityPicker\"\n                    >\n                      <div  className=\"opacityLabel\" >Opacity:</div>\n                      <input \n                        type=\"number\" \n                        id=\"opacity\" \n                        name=\"opacity\" \n                        min=\"0\" \n                        max=\"1\"\n                        step=\"0.1\"\n                        onChange={this.handleOpacityChange}\n                        value={(this.props.currentStyles.strokeOpacity || 0)}\n                      />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    \n  }\n\n  CustomBorderColorPicker.contextType = ThemeContext;\n\n  export default CustomBorderColorPicker;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst iconColor = \"#333\";\n\nconst SUBMENU_NAME = \"BorderStyle\";\n\nclass BorderStyle extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        subMenuOpen : false\n      };\n    }\n\n    handleOpenSubMenu = () => {\n      this.setState({subMenuOpen : !this.state.subMenuOpen});\n      this.props.handleSetCurrentOpenSubMenu(SUBMENU_NAME);\n    }\n\n    componentDidUpdate() {\n      if(this.state.subMenuOpen && this.props.currentOpenSubMenu !== SUBMENU_NAME) {\n        this.setState({subMenuOpen : false});\n      }\n    }\n\n    handleSolidChange = () => {\n      const strokeDasharray = \"0\";\n      \n      this.props.handleUpdateElementProperty({\n        property : \"styles\",\n        value : {...this.props.currentStyles, strokeDasharray}\n      });\n    }\n\n    handleDashedChange = () => {\n      const strokeDasharray = (4*this.props.initialZoomLevel)+\" \"+(2*this.props.initialZoomLevel);\n      \n      this.props.handleUpdateElementProperty({\n        property : \"styles\",\n        value : {...this.props.currentStyles, strokeDasharray}\n      });\n    }\n\n    handleDottedChange = () => {\n      const strokeDasharray = String(2*this.props.initialZoomLevel);\n      \n      this.props.handleUpdateElementProperty({\n        property : \"styles\",\n        value : {...this.props.currentStyles, strokeDasharray}\n      });\n    }\n\n\n    handleWidthChange = (e) => {\n      this.props.handleUpdateElementProperty({\n        property : \"styles\",\n        value : {...this.props.currentStyles, strokeWidth : (e.target.value*this.props.initialZoomLevel)} \n      });\n    }\n\n    render() {\n        \n        let submenuCSS = \"predefinedColorPicker_submenu\";\n        if(this.state.subMenuOpen) {\n          submenuCSS += \" isVisible\";\n        }\n\n        let solidSelected = (this.props.currentStyles.strokeDasharray === \"0\") ? \"selected\" : null,\n            dashedSelected = (this.props.currentStyles.strokeDasharray === (4*this.props.initialZoomLevel)+\" \"+(2*this.props.initialZoomLevel)) ? \"selected\" : null,\n            dottedSelected = (this.props.currentStyles.strokeDasharray === String(2*this.props.initialZoomLevel)) ? \"selected\" : null;\n\n        const computedStrokeWidth = Math.ceil(this.props.currentStyles.strokeWidth/this.props.initialZoomLevel);\n\n        return (\n            <div className={\"fontStyle\"}>\n              <div \n                className={\"editor_icon\"} \n                onClick={this.handleOpenSubMenu}\n                title={\"Change border styles\"}\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                  <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n                  <path fill={iconColor} d=\"M3 16h5v-2H3v2zm6.5 0h5v-2h-5v2zm6.5 0h5v-2h-5v2zM3 20h2v-2H3v2zm4 0h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM3 12h8v-2H3v2zm10 0h8v-2h-8v2zM3 4v4h18V4H3z\"/>\n                </svg>\n              </div>\n              <div \n                  className={submenuCSS}\n                >   \n                    <div className={\"arrow\"} />\n                    <div className={`editor_subMenu_icon ${solidSelected}`} onClick={this.handleSolidChange}>\n                      <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\" >\n                        <path fill={iconColor} d=\"m3,10l0,4l18,0l0,-4l-18,0z\"/>\n                      </svg>\n                    </div>\n                    <div className={`editor_subMenu_icon ${dashedSelected}`} onClick={this.handleDashedChange}>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                        <path fill={iconColor} d=\"m3,13l5,0l0,-2l-5,0l0,2zm6.5,0l5,0l0,-2l-5,0l0,2zm6.5,0l5,0l0,-2l-5,0l0,2z\" />\n                      </svg>\n                    </div>\n                    <div className={`editor_subMenu_icon ${dottedSelected}`} onClick={this.handleDottedChange}>\n                      <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\" >\n                        <path fill={iconColor} d=\"m3,13l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2zm4,0l2,0l0,-2l-2,0l0,2z\"/>\n                      </svg>\n                    </div>\n                    <div className=\"opacityPicker\">\n                      <div  className=\"opacityLabel\" >Width:</div>\n                      <input \n                        type=\"number\"\n                        id=\"opacity\" \n                        name=\"opacity\" \n                        min=\"1\" \n                        max=\"10\"\n                        step=\"1\"\n                        onChange={this.handleWidthChange}\n                        value={computedStrokeWidth}\n                      />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    \n  }\n\n  export default BorderStyle;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst iconColor = \"#333\";\n\nconst SUBMENU_NAME = \"FontStyle\";\n\nconst FONT_FAMILIES = [\n  \"Arial\",\n  \"Arial Black\",\n  \"Arial Narrow\",\n  \"Arial Rounded MT Bold\",\n  \"Baskerville\",\n  \"Courier New\",\n  \"Georgia\",\n  \"Lucida Bright\",\n  \"Lucida Sans Typewriter\",\n  \"Palatino\",\n  \"Tahoma\",\n  \"Times New Roman\",\n  \"Trebuchet MS\",\n  \"Verdana\"\n];\n\nclass FontStyle extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        subMenuOpen : false\n      };\n    }\n\n    handleOpenSubMenu = () => {\n      this.setState({subMenuOpen : !this.state.subMenuOpen});\n      this.props.handleSetCurrentOpenSubMenu(SUBMENU_NAME);\n    }\n\n    componentDidUpdate() {\n      if(this.state.subMenuOpen && this.props.currentOpenSubMenu !== SUBMENU_NAME) {\n        this.setState({subMenuOpen : false});\n      }\n    }\n\n    handleBoldChange = () => {\n      let newFontWeight = \"normal\";\n      if(this.props.fontStyle.fontWeight === \"normal\") {\n        newFontWeight = \"bold\";\n      }\n      this.props.handleUpdateElementProperty({\n        property : \"fontStyle\",\n        value : {...this.props.fontStyle, \"fontWeight\" : newFontWeight}\n      });\n    }\n\n    handleItalicChange = () => {\n      let newFontStyle = \"normal\";\n      if(this.props.fontStyle.fontStyle === \"normal\") {\n        newFontStyle = \"italic\";\n      }\n      this.props.handleUpdateElementProperty({\n        property : \"fontStyle\",\n        value : {...this.props.fontStyle, \"fontStyle\" : newFontStyle}\n      });\n    }\n\n    handleUnderlineChange = () => {\n      let textDecorationLine = this.props.fontStyle.textDecorationLine;\n      if(this.props.fontStyle.textDecorationLine.indexOf(\"underline\") === -1) {\n        textDecorationLine = \"underline \" + textDecorationLine;\n      } else {\n        textDecorationLine = textDecorationLine.replace(\"underline\", \"\");\n      }\n      this.props.handleUpdateElementProperty({\n        property : \"fontStyle\",\n        value : {...this.props.fontStyle, textDecorationLine}\n      });\n    }\n\n    handleStrikeThroughChange = () => {\n      let textDecorationLine = this.props.fontStyle.textDecorationLine;\n      if(this.props.fontStyle.textDecorationLine.indexOf(\"line-through\") === -1) {\n        textDecorationLine = textDecorationLine + \" line-through\";\n      } else {\n        textDecorationLine = textDecorationLine.replace(\"line-through\", \"\");\n      }\n      this.props.handleUpdateElementProperty({\n        property : \"fontStyle\",\n        value : {...this.props.fontStyle, textDecorationLine}\n      });\n    }\n\n    handleFontChange = (e) => {\n      let {fontFamily} = this.props.fontStyle;\n      if(fontFamily !== e.target.value) {\n        this.props.handleUpdateElementProperty({\n          property : \"fontStyle\",\n          value : {...this.props.fontStyle, fontFamily : e.target.value}\n        });\n      }\n    }\n\n    render() {\n        \n        let submenuCSS = \"predefinedColorPicker_submenu\";\n        if(this.state.subMenuOpen) {\n          submenuCSS += \" isVisible\";\n        }\n\n        let boldSelected = (this.props.fontStyle.fontWeight === \"bold\") ? \"selected\" : null,\n            italicSelected = (this.props.fontStyle.fontStyle === \"italic\") ? \"selected\" : null,\n            underlineSelected = (this.props.fontStyle.textDecorationLine.indexOf(\"underline\") !== -1) ? \"selected\" : null,\n            strikeThroughSelected = (this.props.fontStyle.textDecorationLine.indexOf(\"line-through\") !== -1) ? \"selected\" : null;\n\n        return (\n            <div className={\"fontStyle\"}>\n              <div \n                className={\"editor_icon\"} \n                onClick={this.handleOpenSubMenu}\n                title={\"Change font styles\"}\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                  <path fill={iconColor} d=\"M9 4v3h5v12h3V7h5V4H9zm-6 8h3v7h3v-7h3V9H3v3z\"/>\n                </svg>\n              </div>\n              <div \n                  className={submenuCSS}\n                >\n                    <div className={\"arrow\"} />\n                    <div className={`editor_subMenu_icon ${boldSelected}`} onClick={this.handleBoldChange}>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                        <path fill={iconColor} d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\"/>\n                      </svg>\n                    </div>\n                    <div className={`editor_subMenu_icon ${italicSelected}`} onClick={this.handleItalicChange}>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                        <path fill={iconColor} d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z\"/>\n                      </svg>\n                    </div>\n                    <div className={`editor_subMenu_icon ${underlineSelected}`} onClick={this.handleUnderlineChange}>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                        <path fill={iconColor} d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"/>\n                      </svg>\n                    </div>\n                    <div className={`editor_subMenu_icon ${strikeThroughSelected}`} onClick={this.handleStrikeThroughChange}>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                        <path fill={iconColor} d=\"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z\"/>\n                      </svg>\n                    </div>\n                    <div className=\"fontFamily\">\n                        <select \n                          value={this.props.fontStyle.fontFamily}\n                          onChange={this.handleFontChange}\n                        >\n                          {FONT_FAMILIES.map(font => <option key={`fontSelector_${font}`}>{font}</option>)}\n                        </select>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    \n  }\n\n  export default FontStyle;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst iconColor = \"#333\";\n\nconst SUBMENU_NAME = \"TextAlignment\";\n\nfunction CenterIcon(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n      <path fill={props.iconColor} d=\"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z\"/>\n    </svg>\n  );\n}\n\nfunction LeftIcon(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n      <path fill={props.iconColor} d=\"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z\"/>\n    </svg>\n  );\n}\n\nfunction RightIcon(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n      <path fill={props.iconColor} d=\"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z\"/>\n    </svg>\n  );\n}\n\n\nclass TextAlignment extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        subMenuOpen : false\n      };\n    }\n\n    handleOpenSubMenu = () => {\n      this.setState({subMenuOpen : !this.state.subMenuOpen});\n      this.props.handleSetCurrentOpenSubMenu(SUBMENU_NAME);\n    }\n\n    handleLeftChange = () => {\n      this.props.handleUpdateElementProperty({\n        property : \"fontStyle\",\n        value : {...this.props.fontStyle, \"textAlign\" : \"left\"}\n      });\n    }\n\n    componentDidUpdate() {\n      if(this.state.subMenuOpen && this.props.currentOpenSubMenu !== SUBMENU_NAME) {\n        this.setState({subMenuOpen : false});\n      }\n    }\n\n    handleRightChange = () => {\n      this.props.handleUpdateElementProperty({\n        property : \"fontStyle\",\n        value : {...this.props.fontStyle, \"textAlign\" : \"right\"}\n      });\n    }\n\n    handleCenterChange = () => {\n      this.props.handleUpdateElementProperty({\n        property : \"fontStyle\",\n        value : {...this.props.fontStyle, \"textAlign\" : \"center\"}\n      });\n    }\n    render() {\n\n        let submenuCSS = \"predefinedColorPicker_submenu\";\n        if(this.state.subMenuOpen) {\n          submenuCSS += \" isVisible\";\n        }\n\n        let leftSelected = (this.props.fontStyle.textAlign === \"left\") ? \"selected\" : null,\n            centerSelected = (this.props.fontStyle.textAlign === \"center\") ? \"selected\" : null,\n            rightSelected = (this.props.fontStyle.textAlign === \"right\") ? \"selected\" : null;\n        \n        let currentIcon = <CenterIcon iconColor={iconColor} />;\n\n        if(leftSelected) {\n          currentIcon = <LeftIcon iconColor={iconColor} />;\n        } else if (rightSelected) {\n          currentIcon = <RightIcon iconColor={iconColor} />;\n        }\n        \n        return (\n            <div className={\"editor_option\"}>\n              <div \n                className={\"editor_icon\"} \n                onClick={this.handleOpenSubMenu}\n                title={\"Change text alignment\"}\n              >\n                {currentIcon}\n              </div>\n              <div \n                  className={submenuCSS}\n                  onClick={this.handleOpenSubMenu}\n                >\n                    <div className={\"arrow\"} />\n                    <div className={`editor_subMenu_icon ${leftSelected}`} onClick={this.handleLeftChange}>\n                      <LeftIcon iconColor={iconColor} />\n                    </div>\n                    <div className={`editor_subMenu_icon ${centerSelected}`} onClick={this.handleCenterChange}>\n                      <CenterIcon iconColor={iconColor} />\n                    </div>\n                    <div className={`editor_subMenu_icon ${rightSelected}`} onClick={this.handleRightChange}>\n                      <RightIcon iconColor={iconColor} />\n                    </div>\n                    \n                </div>\n            </div>\n        );\n    }\n\n    \n  }\n\n  export default TextAlignment;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst iconColor = \"#333\";\n\nclass Link extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      subMenuOpen : false\n    };\n  }\n\n  handleOpenSubMenu = () => {\n    this.setState({subMenuOpen : !this.state.subMenuOpen});\n  }\n\n  render() {\n      \n      return (\n          <div className={\"editor_option\"}>\n            <div \n              className={\"editor_icon\"} \n              onClick={this.handleOpenSubMenu}\n              title={\"Add link to this element\"}\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                <path fill={iconColor} d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"/>\n              </svg>\n            </div>\n          </div>\n      );\n  }\n\n    \n  }\n\n  export default Link;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst iconColor = \"#333\";\n\nclass DepthSetter extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        \n      };\n    }\n\n    handleBringForward = () => {\n      this.props.handleShiftElementPosition(\"forward\", this.props.ids);\n    }\n\n    handleSendBackward = () => {\n      this.props.handleShiftElementPosition(\"backward\", this.props.ids);\n    }\n\n    render() {\n        \n        const isForward = (this.props.type === \"forward\");\n        return (\n          <div className={\"editor_option\"}>\n            \n              {isForward ?\n                <div \n                  className={\"editor_icon\"}\n                  title={\"Bring forward\"}\n                  onClick={this.handleBringForward}\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n                    <path fill={iconColor} d=\"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm12 12h2v-2h-2v2zm6-18H7v14h14V3zm-2 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2zm-4 0h2v-2H3v2z\"/>\n                  </svg>\n                </div>\n                :\n                <div \n                  className={\"editor_icon\"}\n                  title={\"Send backwards\"}\n                  onClick={this.handleSendBackward}\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n                    <path d=\"M9 7H7v2h2V7zm0 4H7v2h2v-2zm4 4h-2v2h2v-2zm0-12h-2v2h2V3zM9 3H7v2h2V3zm12 0h-2v2h2V3zm0 12h-2v2h2v-2zM9 15H7v2h2v-2zm10-2h2v-2h-2v2zm0-4h2V7h-2v2zM5 7H3v14h14v-2H5V7zm10-2h2V3h-2v2zm0 12h2v-2h-2v2z\"/>\n                  </svg>\n                </div>\n              }\n          </div>\n        );\n    }\n\n    \n  }\n\n  export default DepthSetter;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst iconColor = \"#333\";\n\nclass ElementLocker extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        isLocked : false\n      };\n    }\n\n    handleToggleLock = () => {\n      this.setState({isLocked : !this.state.isLocked});\n    }\n\n    render() {\n        \n      const {isLocked} = this.state;\n\n      return (\n        <div className={\"editor_option\"}>\n          <div \n            className={\"editor_icon\"} \n            onClick={this.handleToggleLock}\n            title={\"Lock this element from changes\"}\n          >\n            {isLocked ?\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                <g fill=\"none\">\n                  <path d=\"M0 0h24v24H0V0z\"/>\n                  <path d=\"M0 0h24v24H0V0z\" opacity=\".87\"/>\n                </g>\n                <path fill={iconColor} d=\"M20 8h-3V6.21c0-2.61-1.91-4.94-4.51-5.19C9.51.74 7 3.08 7 6v2H4v14h16V8zm-8 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z\"/>\n              </svg>\n              :\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n                <path fill={iconColor} d=\"M20 8h-3V6.21c0-2.61-1.91-4.94-4.51-5.19C9.51.74 7 3.08 7 6h2c0-1.13.6-2.24 1.64-2.7C12.85 2.31 15 3.9 15 6v2H4v14h16V8zm-2 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\"/>\n              </svg>\n            }\n          </div>\n        </div>\n      );\n  }\n\n    \n  }\n\n  export default ElementLocker;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst iconColor = \"#333\";\n\nclass ElementDeleter extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        \n      };\n    }\n\n    render() {\n        \n      return (\n          <div className={\"editor_option\"}>\n            <div \n              className={\"editor_icon\"}\n              title={\"Delete this element\"}\n              onClick={this.props.handleDeleteElements}\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n                <path fill={iconColor} d=\"M6 21h12V7H6v14zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"/>\n              </svg>\n            </div>\n          </div>\n      );\n  }\n\n    \n  }\n\n  export default ElementDeleter;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst iconColor = \"#333\";\n\nclass ElementEditorMenu extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        \n      };\n    }\n\n    render() {\n        \n      return (\n          <div className={\"editor_option\"}>\n            <div \n              className={\"editor_icon\"}\n              title={\"More options\"}\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n                <path fill={iconColor} d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"/>\n              </svg>\n            </div>\n          </div>\n      );\n  }\n\n    \n  }\n\n  export default ElementEditorMenu;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst iconColor = \"#333\";\n\nconst SUBMENU_NAME = \"URL\";\n\nclass URL extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        subMenuOpen : false\n      };\n    }\n\n    handleOpenSubMenu = () => {\n      this.setState({subMenuOpen : !this.state.subMenuOpen});\n      this.props.handleSetCurrentOpenSubMenu(SUBMENU_NAME);\n    }\n\n    componentDidUpdate() {\n      if(this.state.subMenuOpen && this.props.currentOpenSubMenu !== SUBMENU_NAME) {\n        this.setState({subMenuOpen : false});\n      }\n    }\n\n    handleURLChange = (e) => {\n      \n      this.props.handleUpdateElementProperty({\n        property : \"imgURL\",\n        value : e.target.value\n      });\n    }\n\n    render() {\n        \n        let submenuCSS = \"predefinedColorPicker_submenu\";\n        if(this.state.subMenuOpen) {\n          submenuCSS += \" isVisible\";\n        }\n\n        return (\n            <div className={\"fontStyle\"}>\n              <div \n                className={\"editor_icon\"} \n                onClick={this.handleOpenSubMenu}\n                title={\"Change image URL\"}\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                  <path fill={iconColor} d=\"M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5v2zm2.5-.5h1.5V15H10v-4.5h1.5V9H7v1.5zm5.5 0H14V15h1.5v-4.5H17V9h-4.5v1.5zM23 9h-5v6h1.5v-2H23V9zm-1.5 2.5h-2v-1h2v1z\"/>\n                </svg>\n              </div>\n              <div \n                  className={submenuCSS}\n                >   \n                    <div className={\"arrow\"} />\n                    <div className=\"urlLocation\">\n                      <div  className=\"urlLocation_label\" >URL:</div>\n                      <input  \n                        name=\"imgURL\" \n                        onChange={this.handleURLChange}\n                        value={this.props.imgURL}\n                      />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    \n  }\n\n  export default URL;","import React, {Component} from 'react';\n\n//Editors\n\nimport PredefinedColorPicker from './editors/predefinedColorPicker';\nimport CustomColorPicker from './editors/customColorPicker';\nimport CustomBorderColorPicker from './editors/customBorderColorPicker';\nimport BorderStyle from './editors/borderStyle';\nimport FontStyle from './editors/fontStyle';\nimport TextAlignment from './editors/textAlignment';\nimport Link from './editors/link';\nimport DepthSetter from './editors/depthSetter';\nimport ElementLocker from './editors/elementLocker';\nimport ElementDeleter from './editors/elementDeleter';\nimport ElementEditorMenu from './editors/elementEditorMenu';\nimport Url from './editors/url';\n\n\nimport './styles.css';\n\nconst shapeTypeEditableFeatures = {\n    \"postit\" : [\"predefinedColor\", \"fontStyle\", /* \"link\", */ \"bringForward\", \"sendBackward\", \"lock\", \"delete\", \"menu\"],\n    \"shape\" : [\"customColor\", \"customBorderColor\", \"borderStyle\", \"fontStyle\", \"textAlignment\", /* \"link\", */ \"bringForward\", \"sendBackward\", \"lock\", \"delete\", \"menu\"],\n    \"text\" : [\"fontStyle\", \"textAlignment\", /* \"link\", */ \"bringForward\", \"sendBackward\", \"lock\", \"delete\", \"menu\"],\n    \"line\" : [\"customBorderColor\", \"borderStyle\", \"bringForward\", \"sendBackward\", \"lock\", \"delete\", \"menu\"],\n    \"image\" : [\"url\", \"customBorderColor\", \"borderStyle\", \"bringForward\", \"sendBackward\", \"lock\", \"delete\", \"menu\"]\n};\n\nconst multiElementEditableFeatures = [\"bringForward\", \"sendBackward\", \"lock\", \"delete\", \"menu\"];\n\nclass ElementEditor extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        currentOpenSubMenu : null\n      };\n    }\n\n    handleUpdateElementProperty = (data) => {\n        data.id = this.props.selectedElements[0].id;\n        this.props.handleUpdateElementProperty(data);\n    }\n\n    handleSetCurrentOpenSubMenu = (currentOpenSubMenu) => {\n        this.setState({currentOpenSubMenu});\n    }\n\n    render() {\n\n        const containerPosition = {},\n            {\n                selectedElements,\n                boundingBox\n            } = this.props;\n        let containerClass = \"elementEditor\",\n            editButtonTypes = null,\n            editButtons = null;\n        \n        const selectedIDs = selectedElements.map(element => {\n            return element.id;\n        });\n        \n        if(selectedElements.length === 1) {\n            editButtonTypes = shapeTypeEditableFeatures[selectedElements[0].type];\n        } else if (selectedElements.length > 1) {\n            editButtonTypes = multiElementEditableFeatures;\n        }\n        if(editButtonTypes) {\n            editButtons = editButtonTypes.map(button => {\n                switch (button) {\n                    case 'predefinedColor':\n                        return <PredefinedColorPicker \n                                    key={`${selectedElements[0].id}_${button}`}\n                                    fillColor={selectedElements[0].predefinedColor}\n                                    handleUpdateElementProperty={this.handleUpdateElementProperty}\n                                    handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                                    currentOpenSubMenu={this.state.currentOpenSubMenu}\n                                />;\n                    case 'customColor':\n                        return <CustomColorPicker \n                                    key={`${selectedElements[0].id}_${button}`}\n                                    currentStyles={selectedElements[0].styles}\n                                    handleUpdateElementProperty={this.handleUpdateElementProperty}\n                                    handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                                    currentOpenSubMenu={this.state.currentOpenSubMenu}\n                                />;\n                    case 'customBorderColor':\n                        return <CustomBorderColorPicker \n                                    key={`${selectedElements[0].id}_${button}`}\n                                    currentStyles={selectedElements[0].styles}\n                                    handleUpdateElementProperty={this.handleUpdateElementProperty}\n                                    handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                                    currentOpenSubMenu={this.state.currentOpenSubMenu}\n                                />;\n                    case 'borderStyle':\n                        return <BorderStyle \n                                    key={`${selectedElements[0].id}_${button}`}\n                                    currentStyles={selectedElements[0].styles}\n                                    initialZoomLevel={selectedElements[0].initialZoomLevel}\n                                    handleUpdateElementProperty={this.handleUpdateElementProperty}\n                                    handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                                    currentOpenSubMenu={this.state.currentOpenSubMenu}\n                                />;\n                    case 'fontStyle':\n                        return <FontStyle \n                                    key={`${selectedElements[0].id}_${button}`}\n                                    fontStyle={selectedElements[0].fontStyle}\n                                    handleUpdateElementProperty={this.handleUpdateElementProperty}\n                                    handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                                    currentOpenSubMenu={this.state.currentOpenSubMenu}\n                                />;\n                    case 'textAlignment':\n                        return <TextAlignment \n                                    key={`${selectedElements[0].id}_${button}`}\n                                    fontStyle={selectedElements[0].fontStyle}\n                                    handleUpdateElementProperty={this.handleUpdateElementProperty}\n                                    handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                                    currentOpenSubMenu={this.state.currentOpenSubMenu}\n                                />;\n                    case 'link':\n                        return <Link key={`${selectedElements[0].id}_${button}`}/>;\n                    case 'bringForward':\n                        return <DepthSetter \n                                    type=\"forward\" \n                                    key={`${selectedElements[0].id}_${button}`}\n                                    handleShiftElementPosition={this.props.handleShiftElementPosition}\n                                    ids={selectedIDs}\n                                />;\n                    case 'sendBackward':\n                        return <DepthSetter \n                                    type=\"backward\" \n                                    key={`${selectedElements[0].id}_${button}`}\n                                    handleShiftElementPosition={this.props.handleShiftElementPosition}\n                                    ids={selectedIDs}\n                                />;\n                    case 'lock':\n                        return <ElementLocker key={`${selectedElements[0].id}_${button}`} />;\n                    case 'delete':\n                        return <ElementDeleter \n                                    key={`${selectedElements[0].id}_${button}`} \n                                    handleDeleteElements={this.props.handleDeleteElements}\n                                />;\n                    case 'url':\n                        return <Url \n                                    key={`${selectedElements[0].id}_${button}`}\n                                    imgURL={selectedElements[0].imgURL}\n                                    handleUpdateElementProperty={this.handleUpdateElementProperty}\n                                    handleSetCurrentOpenSubMenu={this.handleSetCurrentOpenSubMenu}\n                                    currentOpenSubMenu={this.state.currentOpenSubMenu}\n                                />;\n                    case 'menu':\n                        return <ElementEditorMenu options={shapeTypeEditableFeatures[selectedElements[0].type]} key={`${selectedElements[0].id}_${button}`} />;\n                    default:\n                      return null;\n                  }\n            });\n            \n            containerClass += \" isVisible\";\n\n            const editorHeightPlusMargin = 40+56,\n                  halfEditorWidth = (editButtons.length*40)/2,\n                  halfElementWidth = boundingBox.width/2,\n                  finalLeft = (boundingBox.x+halfElementWidth)-halfEditorWidth,\n                  finalTop = boundingBox.y-editorHeightPlusMargin;\n\n            containerPosition.left = `${finalLeft}px`;\n            containerPosition.top = `${finalTop}px`;\n\n        }\n        \n        return (\n            <div className={containerClass} style={containerPosition}>\n               {editButtons}\n            </div>\n        );\n    }\n\n    \n  }\n\n  export default ElementEditor;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nclass Resizer extends Component {\n\n    handleMouseMove(e) {\n        const currentState = this.state;\n        const selectedElements = [];\n        Object.keys(this.state.elementState).forEach(item => {\n            if(this.state.elementState[item].selected) {\n                selectedElements.push(this.state.elements[item]);\n            }\n        });\n        const newState = {};\n        if(selectedElements) {\n            const newElementsData = {...currentState.elements};\n            if(selectedElements.length > 1) {\n                selectedElements.forEach(item => {\n                    newElementsData[item.id].styles.width += e.movementX*currentState.zoomLevel;\n                    newElementsData[item.id].styles.height += e.movementX*currentState.zoomLevel;\n                });\n            } else if(selectedElements.length === 1 && selectedElements[0].fixedRatio) {\n                let elementID = selectedElements[0].id;\n                newElementsData[elementID].styles.width += e.movementX*currentState.zoomLevel;\n                newElementsData[elementID].styles.height += e.movementX*currentState.zoomLevel;\n            } else if(selectedElements.length === 1) {\n                let elementID = selectedElements[0].id;\n                newElementsData[elementID].styles.width += e.movementX*currentState.zoomLevel;\n                newElementsData[elementID].styles.height += e.movementY*currentState.zoomLevel;\n            }\n            this.setState({newState});\n        }\n        \n    }\n\n    render() {\n        const { boundingBox, isVisible } = this.props;\n\n        const wrapperStyles = {\n            display: \"none\"\n        };\n\n        if(isVisible) {\n            wrapperStyles.display = \"block\";\n        }\n        const resizerStyles = {\n            position : \"absolute\",\n            height : `16px`,\n            width : `16px`,\n            top : `0`,\n            left : `0`,\n            transform : `translate3d(${(boundingBox.cx-8)}px,${(boundingBox.cy-8)}px, 0)`\n        };\n\n        const highlightBoxPosition = {\n            x : boundingBox.x,\n            y : boundingBox.y,\n            height : boundingBox.height,\n            width : boundingBox.width\n        };\n\n        if(highlightBoxPosition.width < 0) {\n            highlightBoxPosition.x += highlightBoxPosition.width;\n            highlightBoxPosition.width = highlightBoxPosition.width * -1;\n        }\n\n        if(highlightBoxPosition.height < 0) {\n            highlightBoxPosition.y += highlightBoxPosition.height;\n            highlightBoxPosition.height = highlightBoxPosition.height * -1;\n        }\n\n        const elementHighlightStyles = {\n            position : \"absolute\",\n            height : `${highlightBoxPosition.height}px`,\n            width : `${highlightBoxPosition.width}px`,\n            top : `0`,\n            left : `0`,\n            transform : `translate3d(${(highlightBoxPosition.x)}px,${(highlightBoxPosition.y)}px, 0)`\n        };\n\n        return (\n            <div className=\"resizerWrapper\" style={wrapperStyles}>\n                <div className=\"elementsHightlight\" style={elementHighlightStyles}/>\n                <svg style={resizerStyles} height=\"16\" width=\"16\" viewBox=\"-8 -8 16 16\">\n                    <circle\n                    id={\"resizerHandle\"}\n                    cx={0} \n                    cy={0} \n                    r={6}\n                    fill={\"white\"}\n                    stroke={\"grey\"}\n                    strokeWidth={2}\n                    strokeOpacity={0.5} \n                    cursor={\"nwse-resize\"}>\n                    </circle>\n                </svg>\n            </div>\n           \n        );\n    }\n\n    componentDidMount() {\n        this.props.registerDragHandler(\"resizerHandle\", {\n            \"dragMoveHandler\" : this.handleMouseMove\n        });\n    }\n}\n\nexport default Resizer;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nclass ElementDrag extends Component {\n\n    updateElementDragPosition(e) {\n        const {\n            zoomLevel\n        } = this.state;\n\n        const newElementsData = {...this.state.elements};\n        const selectedItems = Object.keys(this.state.elementState).filter(item => {\n            if(this.state.elementState[item].selected) {\n                return true;\n            }\n            return false;\n        });\n        if(selectedItems.length) {\n            selectedItems.forEach(element => {\n                newElementsData[element].styles.x += e.movementX*zoomLevel;\n                newElementsData[element].styles.y += e.movementY*zoomLevel;\n            });\n            this.setState({\n                elements : newElementsData\n            });\n        }\n    }\n\n    render() {\n        const { boundingBox } = this.props;\n\n        return (\n            <rect \n                id={\"elementSelectionArea\"}\n                height={boundingBox.rawHeight}\n                width={boundingBox.rawWidth}\n                x={boundingBox.rawX}\n                y={boundingBox.rawY}\n                fillOpacity={0}\n            />\n        );\n    }\n    \n    componentDidUpdate(prevProps) {\n        const currentSelectedElements = this.props.selectedElementKeys,\n              prevSelectedElements = prevProps.selectedElementKeys;\n\n        const removedElements = prevSelectedElements.filter(element => {\n            if(currentSelectedElements.indexOf(element) === -1) {\n                return true;\n            }\n            return false;\n        });\n\n        const addedElements = currentSelectedElements.filter(element => {\n            if(prevSelectedElements.indexOf(element) === -1) {\n                return true;\n            }\n            return false;\n        });\n\n        if(removedElements.length > 0) {\n            removedElements.forEach(id => {\n                this.props.removeDragHandler(id);\n            });\n        }\n\n        if(addedElements.length > 0) {\n            addedElements.forEach(id => {\n                this.props.registerDragHandler(id, {\n                    \"dragMoveHandler\" : this.updateElementDragPosition\n                });\n            })\n        }\n        \n\n    }\n\n    componentDidMount() {\n        this.props.registerDragHandler(\"elementSelectionArea\", {\n            \"dragMoveHandler\" : this.updateElementDragPosition\n        });\n    }\n}\n\nexport default ElementDrag;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nclass FileOption extends Component {\n\n    handleClick = (e) => {\n        this.props.loadFileFromBrowser(this.props.fileName);\n    }\n\n    render() {\n        return(<div\n            className={\"navBar_menu_item\"}\n            onClick={this.handleClick}\n        >\n            {this.props.fileName}\n        </div>);\n    }\n}\n\n\nclass Navbar extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n          menuVisible : false,\n          subMenu : [],\n          mondaySaveAvailable : false,\n        };\n      }\n    \n    handleOpenMenu = (e) => {\n        e.stopPropagation();\n        this.setState({\n            menuVisible : !this.state.menuVisible,\n            subMenu : []\n        });\n    }\n    \n    saveToBrowser = (e) => {\n        const { applicationState } = this.props;\n        const stateToSave = {\n            elements : applicationState.elements,\n            elementState : applicationState.elementState,\n            boardName : applicationState.boardName,\n            zoomLevel : applicationState.zoomLevel,\n            offsetX : applicationCache.offsetX,\n            offsetY : applicationState.offsetY\n        };\n        let fileName = `miralFile_${applicationState.boardName}`;\n        const checkIfAlreadyExists = window.localStorage.getItem(fileName);\n        if(checkIfAlreadyExists) {\n            fileName = fileName+\"_\"+new Date().getHours()+new Date().getMinutes();\n        }\n        window.localStorage.setItem(fileName, JSON.stringify(stateToSave));\n    }\n\n    loadFileFromBrowser = (fileName) => {\n        const file = window.localStorage.getItem(`miralFile_${fileName}`);\n        const state = Object.assign({}, this.props.applicationState, JSON.parse(file));\n        this.props.handleUpdateElementsAndState(state);\n        this.setState({\n            menuVisible : false,\n            subMenu : []\n        });\n    }\n\n    getSavedFromBrowser = (e) => {\n        const files = [];\n        Object.keys(window.localStorage).forEach(item => {\n            if(item.indexOf(\"miralFile_\") !== -1) {\n                const fileName = item.replace(\"miralFile_\", \"\");\n                files.push(\n                    <FileOption \n                        key={`fileOption_${fileName}`} \n                        fileName={fileName}\n                        loadFile={this.loadFileFromBrowser} \n                    />\n                );\n            }\n        });\n        if(files.length === 0) {\n            files.push(<div className=\"navMenu_error\">\n                No saved files found on this browser.\n            </div>);\n        }\n        this.setState({\n            subMenu : files\n        });\n    }\n\n    saveToMonday = (e) => {\n        const monday = window.mondaySdk();\n        const { applicationState } = this.props;\n        const stateToSave = {\n            elements : applicationState.elements,\n            elementState : applicationState.elementState,\n            boardName : applicationState.boardName,\n            zoomLevel : applicationState.zoomLevel,\n            offsetX : applicationCache.offsetX,\n            offsetY : applicationState.offsetY\n        };\n        let fileName = `miralFile_${applicationState.boardName}`;\n        const checkIfAlreadyExists = monday.storage.instance.getItem(fileName);\n        if(checkIfAlreadyExists) {\n            fileName = fileName+\"_\"+new Date().getHours()+new Date().getMinutes();\n        }\n        monday.storage.instance.setItem(fileName, JSON.stringify(stateToSave));\n        let checkFileList = monday.storage.instance.getItem(\"miralFileList\");\n        if(!checkFileList) {\n            checkFileList = [fileName];\n        } else {\n            checkFileList = JSON.parse(checkFileList);\n            checkFileList.push(fileName);\n        }\n        monday.storage.instance.setItem(\"miralFileList\", JSON.stringify(checkFileList));\n    }\n\n    getSavedFromMonday = (e) => {\n        const monday = window.mondaySdk();\n        let checkFileList = monday.storage.instance.getItem(\"miralFileList\");\n        let files = checkFileList.map(fileName => {\n            return <FileOption \n                key={`fileOption_${fileName}`} \n                fileName={fileName}\n                loadFile={this.loadFileFromMonday} \n            />\n        });\n\n        if(files.length === 0) {\n            files.push(<div className=\"navMenu_error\">\n                No saved files found on this browser.\n            </div>);\n        }\n        this.setState({\n            subMenu : files\n        });\n    }\n\n    loadFileFromMonday = (fileName) => {\n        const monday = window.mondaySdk();\n        const file = monday.storage.instance.getItem(fileName);\n        const state = Object.assign({}, this.props.applicationState, JSON.parse(file));\n        this.props.handleUpdateElementsAndState(state);\n        this.setState({\n            menuVisible : false,\n            subMenu : []\n        });\n    }\n  \n    render() {\n        const { \n            menuVisible,\n            subMenu,\n            mondaySaveAvailable\n        } = this.state;\n        let menuCSS = \"navBar_menu\",\n            letFirstMenuHidden = \"\";\n        if( menuVisible ) {\n            menuCSS += \" navBar_menu_open\";\n        }\n        if(subMenu.length > 0) {\n            letFirstMenuHidden = \"slideLeft\";\n        }\n        return (\n            <div className={\"navBar\"}>\n                <span className={\"companyName\"}>Your company name</span>\n                <span className={\"burgerMenu\"} onClick={this.handleOpenMenu}></span>\n                <div className={menuCSS}>\n                    <div className={\"navBar_menu_arrow\"} />\n                    <div className={`navBar_menu_sliderWrapper`} >\n                        <div className={`navBar_menu_slider ${letFirstMenuHidden}`} >\n                            <div className={`navBar_menu_items`} >\n                                {(mondaySaveAvailable &&\n                                    <>\n                                        <div \n                                            className={\"navBar_menu_item\"}\n                                            onClick={this.saveToMonday}\n                                        >   \n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 64 64\">\n                                                <g transform=\"matrix(3.208255 0 0 3.208255 -35.559129 -63.587202)\">\n                                                    <path d=\"M13.513 35.76a2.433 2.433 0 0 1-2.059-3.723l4.377-6.99a2.432 2.432 0 1 1 4.123 2.582l-4.378 6.99a2.43 2.43 0 0 1-2.063 1.141z\" fill=\"#ff3d57\"/>\n                                                    <path d=\"M21.056 35.76a2.433 2.433 0 0 1-2.063-3.723l4.38-6.99a2.432 2.432 0 1 1 4.117 2.582l-4.372 6.99a2.43 2.43 0 0 1-2.063 1.141z\" fill=\"#ffcb00\"/>\n                                                    <ellipse ry=\"2.375\" rx=\"2.436\" cy=\"33.384\" cx=\"28.597\" fill=\"#00d647\"/>\n                                                </g>\n                                            </svg>\n                                            <span>Save to Monday.com</span>\n                                        </div>\n                                        <div \n                                            className={\"navBar_menu_item\"}\n                                            onClick={this.loadFromMonday}\n                                        >   \n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 64 64\">\n                                                <g transform=\"matrix(3.208255 0 0 3.208255 -35.559129 -63.587202)\">\n                                                    <path d=\"M13.513 35.76a2.433 2.433 0 0 1-2.059-3.723l4.377-6.99a2.432 2.432 0 1 1 4.123 2.582l-4.378 6.99a2.43 2.43 0 0 1-2.063 1.141z\" fill=\"#ff3d57\"/>\n                                                    <path d=\"M21.056 35.76a2.433 2.433 0 0 1-2.063-3.723l4.38-6.99a2.432 2.432 0 1 1 4.117 2.582l-4.372 6.99a2.43 2.43 0 0 1-2.063 1.141z\" fill=\"#ffcb00\"/>\n                                                    <ellipse ry=\"2.375\" rx=\"2.436\" cy=\"33.384\" cx=\"28.597\" fill=\"#00d647\"/>\n                                                </g>\n                                            </svg>\n                                            <span>Load from Monday.com</span>\n                                        </div>\n                                    </>\n                                )}\n                                <div \n                                    className={\"navBar_menu_item\"}\n                                    onClick={this.saveToBrowser}\n                                >   \n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                                        <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n                                        <path d=\"M19 12v7H5v-7H3v9h18v-9h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z\"/>\n                                    </svg>\n                                    <span>Save to Browser</span>\n                                </div>\n                                <div \n                                    className={\"navBar_menu_item\"}\n                                    onClick={this.getSavedFromBrowser}\n                                >\n                                    <svg width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path d=\"m19,12l0,7l-14,0l0,-7l-2,0l0,9l18,0l0,-9l-2,0z\" fill=\"black\" id=\"svg_2\"/>\n                                        <path d=\"m12.75,11.67l2.59,-2.58l1.41,1.41l-5,5l-5,-5l1.41,-1.41l2.59,2.58l0,-9.67l2,0c0,3.223333 0,6.446667 0,9.67z\" fill=\"black\" id=\"svg_3\" transform=\"rotate(180 11.75 8.75)\"/>\n                                    </svg>\n                                    <span>Load from Browser</span>\n                                </div>\n                            </div>\n                            <div className={\"navBar_menu_items\"} >\n                                {subMenu.map(item => {\n                                    return item;\n                                })}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    componentDidMount() {\n        const url = document.location.ancestorOrigins[0];\n        const isMonday = url.indexOf(\"monday.com\") !== -1;\n        if(isMonday) {\n            this.setState({\n                mondaySaveAvailable : true\n            });\n        }\n    }\n    \n  }\n\n  export default Navbar;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nconst rfc6902 = require('rfc6902');\n\nclass UndoRedo extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n          undo : [],\n          redo : [],\n          updates : []\n        };\n      }\n\n    handleUndo = () => {\n\n        const newUndo = [...this.state.undo];\n        const newUpdates = [...this.state.updates];\n        const lastUndoAction = newUndo.pop();\n        const lastUpdateAction = newUpdates.pop();\n        const newRedo = [...this.state.redo, lastUpdateAction];\n        \n        const newCombinedData = {\n            elements : {...this.props.elements},\n            elementState : {...this.props.elementState} \n        };\n  \n        rfc6902.applyPatch(newCombinedData, lastUndoAction);\n        this.setState({\n            undo : newUndo,\n            redo : newRedo,\n            updates : newUpdates\n        })\n        this.props.handleUpdateElementsAndState({\n            elementState :  newCombinedData.elementState,\n            elements : newCombinedData.elements,\n        });\n    }\n\n    handleRedo = () => {\n        const newRedo = [...this.state.redo];\n        const lastRedoAction = newRedo.pop();\n        \n        const newCombinedData = {\n            elements : {...this.props.elements},\n            elementState : {...this.props.elementState} \n        };\n        \n        rfc6902.applyPatch(newCombinedData, lastRedoAction);\n        \n        this.setState({\n            redo : newRedo\n        });\n\n        this.props.handleUpdateElementsAndState({\n            elementState :  newCombinedData.elementState,\n            elements : newCombinedData.elements,\n            storeUndo : true\n        });\n    }\n  \n    render() {\n\n        const undoIsPossible = this.state.undo.length > 0,\n              redoIsPossible = this.state.redo.length > 0;\n\n        const undoRedoStyles = {\n            visibility : \"hidden\"\n        };\n\n        if(undoIsPossible || redoIsPossible) {\n            undoRedoStyles.visibility = \"visible\";\n        }\n\n        const redoStyles = {\n            pointerEvents : \"none\",\n            opacity : 0.5\n        };\n\n        if(redoIsPossible) {\n            redoStyles.opacity = 1;\n            redoStyles.pointerEvents = \"all\";\n        }\n\n        const undoStyles = {\n            opacity : 0.5,\n            pointerEvents : \"none\"\n        };\n\n        if(undoIsPossible) {\n            undoStyles.opacity = 1;\n            undoStyles.pointerEvents = \"all\";\n        }\n\n        return (\n\n            <div className={\"undoControls\"} style={undoRedoStyles}>\n                <span \n                    className={\"iconButton undo\"}\n                    onClick={this.handleUndo}\n                    style={undoStyles}\n                />\n                <span \n                    className={\"iconButton redo\"}\n                    onClick={this.handleRedo}\n                    style={redoStyles}\n                />\n            </div>\n\n        );\n    }\n\n    componentDidUpdate(prevProps) {\n        const prevCombinedData = {\n            elements : prevProps.elements,\n            elementState : prevProps.elementState \n        };\n        const currentCombinedData = {\n            elements : this.props.elements,\n            elementState : this.props.elementState \n        };\n        const elementsDiffUpdates = rfc6902.createPatch(prevCombinedData, currentCombinedData);\n        const elementsDiffUndo = rfc6902.createPatch(currentCombinedData, prevCombinedData);\n        \n        if(elementsDiffUndo.length > 0 && elementsDiffUpdates.length > 0 && this.props.storeUndo) {\n            this.setState({\n                undo : [...this.state.undo, elementsDiffUndo],\n                updates : [...this.state.updates, elementsDiffUpdates]\n            });\n            this.props.handleUpdateElementsAndState({storeUndo : false})\n        }\n    }\n    \n  }\n\n  export default UndoRedo;","import React, {Component} from 'react';\n\nimport UndoRedo from './undoRedo';\n\nimport './styles.css';\n\n\nclass BoardControls extends Component {\n  \n    \n    render() {\n\n        return (\n            <div className={\"boardControls\"}>\n                <div className={\"primaryControls\"}>\n                    <span className={\"boardName\"}>{this.props.boardName}</span>\n                    <span className={\"iconButton share\"}></span>\n                </div>\n                <UndoRedo \n                    handleUpdateElementsAndState={this.props.handleUpdateElementsAndState}\n                    elements={this.props.elements}\n                    elementState={this.props.elementState}\n                    storeUndo={this.props.storeUndo}\n                />\n            </div>\n        );\n    }\n    \n  }\n\n  export default BoardControls;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nclass InteractionManager extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        drag: \"normal\",\n        dragStartX : 0,\n        dragStartY : 0\n      };\n    }\n\n    handleZoom = (e) => {\n        const {\n            offsetX,\n            offsetY,\n            zoomLevel\n        } = this.props;\n\n        const dir = Math.sign(e.deltaY),\n        nextZoomLevel = zoomLevel + dir > 0 ? zoomLevel + dir : 1,\n        currentCursorPositionX = e.clientX*zoomLevel,\n        currentCursorPositionY = e.clientY*zoomLevel,\n        cursorPositionXAfterZoom = e.clientX*nextZoomLevel,\n        cursorPositionYAfterZoom = e.clientY*nextZoomLevel,\n        newOffsetX = offsetX - (cursorPositionXAfterZoom - currentCursorPositionX),\n        newOffsetY = offsetY - (cursorPositionYAfterZoom - currentCursorPositionY);\n\n        this.props.updateBoardPosition({\n            offsetX : newOffsetX,\n            offsetY : newOffsetY,\n            zoomLevel : nextZoomLevel\n        });\n\n    }\n  \n    handleMouseDown = (e) => {\n        e.stopPropagation();\n        this.setState({\n            dragStartX : e.clientX,\n            dragStartY : e.clientY,\n            dragStartTime : Date.now(),\n            drag : \"mouseDown\",\n            elementID : e.target.id\n        });\n        console.log(e.target);\n    }\n\n    handleMouseMove = (e) => {\n        if(this.state.drag === \"mouseDown\" || this.state.drag === \"dragging\") {\n            let wasFirstDrag = false;\n            const dragHandlers = this.props.dragHandlers[this.state.elementID];\n            if(this.state.drag === \"mouseDown\") {\n                wasFirstDrag = true;\n                this.setState({\n                    drag : \"dragging\"\n                });\n                if(dragHandlers &&\n                    dragHandlers.handleDragStart) {\n                    dragHandlers.handleDragStart(e, this.state.dragStartX, this.state.dragStartY, e.movementX, e.movementY);\n                }\n               \n            }\n            e.stopPropagation();\n            if(dragHandlers && dragHandlers.handleDragMove && !wasFirstDrag) {\n                dragHandlers.handleDragMove(e, this.state.dragStartX, this.state.dragStartY);\n            }\n        }\n    }\n\n    handleMouseUp = (e) => {\n        const dragHandlers = this.props.dragHandlers[this.state.elementID];\n        const interactionTime = Date.now() - this.state.dragStartTime;\n        const interactionMovement = (this.state.dragStartX+this.state.dragStartY)-(e.clientX+e.clientY);\n        const wasProbablyClick = (interactionMovement > -5 && interactionMovement < 5) && interactionTime < 200;\n        if(this.state.drag === \"dragging\" && !wasProbablyClick) {\n            e.stopPropagation();\n            if(dragHandlers && dragHandlers.handleDragEnd) {\n                dragHandlers.handleDragEnd();\n            }\n            \n            this.setState({\n                drag : \"normal\",\n                dragStartX : 0,\n                dragStartY : 0\n            });\n            \n        } else if(this.state.drag === \"normal\" || this.state.drag === \"mouseDown\" || (this.state.drag === \"dragging\" && wasProbablyClick)) {\n\n            if(dragHandlers && dragHandlers.handleClick) {\n                dragHandlers.handleClick(e, this.state.dragStartX, this.state.dragStartY);\n            }\n            this.setState({\n                drag : \"normal\",\n                dragStartX : 0,\n                dragStartY : 0\n            });\n        }\n    }\n\n    render() {\n\n        const styles={\n            position : \"absolute\",\n            top : 0,\n            left : 0,\n            height : \"100vh\",\n            width : \"100vw\"\n        }\n        \n        return (\n            <div\n                style={styles}\n\n                onMouseDown={this.handleMouseDown}\n                onMouseMove={this.handleMouseMove}\n                onMouseUp={this.handleMouseUp}\n                onWheel={this.handleZoom}\n                id=\"interActionManager\"\n            >\n                {this.props.children}\n            </div>\n        );\n    }\n    \n  }\n\n  export default InteractionManager;","import React, {Component} from 'react';\n\n\nclass KeyboardManager extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n      };\n    }\n\n    handleKeyPress = (e) => {\n\n        if(e.key === \"Backspace\" && this.props.textEditor === null) {\n            e.preventDefault();\n            this.props.handleDeleteElements();\n        } else if(\n            (e.ctrlKey === true && e.key === \"d\") ||\n            (e.metaKey === true && e.key === \"d\")\n        ) {\n            e.preventDefault();\n            this.props.handleDuplicateElements();\n        }\n        \n    }\n\n    render() {\n        \n        return (\n            <div\n                id=\"keyboardManager\"\n                styles={{\n                    display: \"none\"\n                }}\n            />\n            \n        );\n    }\n\n    componentDidMount(){\n        document.addEventListener('keydown', this.handleKeyPress);\n    }\n\n    componentWillUnmount(){\n        document.removeEventListener('keydown', this.handleKeyPress);\n    }\n    \n  }\n\n  export default KeyboardManager;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nclass Shape extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {};\n    }\n\n    handleSelect = (e) => {\n        const isMultiSelect = e.metaKey;\n        this.props.handleSetCurrentElement(this.props.data.id, true, isMultiSelect);\n    }\n\n    handleTextEdit = (e) => {\n        this.props.handleTextEdit(this.props.data.id);\n    }\n  \n    render() {\n        const {elementState, data} = this.props;\n        const shapeProps = {...this.props.data.styles};\n        let text = null;\n        let shape = null;\n        if(elementState.selected) {\n            shapeProps.style = {outline : `${(data.initialZoomLevel)}px dashed #5086F2`};\n        }\n        if(data.text) {\n            const textBody = data.text.split(/\\n|\\r/).map((line, i) => {\n                return(<div key={`${data.id}_${line}_${i}`}>{line}</div>);\n            });\n            const fontStyle = {\n                ...data.fontStyle,\n                fontSize : `${(shapeProps.fontSize)}px`,\n                lineHeight : `${(shapeProps.fontSize*1.4)}px`,\n                padding : `${data.padding}px`,\n                width : \"100%\"\n            };\n            text = (\n                <foreignObject\n                    className=\"svg_textContainer_foreignObject\"\n                    x={shapeProps.x}\n                    y={shapeProps.y}\n                    height={shapeProps.height}\n                    width={shapeProps.width}\n                >\n                    <div\n                        className=\"svg_textContainer\"\n                    >\n                        <div className=\"svg_textContainer_line\" style={fontStyle}>{textBody}</div>\n                    </div>\n                    \n                </foreignObject>\n            );\n        }\n\n        if(data.shapeType === 0) {\n            shape = <rect\n                id={data.id} \n                {...shapeProps}\n            />;\n        } else if (data.shapeType === 1) {\n            shapeProps.r = shapeProps.width/2;\n            shapeProps.cx = shapeProps.x+shapeProps.r;\n            shapeProps.cy = shapeProps.y+shapeProps.r;\n            \n            shape = <circle\n                id={data.id} \n                {...shapeProps}\n            />;\n        } else if (data.shapeType === 2) {\n            const triangleStart = `${shapeProps.x+shapeProps.width/2},${shapeProps.y}`,\n                  triangleMid = `${shapeProps.x},${shapeProps.y+shapeProps.height}`,\n                  triangleEnd = `${shapeProps.x+shapeProps.width},${shapeProps.y+shapeProps.height}`;\n            shapeProps.points = `${triangleStart} ${triangleMid} ${triangleEnd}`;\n            shape = <polygon\n                id={data.id} \n                {...shapeProps}\n            />;\n        } else {\n            shape = <text>No Shape Type Set</text>;\n        }\n        \n        return (\n            <g \n                onClick={this.handleSelect}\n                onDoubleClick={this.handleTextEdit}\n                height={shapeProps.height}\n                width={shapeProps.width}\n            >\n                {shape}\n                {text}\n            </g>\n        );\n    }\n    \n  }\n\n  export default Shape;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nclass Text extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {};\n    }\n\n    handleSelect = (e) => {\n        const isMultiSelect = e.metaKey;\n        this.props.handleSetCurrentElement(this.props.data.id, true, isMultiSelect);\n    }\n\n    handleTextEdit = () => {\n        this.props.handleTextEdit(this.props.data.id);\n    }\n  \n    render() {\n        const {elementState, data} = this.props;\n        const shapeProps = {...this.props.data.styles};\n        let text = null;\n        if(elementState.selected) {\n            shapeProps.style = {outline : `${(shapeProps.strokeWidth/2)}px dashed #5086F2`};\n        }\n        if(data.text) {\n            const textBody = data.text.split(/\\n|\\r/).map((line, i) => {\n                return(<div key={`${data.id}_${line}_${i}`}>{line}</div>);\n            });\n            const fontStyle = {\n                ...data.fontStyle,\n                fontSize : `${shapeProps.fontSize}px`,\n                lineHeight : `${(shapeProps.fontSize*1.4)}px`,\n                padding : `${data.padding}px`,\n                width : \"100%\"\n            };\n            text = (\n                <foreignObject\n                    className=\"svg_textContainer_foreignObject\"\n                    x={shapeProps.x}\n                    y={shapeProps.y}\n                    height={shapeProps.height}\n                    width={shapeProps.width}\n                >\n                    <div\n                        className=\"svg_textContainer\"\n                    >\n                        <div className=\"svg_textContainer_line\" style={fontStyle}>{textBody}</div>\n                    </div>\n                    \n                </foreignObject>\n            );\n        }\n        \n        return (\n            <g \n                onClick={this.handleSelect}\n                onDoubleClick={this.handleTextEdit}\n                cursor={this.state.cursor}\n                height={shapeProps.height}\n                width={shapeProps.width}\n            >\n                <rect \n                    id={data.id}\n                    {...shapeProps}\n                />\n                {text}\n            </g>\n        );\n    }\n\n    componentDidMount() {\n        setTimeout(() => {\n            this.handleTextEdit();\n        }, 300);\n        \n    }\n    \n  }\n\n  export default Text;","import React, {Component} from 'react';\nimport {ThemeContext} from '../../../theme-context';\n\nimport './styles.css';\n\nconst postItShapeTypes = [\n    {\n        path : \"m12.04544,2.07068l737.03703,11.11111l-1.85186,742.5926l-744.44443,-7.40742l9.25926,-746.29629z\",\n        dropShadow : \"m38.82956,79.07068l640.25289,10.22659l-17.60868,669.47711l-554.68758,28.18226l-67.95662,-707.88596l-0.00001,0z\",\n        filter : \"shadow1\"\n        \n    },\n    {\n        path : \"m0.934329,2.07068l761.481475,-0.000001l2.592584,735.925933l-764.44443,10.370358l0.370371,-746.29629z\",\n        dropShadow : \"m38.82956,79.07068l640.25289,10.291407l60.169098,684.901871c-233.784749,-16.594366 -465.347276,-42.16213 -681.354247,10.470427l-19.067731,-705.663705l-0.000005,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 -0.000001,0 -0.000001,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c-0.000001,0 -0.000001,0 -0.000001,0z\",\n        filter : \"shadow2\"\n        \n    },\n    {\n        path : \"m1.04544,0.07068l753.03703,7.11111l5.14814,727.5926l-751.44443,-0.40742l-6.74074,-734.29629z\",\n        dropShadow : \"m44.907991,62.874602l640.25289,10.291407l60.169098,684.901871c-220.059258,-34.241425 -433.974727,-12.750366 -685.275815,14.391995l-15.146163,-709.585273l-0.000005,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 -0.000001,0 -0.000001,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c-0.000001,0 -0.000001,0 -0.000001,0z\",\n        filter : \"shadow2\"\n    },\n    {\n        path : \"m16.095067,4.07068l747.987379,9.831012l-6.861786,727.872709l-752.43448,-9.220688l11.308887,-728.483033z\",\n        dropShadow : \"m44.907991,62.874602l640.25289,10.291407l26.126545,667.880594c-220.059258,-34.241425 -365.889621,55.334741 -634.211985,10.136676l-32.16744,-688.308677l-0.000005,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c0,0 -0.000001,0 -0.000001,0c0,0 0,0 -0.000001,0c0,0 0,0 0,0c-0.000001,0 -0.000001,0 -0.000001,0z\",\n        filter : \"shadow2\"\n    }\n\n];\n\nclass Postit extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {};\n    }\n\n    handleSelect = (e) => {\n        const isMultiSelect = e.metaKey;\n        this.props.handleSetCurrentElement(this.props.data.id, true, isMultiSelect);\n    }\n\n    handleTextEdit = (e) => {\n        this.props.handleTextEdit(this.props.data.id);\n    }\n  \n    render() {\n        const theme = this.context;\n        const {elementState, data} = this.props;\n        const shapeProps = {...this.props.data.styles};\n        let text = null;\n        const postItBaseWidth = 800;\n        if(elementState.selected) {\n            shapeProps.style = {outline : `${(shapeProps.strokeWidth/2)}px dashed #5086F2`};\n        }\n        if(data.text) {\n            const textBody = data.text.split(/\\n|\\r/).map((line, i) => {\n                return(<div key={`${data.id}_${line}_${i}`}>{line}</div>);\n            });\n            const fontStyle = {\n                ...data.fontStyle,\n                fontSize : `${shapeProps.fontSize}px`,\n                lineHeight : `${(shapeProps.fontSize*1.4)}px`,\n                padding : `${data.padding}px`\n            };\n            text = (\n                <foreignObject\n                    className=\"svg_textContainer_foreignObject\"\n                    x={shapeProps.x}\n                    y={shapeProps.y}\n                    height={shapeProps.height}\n                    width={shapeProps.width}\n                >\n                    <div\n                        className=\"svg_textContainer\"\n                    >\n                        <div className=\"svg_textContainer_line\" style={fontStyle}>{textBody}</div>\n                    </div>\n                    \n                </foreignObject>\n            );\n        }\n\n        const postItShapeData = postItShapeTypes[(elementState.shapeType || 0)],\n              postItColor = data.predefinedColor;\n\n        \n        return (\n            <g \n                onClick={this.handleSelect}\n                onDoubleClick={this.handleTextEdit}\n                cursor={this.state.cursor}\n                height={shapeProps.width}\n                width={shapeProps.width}\n            >\n                <rect\n                    id={data.id} \n                    {...shapeProps}\n                    height={shapeProps.width}\n                />\n                <g \n                    transform={`translate(${shapeProps.x} ${shapeProps.y}) scale(${(shapeProps.width/postItBaseWidth)})`}\n                    pointerEvents={\"none\"}\n                >\n                    <path \n                        d={postItShapeData.dropShadow} \n                        fill=\"rgba(0,0,0, 0.4)\" \n                        filter={`url(#${postItShapeData.filter})`}\n                    />\n                    <path \n                        d={postItShapeData.path} \n                        fill={(theme.preDefinedColors[postItColor])}\n                    />\n                </g>\n                {text}\n            </g>\n        );\n    }\n\n    \n  }\n\n  Postit.contextType = ThemeContext;\n\n  export default Postit;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nclass Line extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {};\n    }\n\n    handleSelect = (e) => {\n        const isMultiSelect = e.metaKey;\n        this.props.handleSetCurrentElement(this.props.data.id, true, isMultiSelect);\n    }\n\n    handleTextEdit = (e) => {\n        this.props.handleTextEdit(this.props.data.id);\n    }\n  \n    render() {\n        const {elementState, data} = this.props;\n        const shapeProps = {...this.props.data.styles};\n        let text = null;\n        let shape = null;\n        if(elementState.selected) {\n            shapeProps.style = {outline : `${(data.initialZoomLevel)}px dashed #5086F2`};\n        }\n        // if(data.text) {\n        //     const textBody = data.text.split(/\\n|\\r/).map((line, i) => {\n        //         return(<div key={`${data.id}_${line}_${i}`}>{line}</div>);\n        //     });\n        //     const fontStyle = {\n        //         ...data.fontStyle,\n        //         fontSize : `${(shapeProps.fontSize)}px`,\n        //         lineHeight : `${(shapeProps.fontSize*1.4)}px`,\n        //         padding : `${data.padding}px`,\n        //         width : \"100%\"\n        //     };\n        //     text = (\n        //         <foreignObject\n        //             className=\"svg_textContainer_foreignObject\"\n        //             x={shapeProps.x}\n        //             y={shapeProps.y}\n        //             height={shapeProps.height}\n        //             width={shapeProps.width}\n        //         >\n        //             <div\n        //                 className=\"svg_textContainer\"\n        //             >\n        //                 <div className=\"svg_textContainer_line\" style={fontStyle}>{textBody}</div>\n        //             </div>\n                    \n        //         </foreignObject>\n        //     );\n        // }\n\n        if(data.shapeType === 0) {\n            shapeProps.x1 = shapeProps.x;\n            shapeProps.y1 = shapeProps.y + shapeProps.height;\n            shapeProps.x2 = shapeProps.x + shapeProps.width;\n            shapeProps.y2 = shapeProps.y;\n            shape = <line\n                id={data.id} \n                {...shapeProps}\n            />;\n        } else if (data.shapeType === 1) {\n            shapeProps.d = `M ${shapeProps.x} ${shapeProps.y + shapeProps.height} q 0 ${-shapeProps.height} ${(shapeProps.width)} ${(-shapeProps.height)}`;\n            shape = <path\n                id={data.id} \n                {...shapeProps}\n            />;\n        } else if (data.shapeType === 2) {\n           \n            shape = <path\n                id={data.id} \n                {...shapeProps}\n            />;\n        } else {\n            shape = <text>No Shape Type Set</text>;\n        }\n        \n        return (\n            <g \n                onClick={this.handleSelect}\n                onDoubleClick={this.handleTextEdit}\n                height={shapeProps.height}\n                width={shapeProps.width}\n            >\n                {shape}\n                {text}\n            </g>\n        );\n    }\n    \n  }\n\n  export default Line;","import React, {Component} from 'react';\n\nimport './styles.css';\n\nclass Image extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {};\n    }\n\n    handleSelect = (e) => {\n        const isMultiSelect = e.metaKey;\n        this.props.handleSetCurrentElement(this.props.data.id, true, isMultiSelect);\n    }\n\n    handleCrop = (e) => {\n\n    }\n  \n    render() {\n        const {elementState, data} = this.props;\n        const shapeProps = {...this.props.data.styles};\n        let image = null;\n        let shape = null;\n        if(elementState.selected) {\n            shapeProps.style = {outline : `${(data.initialZoomLevel)}px dashed #5086F2`};\n        }\n            \n        const imgStyle = {\n            backgroundImage : `url(${data.imgURL})`,\n            backgroundRepeat : \"no-repeat\",\n            backgroundSize : \"contain\",\n            backgroundPosition : \"0 0\",\n            width : \"100%\"\n        };\n        image = (\n            <foreignObject\n                className=\"svg_imageContainer_foreignObject\"\n                x={shapeProps.x}\n                y={shapeProps.y}\n                height={shapeProps.height}\n                width={shapeProps.width}\n            >\n                <div\n                    className=\"svg_imageContainer\"\n                    style={imgStyle}\n                />\n            </foreignObject>\n        );\n        shape = <rect\n            id={data.id} \n            {...shapeProps}\n        />;\n\n        \n        return (\n            <g \n                onClick={this.handleSelect}\n                onDoubleClick={this.handleCrop}\n                height={shapeProps.height}\n                width={shapeProps.width}\n            >\n                {shape}\n                {image}\n            </g>\n        );\n    }\n    \n  }\n\n  export default Image;","export function objectClone(obj) {\n    const clone = Object.assign({}, obj);\n      Object.keys(clone).forEach(subPropertyKey => {\n        if(typeof clone[subPropertyKey] === 'object') {\n          clone[subPropertyKey] = objectClone(clone[subPropertyKey]);\n      }\n    });\n    return clone;\n}\n","import React, {Component} from 'react';\n//UI\nimport Tools from './ui/tools';\nimport Altimeter from './ui/altimeter';\nimport TextEditor from './ui/textEditor';\nimport ElementEditor from './ui/elementEditor';\nimport Resizer from './ui/resizer';\nimport ElementDrag from './ui/elementDrag';\nimport NavBar from './ui/navbar';\nimport BoardControls from './ui/boardControls';\nimport InteractionManager from './ui/InteractionManager';\nimport KeyboardManager from './ui/KeyboardManager';\n\n//ELEMENTS\nimport Shape from './elements/shape';\nimport Text from './elements/text';\nimport Postit from './elements/postit';\nimport Line from './elements/line';\nimport Image from './elements/image';\n\n//HELPERS\nimport Shortid from 'shortid';\nimport {objectClone} from './utils';\n\nimport './styles.css';\n\n\nclass Board extends Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        boardName : \"new-board-\"+new Date().toLocaleDateString().replace(/\\//g, \"\"),\n        zoomLevel : 100,\n        offsetX : 0,\n        offsetY : 0,\n        tool : \"pan\",\n        dragHandlers : {},\n        clickHandler : null,\n        elements : {},\n        elementState : {},\n        textEditor : null,\n        storeUndo : false\n      };\n    }\n\n    handlePanStart(e, dragStartX, dragStartY) {\n        const {\n            offsetX,\n            offsetY,\n            zoomLevel\n        } = this.state;\n\n        this.setState({\n            offsetX : offsetX + ((dragStartX+e.movementX)*-zoomLevel),\n            offsetY : offsetY + ((dragStartY+e.movementY)*-zoomLevel)\n        });\n    }\n\n    handlePanMove(e) {\n        const {\n            offsetX,\n            offsetY,\n            zoomLevel\n        } = this.state;\n\n        this.setState({\n            offsetX : offsetX + ((e.movementX)*-zoomLevel),\n            offsetY : offsetY + ((e.movementY)*-zoomLevel)\n        });\n    }\n  \n    handleToolSelect = (type) => {\n        this.handleDeselectAllElements(); \n        this.setState({\"tool\" : type});\n    }\n\n    handleTextEdit = (id) => {\n        const newElements = {...this.state.elements};\n        const elementData = {...this.state.elements[id]};\n        //clear Text in real element to prevent shadow\n        newElements[id].text = \"\";\n        this.setState({textEditor : elementData, elements : newElements});\n    }\n\n    handleUpdatedText = (data) => {\n        const newElementsData = {...this.state.elements};\n        newElementsData[data.id].text = data.newText;\n        newElementsData[data.id].styles.fontSize = data.fontSize;\n        newElementsData[data.id].unScaledFontSize = data.fontSize;\n        newElementsData[data.id].padding = 8*this.state.zoomLevel;\n        \n        this.setState({\n            elements : newElementsData,\n            storeUndo : true,\n            textEditor : null\n        });\n    }\n\n    handleSetCurrentElement = (elementID, selected, isMultiSelect) => {\n        const newElementStateData = {...this.state.elementState};\n        if(!isMultiSelect) {\n            Object.keys(newElementStateData).forEach(item => {\n                newElementStateData[item].selected = false;\n            });\n        }\n        newElementStateData[elementID].selected = !newElementStateData[elementID].selected;\n        this.setState({\n            elementState : newElementStateData\n        });\n    };\n\n    handleDeselectAllElements = () => {\n        const newElementStateData = {...this.state.elementState};\n        Object.keys(newElementStateData).forEach(item => {\n            newElementStateData[item].selected = false;\n        });\n        this.setState({\n            elementState : newElementStateData\n        });\n    }\n\n    registerDragHandler = (id, newDragHandlers) => {\n        setTimeout(() => {\n            var newHandlers = {};\n            if(newDragHandlers.dragStartHandler) {\n                newHandlers.handleDragStart =  newDragHandlers.dragStartHandler.bind(this);\n            }\n            if(newDragHandlers.dragMoveHandler) {\n                newHandlers.handleDragMove =  newDragHandlers.dragMoveHandler.bind(this);\n            }\n            if(newDragHandlers.dragEndHandler) {\n                newHandlers.handleDragEnd =  newDragHandlers.dragEndHandler.bind(this);\n            }\n            if(newDragHandlers.clickHandler) {\n                newHandlers.handleClick =  newDragHandlers.clickHandler.bind(this);\n            }\n            const dragHandlers = {...this.state.dragHandlers};\n            dragHandlers[id] = newHandlers;\n            this.setState({dragHandlers});\n        });\n       \n    };\n\n    removeDragHandler = (id) => {\n        const dragHandlers = {...this.state.dragHandlers};\n        if(dragHandlers[id]) {\n            delete dragHandlers[id];\n        }\n        this.setState({dragHandlers});\n    }\n\n    handleSetElementHeight = (elementID, height) => {\n        const newElementsData = {...this.state.elements};\n        newElementsData[elementID].styles.height = Number(height)*this.state.zoomLevel;\n        this.setState(newElementsData); //HOW DOES THIS WORK?\n    };\n\n    handleUpdateElementProperty = (data) => {\n        const newElementsData = {...this.state.elements};\n        const newElement = {...newElementsData[data.id]};\n        newElement[data.property] = data.value;\n        newElementsData[data.id] = newElement;\n        this.setState({elements : newElementsData, storeUndo : true});\n    }\n\n    handleUpdateElementsAndState = (data) => {\n        this.setState(data);\n    }\n\n    handleDeleteElements = () => {\n        const newElementsData = {...this.state.elements};\n        const newElementsState = {...this.state.elementState};\n        Object.keys(this.state.elementState).forEach(item => {\n            if(this.state.elementState[item].selected) {\n                delete newElementsData[item];\n                delete newElementsState[item];\n            }\n        });\n        this.setState({\n                elements : newElementsData,\n                elementState : newElementsState,\n                storeUndo : true\n            });\n    }\n\n    handleShiftElementPosition = (type, ids) => {\n        const newElementsData = {};\n        const newIdsOrder = Object.keys(this.state.elements);\n        ids.forEach(id => {\n            const arrayPosition = newIdsOrder.indexOf(id);\n            newIdsOrder.splice(arrayPosition, 1);\n            if(type === \"forward\") {\n                newIdsOrder.splice(arrayPosition+1, 0, id);\n            } else if (type === \"backward\") {\n                newIdsOrder.splice(arrayPosition-1, 0, id);\n            }\n        });\n        newIdsOrder.forEach(id => {\n            newElementsData[id] = this.state.elements[id];\n        });\n        this.setState({elements : newElementsData, storeUndo : true});\n    }\n\n    handleSelectElementsWithinArea = (x, y, x1, y1) => {\n        const {\n            elements,\n            elementState,\n            zoomLevel,\n            offsetX,\n            offsetY\n        } = this.state;\n\n        const newElementsState = {...elementState};\n\n        const realSpaceX = (x*zoomLevel)+offsetX,\n              realSpaceY = (y*zoomLevel)+offsetY,\n              realSpaceX1 = (x1*zoomLevel)+offsetX,\n              realSpaceY1 = (y1*zoomLevel)+offsetY;\n\n        Object.keys(elements).forEach(elementID => {\n            const element = elements[elementID];\n            let isWithinArea = false;\n            if(\n                element.styles.x >= realSpaceX &&\n                (element.styles.x + element.styles.width) <= realSpaceX1 &&\n                element.styles.y >= realSpaceY &&\n                (element.styles.y + element.styles.height) <= realSpaceY1) \n                {\n                    isWithinArea = true;\n                }\n            if(isWithinArea) {\n                newElementsState[element.id].selected = true;\n            } else {\n                newElementsState[element.id].selected = false;\n            }\n        });\n        this.setState({elementState : newElementsState});\n    }\n\n    handleDuplicateElements = () => {\n        const {\n            elements,\n            elementState,\n            zoomLevel\n        } = this.state;\n\n        const newElements = {...elements};\n        const newElementsState = {...elementState};\n        const selectedElements = [];\n\n        Object.keys(elementState).forEach(element => {\n            if(elementState[element].selected) {\n                selectedElements.push(elements[element]);\n            }\n        });\n\n        const duplicatesOffsetMargin = 8;\n\n        const duplicatesOffsetPosition = {\n            x : selectedElements[0].styles.x,\n            x1 : selectedElements[0].styles.x + selectedElements[0].styles.width + (duplicatesOffsetMargin*zoomLevel)\n        };\n\n        //get position for new duplicate elements\n        selectedElements.forEach(element => {\n            if(element.styles.x < duplicatesOffsetPosition.x) {\n                duplicatesOffsetPosition.x = element.styles.x;\n            }\n            const elementX1 = element.styles.x + element.styles.width;\n            if(elementX1 > duplicatesOffsetPosition.x1) {\n                duplicatesOffsetPosition.x1 = elementX1+(duplicatesOffsetMargin*zoomLevel);\n            }\n        });\n\n        //duplicate elements & state\n        selectedElements.forEach(element => {\n            const newID = Shortid.generate();\n            const duplicateElement = objectClone(element);\n            const duplicateElementState = objectClone(elementState[element.id]);\n            duplicateElement.id = newID;\n            duplicateElement.styles.x = duplicatesOffsetPosition.x1 + (duplicateElement.styles.x - duplicatesOffsetPosition.x);\n            newElements[newID] = duplicateElement;\n            newElementsState[newID] = duplicateElementState;\n            //remove selected status for old items\n            newElementsState[element.id].selected = false;\n        });\n\n        this.setState(\n            {\n                elementState : newElementsState,\n                elements : newElements\n            }\n        );\n    }\n\n    updateBoardPosition = (data) => {\n        this.setState(data);\n    }\n\n    calculateSelectedElementsBoundingBox(selectedElements, zoomLevel, offsetX, offsetY) {\n        if(selectedElements && selectedElements.length > 0) {\n            let width = selectedElements[0].styles.width,\n                height = selectedElements[0].styles.height,\n                x = selectedElements[0].styles.cx || selectedElements[0].styles.x,\n                y = selectedElements[0].styles.cy || selectedElements[0].styles.y,\n                cx = x+width,\n                cy = y+height,\n                combinedWidth = 0,\n                combinedHeight = 0;\n            if(selectedElements.length > 1) {\n                selectedElements.forEach(item => {\n                    let itemWidth = item.styles.width,\n                        itemHeight = item.styles.height,\n                        itemX = item.styles.cx || item.styles.x,\n                        itemY = item.styles.cy || item.styles.y,\n                        itemCX = itemX+itemWidth,\n                        itemCY = itemY+itemHeight;\n                    \n                    if (itemX < x) {\n                        x = itemX;\n                    }\n                    if(itemCX > cx) {\n                        cx = itemCX;\n                    }\n                    if (itemY < y) {\n                        y = itemY;\n                    }\n                    if(itemCY > cy) {\n                        cy = itemCY;\n                    }\n                });\n                combinedWidth = cx-x;\n                combinedHeight = cy-y;\n            }\n            return {\n                height : (combinedHeight || height)/zoomLevel,\n                width : (combinedWidth || width)/zoomLevel,\n                x : (x-offsetX)/zoomLevel,\n                y : (y-offsetY)/zoomLevel,\n                cx : (cx-offsetX)/zoomLevel,\n                cy : (cy-offsetY)/zoomLevel,\n                rawX : x,\n                rawY : y,\n                rawHeight : (combinedHeight || height),\n                rawWidth : (combinedWidth || width)\n            };\n        }\n        return {\n            height : 0,\n            width : 0,\n            x : 0,\n            y : 0,\n            cx : 0,\n            cy : 0\n        };\n    }\n\n    render() {\n        const {width, height} = this.props;\n        const {offsetX, offsetY, zoomLevel, tool, elements, textEditor} = this.state;\n        const zoomedWidth = width*zoomLevel,\n        zoomedHeight = height*zoomLevel;\n        const viewBox = `${offsetX} ${offsetY} ${zoomedWidth} ${zoomedHeight}`;\n        const elementNodes = Object.keys(elements).map(elementID => {\n            const element = elements[elementID];\n            if(element.type === \"circle\") {\n                return (<circle\n                            key={element.id} \n                            {...element.styles}\n                            style={{cursor: \"pointer\"}} \n                    />);\n            } else if (element.type === \"shape\") {\n                return (<Shape\n                    key={element.id}\n                    data={element}\n                    elementState={this.state.elementState[element.id]}\n                    handleTextEdit={this.handleTextEdit}\n                    handleSetCurrentElement={this.handleSetCurrentElement}\n                />);\n            } else if (element.type === \"text\") {\n                return (<Text \n                    key={element.id}\n                    data={element}\n                    elementState={this.state.elementState[element.id]}\n                    handleTextEdit={this.handleTextEdit}\n                    handleSetCurrentElement={this.handleSetCurrentElement}\n                />);\n            } else if (element.type === \"postit\") {\n                return (<Postit\n                    key={element.id}\n                    data={element}\n                    elementState={this.state.elementState[element.id]}\n                    handleTextEdit={this.handleTextEdit}\n                    handleSetCurrentElement={this.handleSetCurrentElement}\n                />);\n            } else if (element.type === \"line\") {\n                return (<Line\n                    key={element.id}\n                    data={element}\n                    elementState={this.state.elementState[element.id]}\n                    handleTextEdit={this.handleTextEdit}\n                    handleSetCurrentElement={this.handleSetCurrentElement}\n                />);\n            } else if (element.type === \"image\") {\n                return (<Image\n                    key={element.id}\n                    data={element}\n                    elementState={this.state.elementState[element.id]}\n                    handleTextEdit={this.handleTextEdit}\n                    handleSetCurrentElement={this.handleSetCurrentElement}\n                />);\n            }\n            return null;\n        });\n        const selectedElements = [],\n              selectedElementKeys = [];\n        Object.keys(this.state.elementState).forEach(item => {\n            if(this.state.elementState[item].selected) {\n                selectedElements.push(this.state.elements[item]);\n                selectedElementKeys.push(item);\n            }\n        });\n        const boundingBox = this.calculateSelectedElementsBoundingBox(selectedElements, zoomLevel, offsetX, offsetY);\n        const gridPosition = {\n            backgroundPosition : `${(offsetX*-1)/zoomLevel}px ${(offsetY*-1)/zoomLevel}px`\n        };\n        return (\n            <div \n                className={`boardWrapper ${tool}`} \n                style={gridPosition}\n            >\n                <InteractionManager\n                    offsetX={this.state.offsetX}\n                    offsetY={this.state.offsetY}\n                    zoomLevel={this.state.zoomLevel}\n                    updateBoardPosition={this.updateBoardPosition}\n                    updateDragPosition={this.updateDragPosition}\n                    dragHandlers={this.state.dragHandlers}\n                >\n                    <svg id=\"board\" \n                        width={`${width}px`}\n                        height={`${height}px`}\n                        viewBox={viewBox}\n                        onMouseDown={this.handleMouseDown}\n                        onMouseMove={this.handleMouseMove}\n                        onMouseUp={this.handleMouseUp}\n                        >\n                        <defs>\n                            <filter height=\"200%\" id=\"shadow1\" width=\"200%\" x=\"-50%\" y=\"-50%\">\n                                <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"20\"/>\n                            </filter>\n                            <filter height=\"200%\" id=\"shadow2\" width=\"200%\" x=\"-50%\" y=\"-50%\">\n                                <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"10\"/>\n                            </filter>\n                            <marker id=\"arrow\" markerWidth=\"5\" markerHeight=\"5\" refX=\"2.5\" refY=\"2.5\" orient=\"auto\" markerUnits=\"strokeWidth\">\n                                <polygon points=\"0,0 0,5 5,2.5\" fill=\"#000\" />\n                            </marker>\n                        </defs>\n                        <ElementDrag \n                            boundingBox={boundingBox}\n                            selectedElementKeys={selectedElementKeys}\n                            registerDragHandler={this.registerDragHandler}\n                            removeDragHandler={this.removeDragHandler}\n                        />\n                        {elementNodes}\n                    </svg>\n                    <Resizer \n                        isVisible={(selectedElements.length > 0)}\n                        registerDragHandler={this.registerDragHandler}\n                        boundingBox={boundingBox}\n                    />\n                    <NavBar \n                        applicationState={this.state}\n                        handleUpdateElementsAndState={this.handleUpdateElementsAndState}\n                    />\n                    <Altimeter zoomLevel={zoomLevel} />\n                    <BoardControls\n                        elements={this.state.elements}\n                        elementState={this.state.elementState}\n                        storeUndo={this.state.storeUndo}\n                        handleUpdateElementsAndState={this.handleUpdateElementsAndState}\n                        boardName={this.state.boardName}\n                    />\n                    <TextEditor \n                        data={textEditor}\n                        gridSpace={{offsetX, offsetY, zoomLevel}}\n                        handleUpdatedText={this.handleUpdatedText}\n                        handleSetElementHeight={this.handleSetElementHeight}\n                    />\n                    <ElementEditor \n                        selectedElements={selectedElements}\n                        gridSpace={{offsetX, offsetY, zoomLevel}}\n                        handleUpdateElementProperty={this.handleUpdateElementProperty}\n                        handleDeleteElements={this.handleDeleteElements}\n                        handleShiftElementPosition={this.handleShiftElementPosition}\n                        boundingBox={boundingBox}\n                    />\n                    <Tools\n                        handleToolSelect={this.handleToolSelect} \n                        registerDragHandler={this.registerDragHandler}\n                        removeDragHandler={this.removeDragHandler}\n                        handleSelectElementsWithinArea={this.handleSelectElementsWithinArea}\n                        currentSelectedTool={this.state.tool}\n                    />\n                </InteractionManager>\n                <KeyboardManager \n                    handleDeleteElements={this.handleDeleteElements}\n                    handleDuplicateElements={this.handleDuplicateElements}\n                    textEditor={textEditor}\n                />\n            </div>\n        );\n    }\n\n    componentDidMount(){\n        this.registerDragHandler(\"board\", {\n            //\"dragStartHandler\" : this.handlePanStart,\n            \"dragMoveHandler\" : this.handlePanMove,\n            \"clickHandler\" : this.handleDeselectAllElements\n        });\n\n        \n    }\n\n    \n  }\n\n  export default Board;","import React from 'react';\nimport './App.css';\nimport Board from './board/';\n\nimport {ThemeContext, themes} from './theme-context';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      width: window.innerWidth,\n      height : window.innerHeight\n    };\n  }\n\n  handleWindowResize = () => {\n    this.setState({\n      width : window.innerWidth,\n      height : window.innerHeight\n    });\n  }\n\n  render() {\n    const { height, width } = this.state;\n\n    return (\n      <ThemeContext.Provider value={themes.light}>\n        <div className=\"App\">\n            <Board width={width} height={height} />\n        </div>\n      </ThemeContext.Provider>\n    );\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.handleWindowResize);\n  }\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}